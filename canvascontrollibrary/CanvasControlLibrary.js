function getlowcomp(e){if(e>0){var t=Math.floor(e/2).toString(16);return t.length<2?"0"+t:t}return"00"}function gethighcomp(e){if(e<255){var t=e+Math.floor((255-e)/2);return t<=16?"0"+t.toString(16):t.toString(16)}return"FF"}function canvasGetOffsetLeft(e){var t=0;if(e.offsetParent){do{t+=(parseInt(e.offsetLeft)>=0||parseInt(e.offsetLeft)<0)&&parseInt(e.offsetLeft).toString()==e.offsetLeft.toString()?e.offsetLeft:0}while(e=e.offsetParent);return t}}function canvasGetOffsetTop(e){var t=0;if(e.offsetParent){do{t+=(parseInt(e.offsetTop)>=0||parseInt(e.offsetTop)<0)&&parseInt(e.offsetTop).toString()==e.offsetTop.toString()?e.offsetTop:0}while(e=e.offsetParent);return t}}function drawEllipse(e,t,a,n,r){var i=n/2*.5522848,o=r/2*.5522848,l=t+n,s=a+r,d=t+n/2,u=a+r/2;e.beginPath(),e.moveTo(t,u),e.bezierCurveTo(t,u-o,d-i,a,d,a),e.bezierCurveTo(d+i,a,l,u-o,l,u),e.bezierCurveTo(l,u+o,d+i,s,d,s),e.bezierCurveTo(d-i,s,t,u+o,t,u),e.closePath()}var canvases=new Array,ctxs=new Array,windows=new Array,windowCount=0,highestDepth=0,clickFunctions=new Array,doubleClickFunctions=new Array,dragFunctions=new Array,dragEndFunctions=new Array,dragEnterFunctions=new Array,dragLeaveFunctions=new Array,dragOverFunctions=new Array,dragStartFunctions=new Array,dropFunctions=new Array,mouseDownFunctions=new Array,mouseMoveFunctions=new Array,mouseOutFunctions=new Array,mouseOverFunctions=new Array,mouseUpFunctions=new Array,mouseWheelFunctions=new Array,scrollFunctions=new Array,windowDrawFunctions=new Array,windowIdWithFocus=new Array,modalWindows=new Array,hiddenWindows=new Array,gotFocusFunctions=new Array,lostFocusFunctions=new Array,keyPressFunctions=new Array,keyDownFunctions=new Array,doingClickEvent=0,doingMouseUp=0,doingMouseDown=0,doingEventForWindowID=-1,intervalID=-1,windowWithAnimationCount=new Array,suspendDraw=0,sessionID=null,donotredaw=null;function animatedDraw(){for(var e=0;e<windowWithAnimationCount.length;e++){var t=getWindowProps(windowWithAnimationCount[e].CanvasID,windowWithAnimationCount[e].WindowID);t&&invalidateRect(windowWithAnimationCount[e].CanvasID,-1,t.X,t.Y,t.Width,t.Height)}}function registerAnimatedWindow(e,t){for(var a=0;a<windowWithAnimationCount.length;a++)if(windowWithAnimationCount[a].CanvasID==e&&windowWithAnimationCount[a].WindowID==t)return void(-1==intervalID&&(intervalID=setInterval(animatedDraw,20)));windowWithAnimationCount.push({CanvasID:e,WindowID:t}),intervalID=setInterval(animatedDraw,20)}function unregisterAnimatedWindow(e,t){for(var a=0;a<windowWithAnimationCount.length;a++)if(windowWithAnimationCount[a].CanvasID==e&&windowWithAnimationCount[a].WindowID==t){windowWithAnimationCount.splice(a,1);break}var n=0;for(a=0;a<windowWithAnimationCount.length;a++)if(windowWithAnimationCount[a].CanvasID==e){n=1;break}n||clearInterval(intervalID)}function doesWindowHaveFocus(e,t){for(var a=0;a<windowIdWithFocus.length;a++)if(windowIdWithFocus[a][0]==e&&windowIdWithFocus[a][1]==t)return 1;return 0}function correctEvent(e,t){t=t||window.event;var a=document.getElementById(e);return t.pageX||t.pageY?(t.calcX=t.pageX-canvasGetOffsetLeft(a),t.calcY=t.pageY-canvasGetOffsetTop(a)):(t.clientX||t.clientY)&&(t.calcX=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-canvasGetOffsetLeft(a),t.calcY=t.clientY+document.body.scrollTop+document.documentElement.scrollTop-canvasGetOffsetTop(a)),t}function pointEvent(e,t,a,n,r){for(var i=(a=correctEvent(t,a)).calcX,o=a.calcY,l=0,s=new Array,d=0,u=0;u<=highestDepth;u++)for(var h=0;h<windows.length;h++)if(windows[h].ParentWindowID==n&&1==checkIfModalWindow(t,windows[h].WindowCount)&&0==checkIfHiddenWindow(t,windows[h].WindowCount)&&windows[h].CanvasID==t&&windows[h].Depth==u&&i>=windows[h].X&&i<=windows[h].X+windows[h].Width&&o>=windows[h].Y&&o<=windows[h].Y+windows[h].Height){if(doingEventForWindowID=windows[h].WindowCount,1==doingClickEvent||1==doingMouseUp||1==doingMouseDown){var g=0;l=1;for(var c=0;c<windowIdWithFocus.length;c++)if(windowIdWithFocus[c][0]==t&&windowIdWithFocus[c][1]!=windows[h].WindowCount&&-1!=windowIdWithFocus[c][1]){g=1;for(var w=0;w<lostFocusFunctions.length;w++)lostFocusFunctions[w][0]==t&&lostFocusFunctions[w][1]==windowIdWithFocus[c][1]&&lostFocusFunctions[w][1]!=windows[h].WindowCount&&(lostFocusFunctions[w][2](t,windowIdWithFocus[c][1]),donotredaw||s.push(lostFocusFunctions[w][1]));windowIdWithFocus[c][1]=windows[h].WindowCount;for(w=0;w<gotFocusFunctions.length;w++)gotFocusFunctions[w][0]==t&&gotFocusFunctions[w][1]==windowIdWithFocus[c][1]&&(gotFocusFunctions[w][2](t,windowIdWithFocus[c][1]),donotredaw||s.push(gotFocusFunctions[w][1]));d=1}else windowIdWithFocus[c][0]==t&&windowIdWithFocus[c][1]==windows[h].WindowCount&&(g=1);if(0==g){setFocusToWindowID(t,windows[h].WindowCount);for(w=0;w<gotFocusFunctions.length;w++)gotFocusFunctions[w][0]==t&&gotFocusFunctions[w][1]==windows[h].WindowCount&&-1!=windowIdWithFocus[c][1]&&(gotFocusFunctions[w][2](t,windows[h].WindowCount),donotredaw||s.push(gotFocusFunctions[w][1]));d=1}}for(var I=0;I<e.length;I++)if(e[I][0]==windows[h].WindowCount){if(windows[h].ChildWindowIDs&&windows[h].ChildWindowIDs.length>0?1!=pointEvent(e,t,a,windows[h].WindowCount,r)&&e[I][1](t,windows[h].WindowCount,a):e[I][1](t,windows[h].WindowCount,a),!donotredaw&&windows[h])if(invalidateRect(t,-1,windows[h].X,windows[h].Y,windows[h].Width,windows[h].Height),"ScrollBar"==windows[h].ControlType)(x=getWindowProps(t,(C=getScrollBarProps(t,windows[h].WindowCount)).OwnedByWindowID))&&(invalidateRect(t,-1,x.X,x.Y,x.Width,x.Height),C.DrawFunction?C.DrawFunction(t,windows[h].WindowCount):drawScrollBar(t,windows[h].WindowCount));windows[h]&&"TextBox"!=windows[h].ControlType&&1!=r&&(a.preventDefault&&a.preventDefault(),a.returnValue=!1)}return 1}for(u=0;u<=highestDepth;u++)for(h=0;h<windows.length;h++)if(windows[h].ParentWindowID==n&&0==checkIfModalWindow(t,windows[h].WindowCount)&&0==checkIfHiddenWindow(t,windows[h].WindowCount)&&windows[h].CanvasID==t&&windows[h].Depth==u&&i>=windows[h].X&&i<=windows[h].X+windows[h].Width&&o>=windows[h].Y&&o<=windows[h].Y+windows[h].Height){if(doingEventForWindowID=windows[h].WindowCount,1==doingClickEvent||1==doingMouseUp||1==doingMouseDown){g=0;l=1;for(c=0;c<windowIdWithFocus.length;c++)if(windowIdWithFocus[c][0]==t&&windowIdWithFocus[c][1]!=windows[h].WindowCount&&-1!=windowIdWithFocus[c][1]){g=1;for(w=0;w<lostFocusFunctions.length;w++)lostFocusFunctions[w][0]==t&&lostFocusFunctions[w][1]==windowIdWithFocus[c][1]&&lostFocusFunctions[w][1]!=windows[h].WindowCount&&(lostFocusFunctions[w][2](t,windowIdWithFocus[c][1]),donotredaw||s.push(lostFocusFunctions[w][1]));windowIdWithFocus[c][1]=windows[h].WindowCount;for(w=0;w<gotFocusFunctions.length;w++)gotFocusFunctions[w][0]==t&&gotFocusFunctions[w][1]==windowIdWithFocus[c][1]&&(gotFocusFunctions[w][2](t,windowIdWithFocus[c][1]),donotredaw||s.push(gotFocusFunctions[w][1]));d=1}else windowIdWithFocus[c][0]==t&&windowIdWithFocus[c][1]==windows[h].WindowCount&&-1!=windowIdWithFocus[c][1]&&(g=1);if(0==g){setFocusToWindowID(t,windows[h].WindowCount);for(w=0;w<gotFocusFunctions.length;w++)gotFocusFunctions[w][0]==t&&gotFocusFunctions[w][1]==windows[h].WindowCount&&(gotFocusFunctions[w][2](t,windows[h].WindowCount),donotredaw||s.push(gotFocusFunctions[w][1]));d=1}}for(I=0;I<e.length;I++)if(e[I][0]==windows[h].WindowCount){var C,x;if(windows[h].ChildWindowIDs&&windows[h].ChildWindowIDs.length>0?(doingEvent=0,1!=pointEvent(e,t,a,windows[h].WindowCount,r)&&e[I][1](t,windows[h].WindowCount,a)):e[I][1](t,windows[h].WindowCount,a),!donotredaw&&windows[h])if(invalidateRect(t,-1,windows[h].X,windows[h].Y,windows[h].Width,windows[h].Height),"ScrollBar"==windows[h].ControlType)(x=getWindowProps(t,(C=getScrollBarProps(t,windows[h].WindowCount)).OwnedByWindowID))&&(invalidateRect(t,-1,x.X,x.Y,x.Width,x.Height),C.DrawFunction?C.DrawFunction(t,windows[h].WindowCount):drawScrollBar(t,windows[h].WindowCount));windows[h]&&"TextBox"!=windows[h].ControlType&&1!=r&&(a.preventDefault&&a.preventDefault(),a.returnValue=!1)}return 1}if(1==l)return 1;if(1==doingClickEvent||1==doingMouseUp||1==doingMouseDown)for(var p=0;p<windowIdWithFocus.length;p++)if(windowIdWithFocus[p][0]==t){doingEventForWindowID=-1;for(w=0;w<lostFocusFunctions.length;w++)lostFocusFunctions[w][0]==t&&lostFocusFunctions[w][1]==windowIdWithFocus[p][1]&&-1!=windowIdWithFocus[p][1]&&(lostFocusFunctions[w][2](t,windowIdWithFocus[p][1]),donotredaw||s.push(lostFocusFunctions[w][1]));windowIdWithFocus[p][1]=-1,d=1}if(1==d&&!donotredaw)for(h=0;h<s.length;h++){var f=getWindowProps(t,s[h]);f&&invalidateRect(t,-1,f.X,f.Y,f.Width,f.Height)}return donotredaw=null,0}function setFocusToWindowID(e,t){for(var a=0;windowIdWithFocus.length;a++)if(windowIdWithFocus[a][0]==e)return void(windowIdWithFocus[a][1]=t);windowIdWithFocus.push([e,t])}function canvasOnClick(e,t){doingClickEvent=1,pointEvent(clickFunctions,e,t,-1),doingClickEvent=0}function canvasOnDblClick(e,t){pointEvent(doubleClickFunctions,e,t,-1)}function canvasOnDrag(e,t){pointEvents(dragFunctions,e,t,-1)}function canvasOnDragEnd(e,t){pointEvent(dragEndFunctions,e,t,-1)}function canvasOnDragEnter(e,t){pointEvent(dragEnterFunctions,e,t,-1)}function canvasOnDragLeave(e,t){pointEvent(dragLeaveFunctions,e,t,-1)}function canvasOnDragOver(e,t){pointEvent(dragOverFunctions,e,t,-1)}function canvasOnDragStart(e,t){pointEvent(dragStartFunctions,e,t,-1)}function canvasOnDrop(e,t){pointEvent(dropFunctions,e,t,-1)}function canvasOnMouseDown(e,t){doingMouseDown=1,pointEvent(mouseDownFunctions,e,t,-1),doingMouseDown=0}function canvasOnMouseMove(e,t){pointEvent(mouseMoveFunctions,e,t,-1)}function canvasOnMouseOut(e,t){pointEvent(mouseOutFunctions,e,t,-1)}function canvasOnMouseOver(e,t){pointEvent(mouseOverFunctions,e,t)}function canvasOnMouseUp(e,t){doingMouseUp=1,pointEvent(mouseUpFunctions,e,t,-1),doingMouseUp=0}function canvasOnMouseWheel(e,t){pointEvent(mouseWheelFunctions,e,t,-1)}function canvasOnScroll(e,t){pointEvent(scrollFunctions,e,t,-1)}function registerCanvasElementId(e){var t=document.getElementById(e);canvases.push([e,t]),ctxs.push([e,t.getContext("2d")]),t.onclick=function(t){canvasOnClick(e,t)},t.ondblclick=function(t){canvasOnDblClick(e,t)},t.addEventListener("ondrag",function(t){canvasOnDrag(e,t)}),t.addEventListener("ondragend",function(t){canvasOnDragEnd(e,t)}),t.addEventListener("ondragenter",function(t){canvasOnDragEnter(e,t)}),t.addEventListener("ondragleave",function(t){canvasOnDragLeave(e,t)}),t.addEventListener("ondragover",function(t){canvasOnDragOver(e,t)}),t.addEventListener("ondragstart",function(t){t.dataTransfer.setData("text/plain","Dragging"),canvasOnDragStart(e,t)}),t.addEventListener("ondrop",function(t){canvasOnDrop(e,t)}),t.onkeypress=function(e){for(var t=0;t<keyPressFunctions.length;t++)for(var a=0;a<windowIdWithFocus.length;a++)if(windowIdWithFocus[a][0]==keyPressFunctions[t].CanvasID&&windowIdWithFocus[a][1]==keyPressFunctions[t].WindowID){keyPressFunctions[t].KeyPressFunction(keyPressFunctions[t].CanvasID,keyPressFunctions[t].WindowID,e);var n=getWindowProps(keyPressFunctions[t].CanvasID,keyPressFunctions[t].WindowID);n&&invalidateRect(keyPressFunctions[t].CanvasID,-1,n.X,n.Y,n.Width,n.Height),e.preventDefault&&e.preventDefault(),e.returnValue=!1}return!1},t.onkeydown=function(t){for(var a=0;a<keyDownFunctions.length;a++)for(var n=0;n<windowIdWithFocus.length;n++){var r;if(9==t.keyCode)if((r=getWindowProps(windowIdWithFocus[n][0],windowIdWithFocus[n][1])).CanvasID==keyDownFunctions[a].CanvasID&&r.WindowCount==keyDownFunctions[a].WindowID){if("WordProcessor"!=r.ControlType){for(var i=0,o=0;o<windows.length;o++)if(windows[o].WindowCount!=r.WindowCount&&r.TabStopIndex+1==windows[o].TabStopIndex){i=1,windowIdWithFocus[n][1]=windows[o].WindowCount;for(var l=0;l<lostFocusFunctions.length;l++)lostFocusFunctions[l][0]==r.CanvasID&&lostFocusFunctions[l][1]==r.WindowCount&&lostFocusFunctions[l][1]!=windows[o].WindowCount&&lostFocusFunctions[l][2](e,r.WindowCount);for(l=0;l<gotFocusFunctions.length;l++)gotFocusFunctions[l][0]==r.CanvasID&&gotFocusFunctions[l][1]==windows[o].WindowCount&&gotFocusFunctions[l][2](e,windows[o].WindowCount);var s=getCanvas(windows[o].CanvasID);return invalidateRect(windows[o].CanvasID,-1,0,0,s.width,s.height),t.preventDefault&&t.preventDefault(),t.returnValue=!1,!1}if(0==i&&1!=r.TabStopIndex)for(o=0;o<windows.length;o++)if(windows[o].WindowCount!=r.WindowCount&&1==windows[o].TabStopIndex){i=1,windowIdWithFocus[n][1]=windows[o].WindowCount;for(l=0;l<lostFocusFunctions.length;l++)lostFocusFunctions[l][0]==r.CanvasID&&lostFocusFunctions[l][1]==r.WindowCount&&lostFocusFunctions[l][1]!=windows[o].WindowCount&&lostFocusFunctions[l][2](r.CanvasID,r.WindowCount);for(l=0;l<gotFocusFunctions.length;l++)gotFocusFunctions[l][0]==r.CanvasID&&gotFocusFunctions[l][1]==windows[o].WindowCount&&gotFocusFunctions[l][2](e,windows[o].WindowCount);s=getCanvas(windows[o].CanvasID);return invalidateRect(windows[o].CanvasID,-1,0,0,s.width,s.height),t.preventDefault&&t.preventDefault(),t.returnValue=!1,!1}}}else if(-1!=r.MultiWindowControlsMainWindowId&&r.MultiWindowControlsMainWindowId>=0&&(r=getWindowProps(r.CanvasID,r.MultiWindowControlsMainWindowId)).CanvasID==keyDownFunctions[a].CanvasID&&r.WindowCount==keyDownFunctions[a].WindowID&&"WordProcessor"!=r.ControlType){for(i=0,o=0;o<windows.length;o++)if(windows[o].WindowCount!=r.WindowCount&&r.TabStopIndex+1==windows[o].TabStopIndex){i=1,windowIdWithFocus[n][1]=windows[o].WindowCount;for(l=0;l<lostFocusFunctions.length;l++)lostFocusFunctions[l][0]==r.CanvasID&&lostFocusFunctions[l][1]==r.WindowCount&&lostFocusFunctions[l][1]!=windows[o].WindowCount&&lostFocusFunctions[l][2](e,r.WindowCount);for(l=0;l<gotFocusFunctions.length;l++)gotFocusFunctions[l][0]==r.CanvasID&&gotFocusFunctions[l][1]==windows[o].WindowCount&&gotFocusFunctions[l][2](e,windows[o].WindowCount);s=getCanvas(windows[o].CanvasID);return invalidateRect(windows[o].CanvasID,-1,0,0,s.width,s.height),t.preventDefault&&t.preventDefault(),t.returnValue=!1,!1}if(0==i&&1!=r.TabStopIndex)for(o=0;o<windows.length;o++)if(windows[o].WindowCount!=r.WindowCount&&1==windows[o].TabStopIndex){i=1,windowIdWithFocus[n][1]=windows[o].WindowCount;for(l=0;l<lostFocusFunctions.length;l++)lostFocusFunctions[l][0]==r.CanvasID&&lostFocusFunctions[l][1]==r.WindowCount&&lostFocusFunctions[l][1]!=windows[o].WindowCount&&lostFocusFunctions[l][2](r.CanvasID,r.WindowCount);for(l=0;l<gotFocusFunctions.length;l++)gotFocusFunctions[l][0]==r.CanvasID&&gotFocusFunctions[l][1]==windows[o].WindowCount&&gotFocusFunctions[l][2](e,windows[o].WindowCount);s=getCanvas(windows[o].CanvasID);return invalidateRect(windows[o].CanvasID,-1,0,0,s.width,s.height),t.preventDefault&&t.preventDefault(),t.returnValue=!1,!1}}if(windowIdWithFocus[n][0]==keyDownFunctions[a].CanvasID&&windowIdWithFocus[n][1]==keyDownFunctions[a].WindowID)keyDownFunctions[a].KeyDownFunction(keyDownFunctions[a].CanvasID,keyDownFunctions[a].WindowID,t),(r=getWindowProps(keyDownFunctions[a].CanvasID,keyDownFunctions[a].WindowID))&&invalidateRect(keyDownFunctions[a].CanvasID,-1,r.X,r.Y,r.Width,r.Height),t.preventDefault&&t.preventDefault(),t.returnValue=!1}return!1},navigator.userAgent.toLowerCase().indexOf("android")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1?(t.addEventListener("touchstart",function(t){t.pageX=t.touches[0].pageX,t.pageY=t.touches[0].pageY,pointEvent(mouseDownFunctions,e,t,-1)},!1),t.addEventListener("touchmove",function(t){t.pageX=t.touches[0].pageX,t.pageY=t.touches[0].pageY,pointEvent(mouseMoveFunctions,e,t,-1)},!1),t.addEventListener("touchend",function(t){t.pageX=t.touches[0].pageX,t.pageY=t.touches[0].pageY,pointEvent(mouseUpFunctions,e,t,-1,1)},!1)):(t.onmousedown=function(t){canvasOnMouseDown(e,t)},t.onmousemove=function(t){canvasOnMouseMove(e,t)},t.onmouseup=function(t){canvasOnMouseUp(e,t)},t.onmouseout=function(t){canvasOnMouseOut(e,t)},t.onmouseover=function(t){canvasOnMouseOver(e,t)},t.onmousewheel=function(t){canvasOnMouseWheel(e,t)},t.onscroll=function(t){canvasOnScroll(e,t)})}function createWindow(e,t,a,n,r,i,o,l,s,d,u){return++windowCount,windows.push({WindowCount:windowCount,X:t,Y:a,Width:n,Height:r,Depth:i,CanvasID:e,ParentWindowID:o,ChildWindowIDs:new Array,ControlType:l,ControlNameID:s,MultiWindowControlsMainWindowId:d,TabStopIndex:u}),windowCount}function getWindowControlPropsByWindowProps(e){switch(e.ControlType){case"Panel":return getPanelProps(e.CanvasID,e.WindowCount);case"Label":return getLabelProps(e.CanvasID,e.WindowCount);case"Button":return getButtonProps(e.CanvasID,e.WindowCount);case"ScrollBar":return getScrollBarProps(e.CanvasID,e.WindowCount);case"Grid":return getGridProps(e.CanvasID,e.WindowCount);case"ComboBoxTextArea":return getComboboxPropsByTextAreaWindowId(e.CanvasID,e.WindowCount);case"CheckBox":return getcheckboxProps(e.CanvasID,e.WindowCount);case"RadioButtonGroup":return getRadioButtonProps(e.CanvasID,e.WindowCount);case"Image":return getImageControlProps(e.CanvasID,e.WindowCount);case"TreeView":return getTreeViewProps(e.CanvasID,e.WindowCount);case"Calender":return getCalenderProps(e.CanvasID,e.WindowCount);case"ProgressBar":return getProgressBarProps(e.CanvasID,e.WindowCount);case"Slider":return getSliderProps(e.CanvasID,e.WindowCount);case"DatePickerTextArea":return getDatePickerPropsByTextBoxAreaWindowID(e.CanvasID,e.WindowCount);case"BarGraph":return getBarGraphProps(e.CanvasID,e.WindowCount);case"PieChart":return getPieChartProps(e.CanvasID,e.WindowCount);case"LineGraph":return getLineGraphProps(e.CanvasID,e.WindowCount);case"Gauge":return getGaugeChartProps(e.CanvasID,e.WindowCount);case"RadarGraph":return getRadarGraphProps(e.CanvasID,e.WindowCount);case"LineAreaGraph":return getLineAreaGraphProps(e.CanvasID,e.WindowCount);case"CandlesticksGraph":return getCandlesticksGraphProps(e.CanvasID,e.WindowCount);case"DoughnutChart":return getDoughnutChartProps(e.CanvasID,e.WindowCount);case"BarsMixedWithLabeledLineGraph":return getBarsMixedWithLabledLineGraphProps(e.CanvasID,e.WindowCount);case"StackedBarGraph":return getstackedBarGraphProps(e.CanvasID,e.WindowCount);case"Tab":return getTabProps(e.CanvasID,e.WindowCount);case"ImageMap":return getImageMapProps(e.CanvasID,e.WindowCount);case"SubMenu":return getSubMenuBarProps(e.CanvasID,e.WindowCount);case"MenuBar":return getMenuBarProps(e.CanvasID,e.WindowCount);case"TextBox":return getTextBoxProps(e.CanvasID,e.WindowCount);case"ImageFader":return getImageFaderProps(e.CanvasID,e.WindowCount);case"ImageSlider":return getImageSliderProps(e.CanvasID,e.WindowCount);case"MultiLineLabel":return getMultiLineLabelProps(e.CanvasID,e.WindowCount);case"WordProcessor":return getWordProcessorProps(e.CanvasID,e.WindowCount)}}function registerChildWindow(e,t,a){for(var n=0;n<windows.length;n++)if(windows[n].WindowCount==a){windows[n].ChildWindowIDs.push(t);var r=getWindowProps(e,t);r&&(r.ParentWindowID=a)}}function registerKeyPressFunction(e,t,a){for(var n=0;n<windows.length;n++)windows[n].CanvasID==e&&windows[n].WindowCount==a&&keyPressFunctions.push({CanvasID:e,KeyPressFunction:t,WindowID:a})}function registerKeyDownFunction(e,t,a){for(var n=0;n<windows.length;n++)windows[n].CanvasID==e&&windows[n].WindowCount==a&&keyDownFunctions.push({CanvasID:e,KeyDownFunction:t,WindowID:a})}function registerEvent(e,t,a,n){for(var r=0;r<windows.length;r++)windows[r].CanvasID==a&&windows[r].WindowCount==e&&n.push([e,t,a])}function registerClickFunction(e,t,a){registerEvent(e,t,a,clickFunctions)}function registerDoubleClickFunction(e,t,a){registerEvent(e,t,a,doubleClickFunctions)}function registerDragFunction(e,t,a){registerEvent(e,t,a,dragFunctions)}function registerDragEndFunction(e,t,a){registerEvent(e,t,a,dragEndFunctions)}function registerDragEnterFunction(e,t,a){registerEvent(e,t,a,dragEnterFunctions)}function registerDragLeaveFunction(e,t,a){registerEvent(e,t,a,dragLeaveFunctions)}function registerDragOverFunction(e,t,a){registerEvent(e,t,a,dragOverFunctions)}function registerDragStartFunction(e,t,a){registerEvent(e,t,a,dragStartFunctions)}function registerDropFunction(e,t,a){registerEvent(e,t,a,dropFunctions)}function registerMouseDownFunction(e,t,a){registerEvent(e,t,a,mouseDownFunctions)}function registerMouseMoveFunction(e,t,a){registerEvent(e,t,a,mouseMoveFunctions)}function registerMouseOutFunction(e,t,a){registerEvent(e,t,a,mouseOutFunctions)}function registerMouseOverFunction(e,t,a){registerEvent(e,t,a,mouseOverFunctions)}function registerMouseUpFunction(e,t,a){registerEvent(e,t,a,mouseUpFunctions)}function registerMouseWheelFunction(e,t,a){registerEvent(e,t,a,mouseWheelFunctions)}function registerScrollFunction(e,t,a){registerEvent(e,t,a,scrollFunctions)}function registerWindowDrawFunction(e,t,a){registerEvent(e,t,a,windowDrawFunctions)}function getWindowDepth(e,t){for(var a=0;a<windows.length;a++)if(windows[a].WindowCount==e&&windows[a].CanvasID==t)return windows[a].Depth}function setWindowDepth(e,t,a){for(var n=0;n<windows.length;n++)if(windows[n].WindowCount==t&&windows[n].CanvasID==e)return windows[n].Depth=a,void(a>highestDepth&&(highestDepth=a))}function checkIfModalWindow(e,t){for(var a=0;a<modalWindows.length;a++)if(modalWindows[a].CanvasID==e&&modalWindows[a].WindowID==t)return 1;return 0}function registerModalWindow(e,t){modalWindows.push({CanvasID:e,WindowID:t})}function checkIfHiddenWindow(e,t){for(var a=0;a<hiddenWindows.length;a++)if(hiddenWindows[a].CanvasID==e&&hiddenWindows[a].WindowID==t)return hiddenWindows[a].HiddenStatus;return 0}function registerHiddenWindow(e,t,a){hiddenWindows.push({CanvasID:e,WindowID:t,HiddenStatus:a})}function setHiddenWindowStatus(e,t,a){for(var n=0;n<hiddenWindows.length;n++)hiddenWindows[n].HiddenStatus!=a&&hiddenWindows[n].CanvasID==e&&hiddenWindows[n].WindowID==t&&(hiddenWindows[n].HiddenStatus=a)}function registerLostFocusFunction(e,t,a){lostFocusFunctions.push([e,t,a])}function registerGotFocusFunction(e,t,a){gotFocusFunctions.push([e,t,a])}function getWindowProps(e,t){for(var a=0;a<windows.length;a++)if(windows[a].CanvasID==e&&windows[a].WindowCount==t)return windows[a]}function invalidateRect(e,t,a,n,r,i){if(0==suspendDraw){getCanvas(e);-1==t&&getCtx(e).clearRect(a,n,r,i);for(var o=0;o<=highestDepth;o++)for(var l=0;l<windowDrawFunctions.length;l++){if((s=getWindowProps(e,windowDrawFunctions[l][0]))&&s.ParentWindowID==t&&0==checkIfHiddenWindow(e,windowDrawFunctions[l][0])&&0==checkIfModalWindow(e,windowDrawFunctions[l][0])&&getWindowDepth(windowDrawFunctions[l][0],windowDrawFunctions[l][2])==o&&windowDrawFunctions[l][2]==e&&a<s.X+s.Width&&a+r>s.X&&n<s.Y+s.Height&&n+i>s.Y)(d=getCtx(e)).save(),d.beginPath(),d.rect(s.X,s.Y,s.Width,s.Height),d.clip(),windowDrawFunctions[l][1](e,windowDrawFunctions[l][0]),s.ChildWindowIDs&&s.ChildWindowIDs.length>0&&invalidateRect(e,windowDrawFunctions[l][0],a,n,r,i),d.restore()}for(o=0;o<=highestDepth;o++)for(l=0;l<windowDrawFunctions.length;l++){var s,d;if((s=getWindowProps(e,windowDrawFunctions[l][0]))&&s.ParentWindowID==t&&0==checkIfHiddenWindow(e,windowDrawFunctions[l][0])&&1==checkIfModalWindow(e,windowDrawFunctions[l][0])&&getWindowDepth(windowDrawFunctions[l][0],windowDrawFunctions[l][2])==o&&windowDrawFunctions[l][2]==e&&a<s.X+s.Width&&a+r>s.X&&n<s.Y+s.Height&&n+i>s.Y)(d=getCtx(e)).save(),d.beginPath(),d.rect(s.X,s.Y,s.Width,s.Height),d.clip(),windowDrawFunctions[l][1](e,windowDrawFunctions[l][0]),s.ChildWindowIDs&&s.ChildWindowIDs.length>0&&invalidateRect(e,windowDrawFunctions[l][0],a,n,r,i),d.restore()}}}function getCtx(e){for(var t=0;t<ctxs.length;t++)if(ctxs[t][0]==e)return ctxs[t][1]}function getCanvas(e){for(var t=0;t<canvases.length;t++)if(canvases[t][0]==e)return canvases[t][1]}function destroyControl(e,t){for(var a=0;a<windows.length;a++)windows[a].CanvasID==e&&windows[a].WindowCount==t&&destroyControlByWindowObj(windows[a])}function destroyControlByNameID(e){for(var t=0;t<windows.length;t++)windows[t].ControlNameID==e&&destroyControlByWindowObj(windows[t])}function destroyWindow(e,t){for(var a=0;a<windows.length;a++)windows[a].CanvasID==e&&windows[a].WindowCount==t&&(removeEventHooks(windows[a]),windows.splice(a,1),unregisterAnimatedWindow(e,t))}function removeEventFunctions(e,t,a){for(var n=e.length-1;n>=0;n--)e[n][2]==t&&e[n][0]==a&&e.splice(n,1)}function removeEventHooks(e){removeEventFunctions(clickFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(doubleClickFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(dragFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(dragEndFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(dragEnterFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(dragLeaveFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(dragOverFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(dragStartFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(dropFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(mouseDownFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(mouseMoveFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(mouseOutFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(mouseOverFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(mouseUpFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(mouseWheelFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(scrollFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(windowDrawFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(gotFocusFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(lostFocusFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(keyPressFunctions,e.CanvasID,e.WindowCount),removeEventFunctions(keyDownFunctions,e.CanvasID,e.WindowCount)}function destroyControlByWindowObj(e){for(var t=0;e.ChildWindowIDs&&t<e.ChildWindowIDs.length;t++)for(var a=0;a<windows.length;a++)windows[a].CanvasID==e.CanvasID&&windows[a].WindowID==e.ChildWindowIDs[t]&&destroyControlByWindowObj(windows[a]);switch(e.ControlType){case"Label":for(t=labelPropsArray.length-1;t>=0;t--)labelPropsArray[t].CanvasID==e.CanvasID&&labelPropsArray[t].WindowID==e.WindowCount&&labelPropsArray.splice(t,1);break;case"Button":for(t=buttonPropsArray.length-1;t>=0;t--)buttonPropsArray[t].CanvasID==e.CanvasID&&buttonPropsArray[t].WindowID==e.WindowCount&&buttonPropsArray.splice(t,1);break;case"ScrollBar":for(t=scrollBarPropsArray.length-1;t>=0;t--)scrollBarPropsArray[t].CanvasID==e.CanvasID&&scrollBarPropsArray[t].WindowID==e.WindowCount&&scrollBarPropsArray.splice(t,1);break;case"Grid":for(t=gridPropsArray.length-1;t>=0;t--)gridPropsArray[t].CanvasID==e.CanvasID&&gridPropsArray[t].WindowID==e.WindowCount&&gridPropsArray.splice(t,1);break;case"ComboBoxTextArea":for(t=comboboxPropsArray.length-1;t>=0;t--)comboboxPropsArray[t].CanvasID==e.CanvasID&&comboboxPropsArray[t].WindowID==e.WindowCount&&(destroyWindow(e.CanvasID,comboboxPropsArray[t].ButtonWindowID),destroyWindow(e.CanvasID,comboboxPropsArray[t].ListAreaWindowID),comboboxPropsArray.splice(t,1));break;case"CheckBox":for(t=checkboxPropsArray.length-1;t>=0;t--)checkboxPropsArray[t].CanvasID==e.CanvasID&&checkboxPropsArray[t].WindowID==e.WindowCount&&checkboxPropsArray.splice(t,1);break;case"RadioButtonGroup":for(t=radiobuttonPropsArray.length-1;t>=0;t--)radiobuttonPropsArray[t].CanvasID==e.CanvasID&&radiobuttonPropsArray[t].WindowID==e.WindowCount&&radiobuttonPropsArray.splice(t,1);break;case"Image":for(t=imageControlPropsArray.length-1;t>=0;t--)imageControlPropsArray[t].CanvasID==e.CanvasID&&imageControlPropsArray[t].WindowID==e.WindowCount&&imageControlPropsArray.splice(t,1);break;case"TreeView":for(t=treeViewPropsArray.length-1;t>=0;t--)treeViewPropsArray[t].CanvasID==e.CanvasID&&treeViewPropsArray[t].WindowID==e.WindowCount&&treeViewPropsArray.splice(t,1);break;case"Calender":for(t=calenderPropsArray.length-1;t>=0;t--)calenderPropsArray[t].CanvasID==e.CanvasID&&calenderPropsArray[t].WindowID==e.WindowCount&&calenderPropsArray.splice(t,1);break;case"ProgressBar":for(t=progressBarPropsArray.length-1;t>=0;t--)progressBarPropsArray[t].CanvasID==e.CanvasID&&progressBarPropsArray[t].WindowID==e.WindowCount&&progressBarPropsArray.splice(t,1);break;case"Slider":for(t=sliderPropsArray.length-1;t>=0;t--)sliderPropsArray[t].CanvasID==e.CanvasID&&sliderPropsArray[t].WindowID==e.WindowCount&&sliderPropsArray.splice(t,1);break;case"DatePickerTextArea":for(t=datePickerPropsArray.length-1;t>=0;t--)datePickerPropsArray[t].CanvasID==e.CanvasID&&datePickerPropsArray[t].WindowID==e.WindowCount&&(destroyWindow(e.CanvasID,datePickerPropsArray[t].ButtonWindowID),destroyControl(e.CanvasID,datePickerPropsArray[t].CalenderWindowID),datePickerPropsArray.splice(t,1));break;case"Panel":for(t=panelPropsArray.length-1;t>=0;t--)panelPropsArray[t].CanvasID==e.CanvasID&&panelPropsArray[t].WindowID==e.WindowCount&&panelPropsArray.splice(t,1);break;case"BarGraph":for(t=barGraphsPropsArray.length-1;t>=0;t--)barGraphsPropsArray[t].CanvasID==e.CanvasID&&barGraphsPropsArray[t].WindowID==e.WindowCount&&barGraphsPropsArray.splice(t,1);break;case"PieChart":for(t=pieChartsPropsArray.length-1;t>=0;t--)pieChartsPropsArray[t].CanvasID==e.CanvasID&&pieChartsPropsArray[t].WindowID==e.WindowCount&&pieChartsPropsArray.splice(t,1);break;case"LineGraph":for(t=lineGraphsPropsArray.length-1;t>=0;t--)lineGraphsPropsArray[t].CanvasID==e.CanvasID&&lineGraphsPropsArray[t].WindowID==e.WindowCount&&lineGraphsPropsArray.splice(t,1);break;case"Gauge":for(t=gaugeChartPropsArray.length-1;t>=0;t--)gaugeChartPropsArray[t].CanvasID==e.CanvasID&&gaugeChartPropsArray[t].WindowID==e.WindowCount&&gaugeChartPropsArray.splice(t,1);break;case"RadarGraph":for(t=radarGraphPropsArray.length-1;t>=0;t--)radarGraphPropsArray[t].CanvasID==e.CanvasID&&radarGraphPropsArray[t].WindowID==e.WindowCount&&radarGraphPropsArray.splice(t,1);break;case"LineAreaGraph":for(t=lineAreaGraphPropsArray.length-1;t>=0;t--)lineAreaGraphPropsArray[t].CanvasID==e.CanvasID&&lineAreaGraphPropsArray[t].WindowID==e.WindowCount&&lineAreaGraphPropsArray.splice(t,1);break;case"CandlesticksGraph":for(t=candlesticksGraphPropsArray.length-1;t>=0;t--)candlesticksGraphPropsArray[t].CanvasID==e.CanvasID&&candlesticksGraphPropsArray[t].WindowID==e.WindowCount&&candlesticksGraphPropsArray.splice(t,1);break;case"DoughnutChart":for(t=doughnutChartPropsArray.length-1;t>=0;t--)doughnutChartPropsArray[t].CanvasID==e.CanvasID&&doughnutChartPropsArray[t].WindowID==e.WindowCount&&doughnutChartPropsArray.splice(t,1);break;case"BarsMixedWithLabeledLineGraph":for(t=barsMixedWithLabledLineGraphsPropsArray.length-1;t>=0;t--)barsMixedWithLabledLineGraphsPropsArray[t].CanvasID==e.CanvasID&&barsMixedWithLabledLineGraphsPropsArray[t].WindowID==e.WindowCount&&barsMixedWithLabledLineGraphsPropsArray.splice(t,1);break;case"StackedBarGraph":for(t=stackedBarGraphPropsArray.length-1;t>=0;t--)stackedBarGraphPropsArray[t].CanvasID==e.CanvasID&&stackedBarGraphPropsArray[t].WindowID==e.WindowCount&&stackedBarGraphPropsArray.splice(t,1);break;case"Tab":for(t=tabPropsArray.length-1;t>=0;t--)tabPropsArray[t].CanvasID==e.CanvasID&&tabPropsArray[t].WindowID==e.WindowCount&&tabPropsArray.splice(t,1);break;case"ImageMap":for(t=imageMapPropsArray.length-1;t>=0;t--)imageMapPropsArray[t].CanvasID==e.CanvasID&&imageMapPropsArray[t].WindowID==e.WindowCount&&imageMapPropsArray.splice(t,1);break;case"SubMenu":for(t=subMenuBarPropsArray.length-1;t>=0;t--)if(subMenuBarPropsArray[t].CanvasID==e.CanvasID&&subMenuBarPropsArray[t].WindowID==e.WindowCount){for(var n=0;n<subMenuBarPropsArray[t].ChildMenuWindowIDs.length;n++)destroyControl(e.CanvasID,subMenuBarPropsArray[t].ChildMenuWindowIDs[n]);subMenuBarPropsArray.splice(t,1)}break;case"MenuBar":for(t=menuBarPropsArray.length-1;t>=0;t--)if(menuBarPropsArray[t].CanvasID==e.CanvasID&&menuBarPropsArray[t].WindowID==e.WindowCount){for(n=0;n<menuBarPropsArray[t].ChildMenuWindowIDs.length;n++)destroyControl(e.CanvasID,menuBarPropsArray[t].ChildMenuWindowIDs[n]);menuBarPropsArray.splice(t,1)}break;case"TextBox":for(t=textBoxPropsArray.length-1;t>=0;t--)textBoxPropsArray[t].CanvasID==e.CanvasID&&textBoxPropsArray[t].WindowID==e.WindowCount&&textBoxPropsArray.splice(t,1);break;case"ImageFader":for(t=imageFaderPropsArray.length-1;t>=0;t--)imageFaderPropsArray[t].CanvasID==e.CanvasID&&imageFaderPropsArray[t].WindowID==e.WindowCount&&imageFaderPropsArray.splice(t,1);break;case"ImageSlider":for(t=imageSliderPropsArray.length-1;t>=0;t--)imageSliderPropsArray[t].CanvasID==e.CanvasID&&imageSliderPropsArray[t].WindowID==e.WindowCount&&imageSliderPropsArray.splice(t,1);break;case"MultiLineLabel":for(t=multiLineLabelPropsArray.length-1;t>=0;t--)multiLineLabelPropsArray[t].CanvasID==e.CanvasID&&multiLineLabelPropsArray[t].WindowID==e.WindowCount&&multiLineLabelPropsArray.splice(t,1);break;case"WordProcessor":for(t=wordProcessorPropsArray.length-1;t>=0;t--)wordProcessorPropsArray[t].CanvasID==e.CanvasID&&wordProcessorPropsArray[t].WindowID==e.WindowCount&&wordProcessorPropsArray.splice(t,1);break;case"VirtualKeyboard":for(t=virtualKeyboardPropsArray.length-1;t>=0;t--)virtualKeyboardPropsArray[t].CanvasID==e.CanvasID&&virtualKeyboardPropsArray[t].WindowID==e.WindowCount&&virtualKeyboardPropsArray.splice(t,1);break;case"Splitter":for(t=splitterPropsArray.length-1;t>=0;t--)splitterPropsArray[t].CanvasID==e.CanvasID&&splitterPropsArray[t].WindowID==e.WindowCount&&splitterPropsArray.splice(t,1)}destroyWindow(e.CanvasID,e.WindowCount)}function getWindowByControlNameID(e){for(var t=0;t<windows.length;t++)if(windows[t].ControlNameID==e)return windows[t]}var labelPropsArray=new Array;function getLabelProps(e,t){for(var a=0;a<labelPropsArray.length;a++)if(labelPropsArray[a].CanvasID==e&&labelPropsArray[a].WindowID==t)return labelPropsArray[a]}function CCLLabel(){}function createLabel(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b,H,v,m,P,y,B,L,M){if(1==I){var A=getCtx(e);A.font=d,r=A.measureText(o).width}var F=createWindow(e,a,n,r,i,h,-1,"Label",t,-1,M);new CCLLabel;return labelPropsArray.push({CanvasID:e,WindowID:F,X:a,Y:n,Width:r,Height:i,Text:o,TextHeight:s,TextFontString:d,TextColor:l,IsHyperlink:x,URL:p,NoBrowserHistory:f,IsNewBrowserWindow:T,NameOfNewBrowserWindow:D,WidthOfNewBrowserWindow:S,HeightOfNewBrowserWindow:W,NewBrowserWindowIsResizable:b,NewBrowserWindowHasScrollBars:H,NewBrowserWindowHasToolbar:v,NewBrowserWindowHasLocationOrURLOrAddressBox:m,NewBrowserWindowHasDirectoriesOrExtraButtons:P,NewBrowserWindowHasStatusBar:y,NewBrowserWindowHasMenuBar:B,NewBrowserWindowCopyHistory:L,DrawFunction:u,Alignment:g,BackGroundColor:w,Tag:C}),registerWindowDrawFunction(F,null!=u&&null!=u?function(e,t){getLabelProps(e,t).DrawFunction(e,t)}:function(){var t=getCtx(e),a=getLabelProps(e,F);t.font=a.TextFontString,a.BackGroundColor&&(t.fillStyle=a.BackGroundColor,t.beginPath(),t.rect(a.X,a.Y,a.Width,a.Height),t.fill()),t.fillStyle=a.TextColor,t.fillText(a.Text,a.X+("center"==a.Alignment?(a.Width-t.measureText(a.Text).width)/2:0),a.Y+a.Height-(a.Height-a.TextHeight)/2)},e),null!=c?registerClickFunction(F,c,e):1==x&&registerClickFunction(F,function(){if(1==T){var e="",t=0;null!=S&&(e+="width="+S,t=1),null!=W&&(e+=(1==t?",":"")+"height="+W),null!=b&&(e+=(1==t?",":"")+"resizable="+b),null!=H&&(e+=(1==t?",":"")+"scrollbars="+H),null!=v&&(e+=(1==t?",":"")+"toolbar="+v),null!=m&&(e+=(1==t?",":"")+"location="+m),null!=P&&(e+=(1==t?",":"")+"directories="+P),null!=y&&(e+=(1==t?",":"")+"status="+y),null!=B&&(e+=(1==t?",":"")+"menubar="+B),null!=L&&(e+=(1==t?",":"")+"copyhistory="+L),window.open(p,D,e)}else 1==f?window.location.replace(p):window.location.href=p},e),M>0&&registerKeyDownFunction(e,function(){},F),F}CCLLabel.prototype={CanvasID:"",ControlNameID:"l1",X:0,Y:0,Width:0,Height:0,Depth:0,Text:"Label",TextHeight:12,TextFontString:"12pt Ariel",TextColor:"#000000",AutoAdjustWidth:1,IsHyperlink:0,URL:null,NoBrowserHistory:null,IsNewBrowserWindow:null,NameOfNewBrowserWindow:null,WidthOfNewBrowserWindow:null,HeightOfNewBrowserWindow:null,NewBrowserWindowIsResizable:null,NewBrowserWindowHasScrollBars:null,NewBrowserWindowHasToolbar:null,NewBrowserWindowHasLocationOrURLOrAddressBox:null,NewBrowserWindowHasDirectoriesOrExtraButtons:null,NewBrowserWindowHasStatusBar:null,NewBrowserWindowHasMenuBar:null,NewBrowserWindowCopyHistory:null,DrawFunction:null,Alignment:null,ClickFunction:null,BackGroundColor:null,Tag:null,TabStopIndex:-1,Initialize:function(){return createLabel(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Text,this.TextColor,this.TextHeight,this.TextFontString,this.DrawFunction,this.Depth,this.Alignment,this.ClickFunction,this.BackGroundColor,this.AutoAdjustWidth,this.Tag,this.IsHyperlink,this.URL,this.NoBrowserHistory,this.IsNewBrowserWindow,this.NameOfNewBrowserWindow,this.WidthOfNewBrowserWindow,this.HeightOfNewBrowserWindow,this.NewBrowserWindowIsResizable,this.NewBrowserWindowHasScrollBars,this.NewBrowserWindowHasToolbar,this.NewBrowserWindowHasLocationOrURLOrAddressBox,this.NewBrowserWindowHasDirectoriesOrExtraButtons,this.NewBrowserWindowHasStatusBar,this.NewBrowserWindowHasMenuBar,this.NewBrowserWindowCopyHistory,this.TabStopIndex)}};var buttonPropsArray=new Array;function getButtonProps(e,t){for(var a=0;a<buttonPropsArray.length;a++)if(buttonPropsArray[a].CanvasID==e&&buttonPropsArray[a].WindowID==t)return buttonPropsArray[a]}function defaultButtonDrawFunction(e,t){var a=0,n=0,r=getCtx(e);r.save();var i=getButtonProps(e,t);if(1==i.IsPressed&&(i.IsPressed=0,a=5,n=5),1==i.Theme)r.beginPath(),r.moveTo(a+i.X,n+i.Y+i.EdgeRadius),r.arc(a+i.X+i.EdgeRadius,n+i.Y+i.EdgeRadius,i.EdgeRadius,Math.PI,Math.PI/180*270,!1),r.lineTo(a+i.X+i.Width-i.EdgeRadius,n+i.Y),r.arc(a+i.X+i.Width-i.EdgeRadius,n+i.Y+i.EdgeRadius,i.EdgeRadius,Math.PI/180*270,2*Math.PI,!1),r.lineTo(a+i.X+i.Width,n+i.Y+i.Height-i.EdgeRadius),r.arc(a+i.X+i.Width-i.EdgeRadius,n+i.Y+i.Height-i.EdgeRadius,i.EdgeRadius,0,Math.PI/2,!1),r.lineTo(a+i.X+i.EdgeRadius,n+i.Y+i.Height),r.arc(a+i.X+i.EdgeRadius,n+i.Y+i.Height-i.EdgeRadius,i.EdgeRadius,Math.PI/2,Math.PI,!1),r.closePath(),(o=r.createLinearGradient(a+i.X,n+i.Y,a+i.X,n+i.Y+i.Height)).addColorStop(0,"#536fa0"),o.addColorStop(1,"#274580"),r.fillStyle=o,r.fill(),r.strokeStyle="#1f3a73",r.stroke(),(o=r.createLinearGradient(a+i.X,n+i.Y+(i.Height-i.TextHeight)/2,a+i.X,n+i.Y-(i.Height-i.TextHeight)/2+i.Height)).addColorStop(0,"#fafbfc"),o.addColorStop(1,"#dde2ea"),r.fillStyle=o,r.shadowBlur=5,r.shadowColor="#636e7f",r.font=i.TextFontString,r.fillText(i.Text,a+i.X+(i.Width-r.measureText(i.Text).width)/2,n+i.Y+i.Height-(i.Height-i.TextHeight)/2);else if(2==i.Theme){var o;(o=r.createLinearGradient(a+i.X,n+i.Y,a+i.X,n+i.Y+i.Height)).addColorStop(0,"#7888ff"),o.addColorStop(1,"#d0d3fe"),r.shadowBlur=5,r.shadowColor=o,r.beginPath(),r.moveTo(a+i.X,n+i.Y+i.EdgeRadius),r.arc(a+i.X+i.EdgeRadius,n+i.Y+i.EdgeRadius,i.EdgeRadius,Math.PI,Math.PI/180*270,!1),r.lineTo(a+i.X+i.Width-i.EdgeRadius-5,n+i.Y),r.arc(a+i.X+i.Width-i.EdgeRadius-5,n+i.Y+i.EdgeRadius,i.EdgeRadius,Math.PI/180*270,2*Math.PI,!1),r.lineTo(a+i.X+i.Width-5,n+i.Y+i.Height-i.EdgeRadius-5),r.arc(a+i.X+i.Width-i.EdgeRadius-5,n+i.Y+i.Height-i.EdgeRadius-5,i.EdgeRadius,0,Math.PI/2,!1),r.lineTo(a+i.X+i.EdgeRadius,n+i.Y+i.Height-5),r.arc(a+i.X+i.EdgeRadius,n+i.Y+i.Height-i.EdgeRadius-5,i.EdgeRadius,Math.PI/2,Math.PI,!1),r.closePath(),(o=r.createLinearGradient(a+i.X,n+i.Y+9,a+i.X,n+i.Y+i.Height-9)).addColorStop(0,"#7a83c6"),o.addColorStop(1,"#5787dc"),r.strokeStyle=o,r.lineWidth=1,r.stroke(),r.beginPath(),r.moveTo(a+i.X+1,n+i.Y+i.EdgeRadius+1),r.arc(a+i.X+i.EdgeRadius+1,n+i.Y+i.EdgeRadius+1,i.EdgeRadius,Math.PI,Math.PI/180*270,!1),r.lineTo(a+i.X+i.Width-i.EdgeRadius-6,n+i.Y+1),r.arc(a+i.X+i.Width-i.EdgeRadius-6,n+i.Y+i.EdgeRadius+1,i.EdgeRadius,Math.PI/180*270,2*Math.PI,!1),r.lineTo(a+i.X+i.Width-6,n+i.Y+i.Height-i.EdgeRadius-6),r.arc(a+i.X+i.Width-i.EdgeRadius-6,n+i.Y+i.Height-i.EdgeRadius-6,i.EdgeRadius,0,Math.PI/2,!1),r.lineTo(a+i.X+i.EdgeRadius+1,n+i.Y+i.Height-6),r.arc(a+i.X+i.EdgeRadius+1,n+i.Y+i.Height-i.EdgeRadius-6,i.EdgeRadius,Math.PI/2,Math.PI,!1),r.closePath(),(o=r.createLinearGradient(a+i.X,n+i.Y+1,a+i.X,n+i.Y+i.Height-6)).addColorStop(0,"#a0abe9"),o.addColorStop(1,"#80b2fb"),r.strokeStyle=o,r.lineWidth=1,r.stroke(),r.beginPath(),r.moveTo(a+i.X+2,n+i.Y+i.EdgeRadius+2),r.arc(a+i.X+i.EdgeRadius+2,n+i.Y+i.EdgeRadius+2,i.EdgeRadius,Math.PI,Math.PI/180*270,!1),r.lineTo(a+i.X+i.Width-i.EdgeRadius-7,n+i.Y+2),r.arc(a+i.X+i.Width-i.EdgeRadius-7,n+i.Y+i.EdgeRadius+2,i.EdgeRadius,Math.PI/180*270,2*Math.PI,!1),r.lineTo(a+i.X+i.Width-7,n+i.Y+i.Height-i.EdgeRadius-7),r.arc(a+i.X+i.Width-i.EdgeRadius-7,n+i.Y+i.Height-i.EdgeRadius-7,i.EdgeRadius,0,Math.PI/2,!1),r.lineTo(a+i.X+i.EdgeRadius+2,n+i.Y+i.Height-7),r.arc(a+i.X+i.EdgeRadius+2,n+i.Y+i.Height-i.EdgeRadius-7,i.EdgeRadius,Math.PI/2,Math.PI,!1),r.closePath(),(o=r.createLinearGradient(a+i.X,n+i.Y+2,a+i.X,n+i.Y+i.Height-7)).addColorStop(0,"#99a4e4"),o.addColorStop(1,"#4c7ce2"),r.fillStyle=o,r.fill(),(o=r.createLinearGradient(a+i.X,n+i.Y+(i.Height-i.TextHeight)/2,a+i.X,n+i.Y-(i.Height-i.TextHeight)/2+i.Height)).addColorStop(0,"#fafbfc"),o.addColorStop(1,"#dde2ea"),r.fillStyle=o,r.shadowBlur=5,r.shadowColor="#636e7f",r.font=i.TextFontString,r.fillText(i.Text,a+i.X+(i.Width-r.measureText(i.Text).width-5)/2,n+i.Y+i.Height-5-(i.Height-i.TextHeight-5)/2)}else{r.beginPath(),r.moveTo(a+i.X,n+i.Y+i.EdgeRadius),r.arc(a+i.X+i.EdgeRadius,n+i.Y+i.EdgeRadius,i.EdgeRadius,Math.PI,Math.PI/180*270,!1),r.lineTo(a+i.X+i.Width-i.EdgeRadius,n+i.Y),r.arc(a+i.X+i.Width-i.EdgeRadius,n+i.Y+i.EdgeRadius,i.EdgeRadius,Math.PI/180*270,2*Math.PI,!1),r.lineTo(a+i.X+i.Width,n+i.Y+i.Height-i.EdgeRadius),r.arc(a+i.X+i.Width-i.EdgeRadius,n+i.Y+i.Height-i.EdgeRadius,i.EdgeRadius,0,Math.PI/2,!1),r.lineTo(a+i.X+i.EdgeRadius,n+i.Y+i.Height),r.arc(a+i.X+i.EdgeRadius,n+i.Y+i.Height-i.EdgeRadius,i.EdgeRadius,Math.PI/2,Math.PI,!1),r.closePath(),r.fillStyle=i.BorderColor,r.fill();var l=r.createLinearGradient(a+i.X,n+i.Y,a+i.X,n+i.Y+i.Height);l.addColorStop(0,i.TopColorStart),l.addColorStop(1,i.TopColorEnd),r.fillStyle=l,r.beginPath(),r.rect(a+i.X+i.EdgeRadius,n+i.Y+i.EdgeRadius,i.Width-2*i.EdgeRadius,i.Height/2-i.EdgeRadius),r.fill();var s=r.createLinearGradient(a+i.X,n+i.Y,a+i.X,n+i.Y+i.Height);s.addColorStop(0,i.BottomColorStart),s.addColorStop(1,i.BottomColorEnd),r.fillStyle=s,r.beginPath(),r.rect(a+i.X+i.EdgeRadius,n+i.Y+i.Height/2,i.Width-2*i.EdgeRadius,i.Height/2-i.EdgeRadius),r.fill(),r.font=i.TextFontString,r.fillStyle=i.TextColor,r.fillText(i.Text,a+i.X+(i.Width-r.measureText(i.Text).width)/2,n+i.Y+i.Height-(i.Height-i.TextHeight)/2)}1==i.HasGloss&&(r.beginPath(),r.moveTo(a+i.X+2,n+i.Y+i.EdgeRadius+2),r.arc(a+i.X+i.EdgeRadius+2,n+i.Y+i.EdgeRadius+2,i.EdgeRadius,Math.PI,Math.PI/180*270,!1),r.lineTo(a+i.X+i.Width-i.EdgeRadius-2,n+i.Y+2),r.arc(a+i.X+i.Width-i.EdgeRadius-2,n+i.Y+i.EdgeRadius+2,i.EdgeRadius,Math.PI/180*270,2*Math.PI,!1),r.lineTo(a+i.X+i.Width-2,n+i.Y+(i.Height-4)/2-i.EdgeRadius+2),r.arc(a+i.X+i.Width-i.EdgeRadius-2,n+i.Y+(i.Height-4)/2-i.EdgeRadius+2,i.EdgeRadius,0,Math.PI/2,!1),r.lineTo(a+i.X+i.EdgeRadius+2,n+i.Y+(i.Height-4)/2+2),r.arc(a+i.X+i.EdgeRadius+2,n+i.Y+(i.Height-4)/2-i.EdgeRadius+2,i.EdgeRadius,Math.PI/2,Math.PI,!1),r.closePath(),(o=r.createLinearGradient(a+i.X,n+i.Y+2,a+i.X,n+i.Y+(i.Height-4)/2+5)).addColorStop(0,"rgba(255,255,255,0.4)"),o.addColorStop(1,"rgba(255,255,255,0.05)"),r.fillStyle=o,r.fill());r.restore()}function CCLButton(){}function createButton(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b,H,v,m,P,y,B,L,M,A,F,X,Y,k){var R=createWindow(e,a,n,r,i,h,-1,"Button",t,-1,k);return buttonPropsArray.push({CanvasID:e,WindowID:R,X:a,Y:n,Width:r,Height:i,Text:o,EdgeRadius:u,BottomColorStart:C,BottomColorEnd:x,TopColorStart:p,TopColorEnd:f,TextHeight:s,TextFontString:d,TextColor:l,IsPressed:0,BorderColor:T,IsHyperlink:S,URL:W,NoBrowserHistory:b,IsNewBrowserWindow:H,NameOfNewBrowserWindow:v,WidthOfNewBrowserWindow:m,HeightOfNewBrowserWindow:P,NewBrowserWindowIsResizable:y,NewBrowserWindowHasScrollBars:B,NewBrowserWindowHasToolbar:L,NewBrowserWindowHasLocationOrURLOrAddressBox:M,NewBrowserWindowHasDirectoriesOrExtraButtons:A,NewBrowserWindowHasStatusBar:F,NewBrowserWindowHasMenuBar:X,NewBrowserWindowCopyHistory:Y,Tag:D,Theme:g,HasGloss:c}),registerClickFunction(R,function(){if(1==S)if(1==H){var t="",a=0;null!=m&&(t+="width="+m,a=1),null!=P&&(t+=(1==a?",":"")+"height="+P),null!=y&&(t+=(1==a?",":"")+"resizable="+y),null!=B&&(t+=(1==a?",":"")+"scrollbars="+B),null!=L&&(t+=(1==a?",":"")+"toolbar="+L),null!=M&&(t+=(1==a?",":"")+"location="+M),null!=newbroserwindowhasdirectoriesorextrabuttons&&(t+=(1==a?",":"")+"directories="+newbroserwindowhasdirectoriesorextrabuttons),null!=F&&(t+=(1==a?",":"")+"status="+F),null!=X&&(t+=(1==a?",":"")+"menubar="+X),null!=Y&&(t+=(1==a?",":"")+"copyhistory="+Y),window.open(W,-1==navigator.userAgent.toLowerCase().indexOf("msie")?v:v.replace(/ /g,""),t)}else 1==b?window.location.replace(W):window.location.href=W;else getButtonProps(e,R).IsPressed=0,w(e,R)},e),registerMouseDownFunction(R,function(e,t){getButtonProps(e,t).IsPressed=1},e),registerMouseUpFunction(e,function(e,t){getButtonProps(e,t).IsPressed=0},e),registerWindowDrawFunction(R,null!=I&&null!=I?function(){I(e,R)}:function(){defaultButtonDrawFunction(e,R)},e),k>0&&registerKeyDownFunction(e,function(){},R),R}CCLButton.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Text:null,EdgeRadius:null,BottomColorStart:null,BottomColorEnd:null,TopColorStart:null,TopColorEnd:null,TextHeight:null,TextFontString:null,TextColor:null,IsPressed:0,BorderColor:null,IsHyperlink:null,URL:null,NoBrowserHistory:null,IsNewBrowserWindow:null,NameOfNewBrowserWindow:null,WidthOfNewBrowserWindow:null,HeightOfNewBrowserWindow:null,NewBrowserWindowIsResizable:null,NewBrowserWindowHasScrollBars:null,NewBrowserWindowHasToolbar:null,NewBrowserWindowHasLocationOrURLOrAddressBox:null,NewBrowserWindowHasDirectoriesOrExtraButtons:null,NewBrowserWindowHasStatusBar:null,NewBrowserWindowHasMenuBar:null,NewBrowserWindowCopyHistory:null,Tag:null,Theme:null,HasGloss:null,ControlNameID:null,Depth:null,ClickFunction:null,DrawFunction:null,TabStopIndex:-1,Initialize:function(){return createButton(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Text,this.TextColor,this.TextHeight,this.TextFontString,this.EdgeRadius,this.Depth,this.Theme,this.HasGloss,this.ClickFunction,this.DrawFunction,this.BottomColorStart,this.BottomColorEnd,this.TopColorStart,this.TopColorEnd,this.BorderColor,this.Tag,this.IsHyperlink,this.URL,this.NoBrowserHistory,this.IsNewBrowserWindow,this.NameOfNewBrowserWindow,this.WidthOfNewBrowserWindow,this.HeightOfNewBrowserWindow,this.NewBrowserWindowIsResizable,this.NewBrowserWindowHasScrollBars,this.NewBrowserWindowHasToolbar,this.NewBrowserWindowHasLocationOrURLOrAddressBox,this.NewBrowserWindowHasDirectoriesOrExtraButtons,this.NewBrowserWindowHasStatusBar,this.NewBrowserWindowHasMenuBar,this.NewBrowserWindowCopyHistory,this.TabStopIndex)}};var scrollBarPropsArray=new Array;function getScrollBarProps(e,t){for(var a=0;a<scrollBarPropsArray.length;a++)if(scrollBarPropsArray[a].CanvasID==e&&scrollBarPropsArray[a].WindowID==t)return scrollBarPropsArray[a]}function drawScrollBar(e,t){var a,n=getScrollBarProps(e,t),r=n.X,i=n.Y,o=n.Len,l=0==n.MaxItems?1:n.MaxItems,s=n.SelectedID,d=getCtx(e);1==n.Alignment?(d.clearRect(n.X,n.Y,15,n.Len),(a=d.createLinearGradient(r,i,r+15,i)).addColorStop(0,"#e3e3e3"),a.addColorStop(.5,"#ededed"),a.addColorStop(1,"#e5e5e5"),d.fillStyle=a,d.beginPath(),d.rect(r,i,15,o),d.fill(),d.lineCap="butt",d.strokeStyle="#3c7fb1",d.beginPath(),d.rect(r,i,15,15),d.stroke(),d.fillStyle="#dcf0fb",d.beginPath(),d.rect(r+1,i+1,6,13),d.fill(),d.fillStyle="#a7d8f3",d.beginPath(),d.rect(r+8,i+1,6,13),d.fill(),d.strokeStyle="#c0e4f8",d.beginPath(),d.moveTo(r+7,i+1),d.lineTo(r+7,i+14),d.stroke(),(a=d.createLinearGradient(r+7,i+6,r+7,i+10)).addColorStop(0,"#4e9ac4"),a.addColorStop(1,"#0d2a3a"),d.fillStyle=a,d.beginPath(),d.moveTo(r+8,i+6),d.lineTo(r+11,i+10),d.lineTo(r+4,i+10),d.closePath(),d.fill(),d.lineCap="butt",d.strokeStyle="#3c7fb1",d.beginPath(),d.rect(r,i+o-15,15,15),d.stroke(),d.fillStyle="#dcf0fb",d.beginPath(),d.rect(r+1,i+o-15+1,6,13),d.fill(),d.fillStyle="#a7d8f3",d.beginPath(),d.rect(r+8,i+o-15+1,6,13),d.fill(),d.strokeStyle="#c0e4f8",d.beginPath(),d.moveTo(r+7,i+o-15+1),d.lineTo(r+7,i+o-15+14),d.stroke(),(a=d.createLinearGradient(r+7,i+o-15+6,r+7,i+o-15+10)).addColorStop(0,"#0d2a3a"),a.addColorStop(1,"#4e9ac4"),d.fillStyle=a,d.beginPath(),d.moveTo(r+4,i+o-15+6),d.lineTo(r+11,i+o-15+6),d.lineTo(r+7,i+o-15+10),d.closePath(),d.fill(),d.lineWidth=1,d.strokeStyle="#15598a",d.beginPath(),d.rect(r,i+s*(o-55)/l+16,15,25),d.stroke(),d.fillStyle="#6ac1e5",d.beginPath(),d.rect(r+8,i+s*(o-55)/l+16+1,6,23),d.fill(),d.fillStyle="#b7e4f7",d.beginPath(),d.rect(r+1,i+s*(o-55)/l+16+1,6,23),d.fill(),d.strokeStyle="#8fd5f3",d.beginPath(),d.moveTo(r+8,i+s*(o-55)/l+16+1),d.lineTo(r+8,i+s*(o-55)/l+16+22),d.stroke(),(a=d.createLinearGradient(r+4,i+s*(o-55)/l+16+8,r+10,i+s*(o-55)/l+16+8)).addColorStop(0,"#2b404b"),a.addColorStop(1,"#5888a1"),d.strokeStyle=a,d.beginPath(),d.moveTo(r+4,i+s*(o-55)/l+16+8),d.lineTo(r+10,i+s*(o-55)/l+16+8),d.stroke(),d.beginPath(),d.moveTo(r+4,i+s*(o-55)/l+16+11),d.lineTo(r+10,i+s*(o-55)/l+16+11),d.stroke(),d.beginPath(),d.moveTo(r+4,i+s*(o-55)/l+16+14),d.lineTo(r+10,i+s*(o-55)/l+16+14),d.stroke(),(a=d.createLinearGradient(r+4,i+s*(o-55)/l+16+8,r+10,i+s*(o-55)/l+16+8)).addColorStop(0,"#447791"),a.addColorStop(1,"#96bed3"),d.strokeStyle=a,d.beginPath(),d.moveTo(r+4,i+s*(o-55)/l+16+9),d.lineTo(r+10,i+s*(o-55)/l+16+9),d.stroke(),d.beginPath(),d.moveTo(r+4,i+s*(o-55)/l+16+12),d.lineTo(r+10,i+s*(o-55)/l+16+12),d.stroke(),d.beginPath(),d.moveTo(r+4,i+s*(o-55)/l+16+15),d.lineTo(r+10,i+s*(o-55)/l+16+15),d.stroke()):(d.clearRect(n.X,n.Y,n.Len,15),(a=d.createLinearGradient(r,i,r,i+15)).addColorStop(0,"#e3e3e3"),a.addColorStop(.5,"#ededed"),a.addColorStop(1,"#e5e5e5"),d.fillStyle=a,d.beginPath(),d.rect(r,i,o,15),d.fill(),d.lineCap="butt",d.strokeStyle="#3c7fb1",d.beginPath(),d.rect(r,i,15,15),d.stroke(),d.fillStyle="#dcf0fb",d.beginPath(),d.rect(r+1,i+1,13,6),d.fill(),d.fillStyle="#a7d8f3",d.beginPath(),d.rect(r+1,i+8,13,6),d.fill(),d.strokeStyle="#c0e4f8",d.beginPath(),d.moveTo(r+1,i+7),d.lineTo(r+14,i+7),d.stroke(),(a=d.createLinearGradient(r+6,i+7,r+10,i+7)).addColorStop(0,"#4e9ac4"),a.addColorStop(1,"#0d2a3a"),d.fillStyle=a,d.beginPath(),d.moveTo(r+6,i+8),d.lineTo(r+10,i+11),d.lineTo(r+10,i+4),d.closePath(),d.fill(),d.lineCap="butt",d.strokeStyle="#3c7fb1",d.beginPath(),d.rect(r+o-15,i,15,15),d.stroke(),d.fillStyle="#dcf0fb",d.beginPath(),d.rect(r+o-15+1,i,13,6),d.fill(),d.fillStyle="#a7d8f3",d.beginPath(),d.rect(r+o-15+1,i+8,13,6),d.fill(),d.strokeStyle="#c0e4f8",d.beginPath(),d.moveTo(r+o-15+1,i+7),d.lineTo(r+o-1,i+7),d.stroke(),(a=d.createLinearGradient(r+o-15+6,i+7,r+o-15+10,i+7)).addColorStop(0,"#0d2a3a"),a.addColorStop(1,"#4e9ac4"),d.fillStyle=a,d.beginPath(),d.moveTo(r+o-15+6,i+4),d.lineTo(r+o-15+10,i+8),d.lineTo(r+o-15+6,i+11),d.closePath(),d.fill(),d.lineWidth=1,d.strokeStyle="#15598a",d.beginPath(),d.rect(r+s*(o-55)/l+16,i,25,15),d.stroke(),d.fillStyle="#6ac1e5",d.beginPath(),d.rect(r+s*(o-55)/l+16+1,i+8,23,6),d.fill(),d.fillStyle="#b7e4f7",d.beginPath(),d.rect(r+s*(o-55)/l+16+1,i+1,23,6),d.fill(),d.strokeStyle="#8fd5f3",d.beginPath(),d.moveTo(r+s*(o-55)/l+16+1,i+8),d.lineTo(r+s*(o-55)/l+16+22,i+8),d.stroke(),(a=d.createLinearGradient(r+s*(o-55)/l+16+8,i+4,r+s*(o-55)/l+16+8,i+10)).addColorStop(0,"#2b404b"),a.addColorStop(1,"#5888a1"),d.strokeStyle=a,d.beginPath(),d.moveTo(r+s*(o-55)/l+16+8,i+4),d.lineTo(r+s*(o-55)/l+16+8,i+10),d.stroke(),d.beginPath(),d.moveTo(r+s*(o-55)/l+16+11,i+4),d.lineTo(r+s*(o-55)/l+16+11,i+10),d.stroke(),d.beginPath(),d.moveTo(r+s*(o-55)/l+16+14,i+4),d.lineTo(r+s*(o-55)/l+16+14,i+10),d.stroke(),(a=d.createLinearGradient(r+s*(o-55)/l+16+8,i+4,r+s*(o-55)/l+16+8,i+10)).addColorStop(0,"#447791"),a.addColorStop(1,"#96bed3"),d.strokeStyle=a,d.beginPath(),d.moveTo(r+s*(o-55)/l+16+9,i+4),d.lineTo(r+s*(o-55)/l+16+9,i+10),d.stroke(),d.beginPath(),d.moveTo(r+s*(o-55)/l+16+12,i+4),d.lineTo(r+s*(o-55)/l+16+12,i+10),d.stroke(),d.beginPath(),d.moveTo(r+s*(o-55)/l+16+15,i+4),d.lineTo(r+s*(o-55)/l+16+15,i+10),d.stroke())}function scrollBarClick(e,t,a){var n=getScrollBarProps(e,t),r=a.calcX,i=a.calcY;1==n.Alignment?r>n.X&&r<n.X+15&&i>n.Y&&i<n.Y+15&&n.SelectedID-1>=0?(n.CustomIncrementFunction&&n.CustomIncrementFunction(getSelectedTag(n.CanvasID,n.WindowID),n,0),--n.SelectedID):r>n.X&&r<n.X+15&&i>n.Y+n.Len-15&&i<n.Y+n.Len&&n.SelectedID+1<n.MaxItems&&(n.CustomIncrementFunction&&n.CustomIncrementFunction(getSelectedTag(n.CanvasID,n.WindowID),n,1),++n.SelectedID):r>n.X&&r<n.X+15&&i>n.Y&&i<n.Y+15&&n.SelectedID-1>=0?(n.CustomIncrementFunction&&n.CustomIncrementFunction(getSelectedTag(n.CanvasID,n.WindowID),n,0),--n.SelectedID):r>n.X+n.Len-15&&r<n.X+n.Len&&i>n.Y&&i<n.Y+15&&n.SelectedID+1<n.MaxItems&&(n.CustomIncrementFunction&&n.CustomIncrementFunction(getSelectedTag(n.CanvasID,n.WindowID),n,1),++n.SelectedID);var o=getWindowProps(e,n.OwnedByWindowID);o&&invalidateRect(e,-1,o.X,o.Y,o.Width,o.Height)}function scrollBarMouseDown(e,t,a){var n=getScrollBarProps(e,t),r=a.calcX,i=a.calcY;1==n.Alignment?r>n.X&&r<n.X+15&&i>n.Y+n.SelectedID*(n.Len-55)/n.MaxItems+16&&i<n.Y+n.SelectedID*(n.Len-55)/n.MaxItems+16+25&&(n.MouseDownState=1):i>n.Y&&i<n.Y+15&&r>n.X+n.SelectedID*(n.Len-55)/n.MaxItems+16&&r<n.X+n.SelectedID*(n.Len-55)/n.MaxItems+16+25&&(n.MouseDownState=1)}function scrollBarMouseMove(e,t,a){var n=getScrollBarProps(e,t),r=n.SelectedID;if(1==n.MouseDownState){if(1==n.Alignment){var i=a.calcY;i<n.Y?n.SelectedID=1:i>n.Y+n.Len?n.SelectedID=n.MaxItems:n.SelectedID=Math.floor((i-n.Y)*n.MaxItems/n.Len)}else{var o=a.calcX;o<n.X?n.SelectedID=1:o>n.X+n.Len?n.SelectedID=n.MaxItems:n.SelectedID=Math.floor((o-n.X)*n.MaxItems/n.Len)}null!=n.CustomMouseMoveFunction&&n.CustomMouseMoveFunction(n,n.SelectedID)}if(n.SelectedID!=r){var l=getWindowProps(e,n.OwnedByWindowID);l&&invalidateRect(e,-1,l.X,l.Y,l.Width,l.Height)}}function scrollBarMouseUp(e,t){getScrollBarProps(e,t).MouseDownState=0}function scrollBarLostFocus(e,t){getScrollBarProps(e,t).MouseDownState=0}var scrollbarSelectedTags=new Array;function setSelectedTag(e,t,a){for(var n=0,r=0;r<scrollbarSelectedTags.length;r++)if(scrollbarSelectedTags[r][0]==e&&scrollbarSelectedTags[r][1]==t){n=1,scrollbarSelectedTags[r][2]=a;break}0==n&&scrollbarSelectedTags.push([e,t,a])}function getSelectedTag(e,t){for(var a=0;a<scrollbarSelectedTags.length;a++)if(scrollbarSelectedTags[a][0]==e&&scrollbarSelectedTags[a][1]==t)return scrollbarSelectedTags[a][2]}function CCLScrollbar(){}function createScrollBar(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C){var x;return x=1==l?createWindow(e,a,n,15,r,i,-1,"ScrollBar",t,I,C):createWindow(e,a,n,r,15,i,-1,"ScrollBar",t,I,C),scrollBarPropsArray.push({CanvasID:e,WindowID:x,X:a,Y:n,Len:r,SelectedID:0,MaxItems:o,Alignment:l,MouseDownState:0,Tag:h,OwnedByWindowID:s,DrawFunction:d,CustomIncrementFunction:g,CustomMouseMoveFunction:w}),registerClickFunction(x,null==u?scrollBarClick:u,e),registerWindowDrawFunction(x,null==d?function(){drawScrollBar(e,x)}:function(){d(e,x)},e),registerMouseDownFunction(x,scrollBarMouseDown,e),registerMouseMoveFunction(x,scrollBarMouseMove,e),registerMouseUpFunction(x,scrollBarMouseUp,e),registerLostFocusFunction(e,x,scrollBarLostFocus),x}CCLScrollbar.prototype={CanvasID:null,WindowID:null,X:null,Y:null,Len:null,SelectedID:null,MaxItems:null,Alignment:null,MouseDownState:null,Tag:null,OwnedByWindowID:null,DrawFunction:null,CustomIncrementFunction:null,CustomMouseMoveFunction:null,ControlNameID:null,Depth:null,ClickFunction:null,SelectedTag:null,TabStopIndex:-1,Initialize:function(){return createScrollBar(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Len,this.Depth,this.MaxItems,this.Alignment,this.OwnedByWindowID,this.DrawFunction,this.ClickFunction,this.Tag,this.CustomIncrementFunction,this.SelectedTag,this.CustomMouseMoveFunction,this.TabStopIndex)}};var gridPropsArray=new Array;function getGridProps(e,t){for(var a=0;a<gridPropsArray.length;a++)if(gridPropsArray[a].CanvasID==e&&gridPropsArray[a].WindowID==t)return gridPropsArray[a]}function CCLGrid(){}function createGrid(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b,H,v,m,P,y,B,L,M,A,F,X,Y,k,R,E,N,G,V,O,U,K,z,j){for(var J=createWindow(e,a,n,r,i,o,-1,"Grid",t,-1,j),Z=0,_=0;_<T.length;_++)Z+=T[_];var Q=null;f+p*l.length>i&&(Q=createScrollBar(e,t+"VS",a+r,n,i,o,l.length,1,J));var $=null;return Z>r&&($=createScrollBar(e,t+"HS",a,n+i,r,o,T.length,0,J)),gridPropsArray.push({CanvasID:e,WindowID:J,X:a,Y:n,Width:r,Height:i,RowData:l,HeaderData:s,RowDataTextColor:d,RowDataTextFontString:h,HeaderDataTextColor:g,HeaderDataTextHeight:c,HeaderDataTextFontString:w,DataRowHeight:p,ColumnWidthArray:T,HeaderRowHeight:f,HasBorder:D,BorderColor:S,BorderLineWidth:W,VScrollBarWindowId:Q,HScrollBarWindowId:$,HeaderBackgroundStartColor:b,HeaderBackgroundEndColor:H,AltRowBgColorStart1:v,AltRowBgColorEnd1:m,AltRowBgColorStart2:P,AltRowBgColorEnd2:y,Tag:B,HasSelectedRow:L,SelectedRowBgColor:M,HasSelectedCell:A,SelectedCellBgColor:F,SelectedRow:-1,SelectedCell:-1,HasSorting:X,SortableColumnsArray:Y,HasSortImages:k,SortImageURLsArray:R,SortImageShowIndex:E,SortedData:l,CustomSortFunction:N,HasFilters:O,FilterColumnsArray:U,HasFilterImageIcon:K,FilterImageIcon:z,FilteredData:l,SortClickExtents:new Array,HasUIDs:G,OrigUIDs:V,SortedUIDs:V,DrawHeaderCellFunction:C,DrawRowDataCellFunction:I,RowDataTextHeight:u}),1==X&&0==checkIfAllUnsorted(getGridProps(e,J))&&(null!=N?N(getGridProps(e,J)):sortGridData(getGridProps(e,J))),registerWindowDrawFunction(J,drawGrid,e),registerClickFunction(J,clickGrid,e),j>0&&registerKeyDownFunction(e,function(){},J),J}function drawGrid(e,t){var a=getGridProps(e,t),n=getScrollBarProps(e,a.VScrollBarWindowId),r=getScrollBarProps(e,a.HScrollBarWindowId),i=getCtx(e),o=0;null!=n&&(o=n.SelectedID);var l=0;null!=r&&(l=r.SelectedID);var s=0;a.SortClickExtents=new Array;for(var d=l;d<a.ColumnWidthArray.length&&!(s>=a.Width);d++){s+=a.ColumnWidthArray[d];var u=i.createLinearGradient(a.X+s-a.ColumnWidthArray[d],a.Y,a.X+s-a.ColumnWidthArray[d],a.Y+a.HeaderRowHeight);u.addColorStop(0,a.HeaderBackgroundStartColor),u.addColorStop(1,a.HeaderBackgroundEndColor),i.fillStyle=u,i.beginPath(),i.rect(a.X+s-a.ColumnWidthArray[d],a.Y,s>a.Width?a.ColumnWidthArray[d]+a.Width-s:a.ColumnWidthArray[d],a.HeaderRowHeight),i.fill(),i.save(),i.beginPath(),i.rect(a.X+s-a.ColumnWidthArray[d],a.Y,s>a.Width?a.ColumnWidthArray[d]+a.Width-s:a.ColumnWidthArray[d],a.HeaderRowHeight),i.clip(),i.fillStyle=a.HeaderDataTextColor,i.font=a.HeaderDataTextFontString,i.fillText(a.HeaderData[d],a.X+s-a.ColumnWidthArray[d],a.Y+a.HeaderRowHeight-(a.HeaderRowHeight-a.HeaderDataTextHeight)/2),i.restore(),1==a.HasBorder&&(i.strokeStyle=a.BorderColor,i.lineWidth=a.BorderLineWidth,i.beginPath(),i.rect(a.X+s-a.ColumnWidthArray[d],a.Y,a.ColumnWidthArray[d]+a.Width-s,a.HeaderRowHeight),i.stroke());var h=getGridSortedColumnIndex(a,d);if(1==a.HasSorting&&h>-1){var g=a.Y+(a.HeaderRowHeight-9)/2;"Ascending"==a.SortableColumnsArray[h][2]?(i.strokeStyle="#FFFFFF",i.beginPath(),i.moveTo(a.X+s-6,g+3),i.lineTo(a.X+s-6,g+12),i.lineTo(a.X+s-9,g+9),i.moveTo(a.X+s-2,g+9),i.lineTo(a.X+s-6,g+12),i.stroke(),a.SortClickExtents.push([d,a.X+s-9,g+3,7,9])):"Descending"==a.SortableColumnsArray[h][2]?(i.strokeStyle="#FFFFFF",i.beginPath(),i.moveTo(a.X+s-6,g+12),i.lineTo(a.X+s-6,g+3),i.lineTo(a.X+s-9,g+5),i.moveTo(a.X+s-2,g+5),i.lineTo(a.X+s-6,g+3),i.stroke(),a.SortClickExtents.push([d,a.X+s-9,g+3,7,9])):"Unsorted"==a.SortableColumnsArray[h][2]&&(i.strokeStyle="#FFFFFF",i.beginPath(),i.rect(a.X+s-11,g+3,9,9),i.stroke(),a.SortClickExtents.push([d,a.X+s-11,g+3,9,9]))}}for(var c=0,w=o;w<(1==a.HasSorting?a.SortedData.length:a.RowData.length)&&!((w-o)*a.DataRowHeight+a.HeaderRowHeight>=a.Height);w++){for(s=0,d=l;d<a.ColumnWidthArray.length&&!(s>=a.Width);d++){s+=a.ColumnWidthArray[d],i.save(),i.beginPath(),i.rect(a.X+s-a.ColumnWidthArray[d],a.Y+(w-o)*a.DataRowHeight+a.HeaderRowHeight,s>a.Width?a.ColumnWidthArray[d]+a.Width-s:a.ColumnWidthArray[d],a.DataRowHeight),i.clip();var I=i.createLinearGradient(a.X+s-a.ColumnWidthArray[d],a.Y+(w-o)*a.DataRowHeight+a.HeaderRowHeight,a.X+s-a.ColumnWidthArray[d],a.Y+(w-o)*a.DataRowHeight+a.HeaderRowHeight+a.DataRowHeight);0==c?(I.addColorStop(0,a.AltRowBgColorStart1),I.addColorStop(1,a.AltRowBgColorEnd1)):(I.addColorStop(0,a.AltRowBgColorStart2),I.addColorStop(1,a.AltRowBgColorEnd2)),i.fillStyle=I,i.beginPath(),i.rect(a.X+s-a.ColumnWidthArray[d],a.Y+(w-o)*a.DataRowHeight+a.HeaderRowHeight,s>a.Width?a.ColumnWidthArray[d]+a.Width-s:a.ColumnWidthArray[d],a.DataRowHeight),i.fill(),1==a.HasSelectedRow&&a.SelectedRowBgColor&&w==a.SelectedRow&&(i.fillStyle=a.SelectedRowBgColor,i.beginPath(),i.rect(a.X+s-a.ColumnWidthArray[d],a.Y+(w-o)*a.DataRowHeight+a.HeaderRowHeight,s>a.Width?a.ColumnWidthArray[d]+a.Width-s:a.ColumnWidthArray[d],a.DataRowHeight),i.fill()),1==a.HasSelectedCell&&a.SelectedCellBgColor&&d==a.SelectedCell&&(i.fillStyle=a.SelectedCellBgColor,i.beginPath(),i.rect(a.X+s-a.ColumnWidthArray[d],a.Y+(w-o)*a.DataRowHeight-(a.DataRowHeight-a.HeaderDataTextHeight)/2+a.HeaderRowHeight+a.DataRowHeight,a.ColumnWidthArray[d],a.DataRowHeight),i.fill()),i.beginPath(),(1==a.HasSorting?a.SortedData:a.RowData)[w][d]&&(i.fillStyle=a.RowDataTextColor,i.font=a.RowDataTextFontString,i.fillText((1==a.HasSorting?a.SortedData:a.RowData)[w][d],a.X+s-a.ColumnWidthArray[d],a.Y+(w-o)*a.DataRowHeight-(a.DataRowHeight-a.HeaderDataTextHeight)/2+a.HeaderRowHeight+a.DataRowHeight)),i.restore(),1==a.HasBorder&&(i.strokeStyle=a.BorderColor,i.lineWidth=a.BorderLineWidth,i.beginPath(),i.rect(a.X+s-a.ColumnWidthArray[d],a.Y+(w-o)*a.DataRowHeight+a.HeaderRowHeight,a.ColumnWidthArray[d]+a.Width-s,a.DataRowHeight),i.stroke())}c=1==c?0:1}}function clickGrid(e,t,a){var n=getGridProps(e,t),r=getScrollBarProps(e,n.VScrollBarWindowId),i=getScrollBarProps(e,n.HScrollBarWindowId),o=a.calcX,l=a.calcY,s=0;null!=r&&(s=r.SelectedID);var d=0;null!=i&&(d=i.SelectedID);for(var u=s;u<n.RowData.length&&!((u-s)*n.DataRowHeight+n.HeaderRowHeight>=n.Height);u++)for(var h=0,g=d;g<n.ColumnWidthArray.length&&!(h>=n.Width);g++)if(h+=n.ColumnWidthArray[g],o>n.X+h-n.ColumnWidthArray[g]&&l>n.Y+(u-s)*n.DataRowHeight+n.HeaderRowHeight&&o<n.X+h-n.ColumnWidthArray[g]+(h>n.Width?n.ColumnWidthArray[g]+n.Width-h:n.ColumnWidthArray[g])&&l<n.DataRowHeight+n.Y+(u-s)*n.DataRowHeight+n.HeaderRowHeight)return n.SelectedRow=u,n.SelectedCell=g,void(n.CellClickFunction&&n.CellClickFunction(e,t,g+1,u+1));var c=0;if(1==n.HasSorting)for(var w=0;w<n.SortClickExtents.length;w++)if(o>n.SortClickExtents[w][1]&&o<n.SortClickExtents[w][1]+n.SortClickExtents[w][3]&&l>n.SortClickExtents[w][2]&&l<n.SortClickExtents[w][2]+n.SortClickExtents[w][4])for(var I=0;I<n.SortableColumnsArray.length;I++)n.SortableColumnsArray[I][0]==n.SortClickExtents[w][0]&&("Unsorted"==n.SortableColumnsArray[I][2]?(n.SortableColumnsArray[I][2]="Ascending",c=1):"Ascending"==n.SortableColumnsArray[I][2]?(n.SortableColumnsArray[I][2]="Descending",c=1):(n.SortableColumnsArray[I][2]="Descending")&&(n.SortableColumnsArray[I][2]="Unsorted",c=1));1==c&&(null!=n.CustomSortFunction?n.CustomSortFunction(n):sortGridData(n),invalidateRect(n.CanvasID,-1,n.X,n.Y,n.Width,n.Height))}function getGridSortedColumnIndex(e,t){if(e.SortableColumnsArray)for(var a=0;a<e.SortableColumnsArray.length;a++)if(e.SortableColumnsArray[a][0]==t)return a;return-1}function checkIfAllUnsorted(e){for(var t=0;t<e.SortableColumnsArray.length;t++)if("Unsorted"!=e.SortableColumnsArray[t][2])return 0;return 1}function sortGridData(e){if(e.SortedData&&e.SortedData.length>1&&0==checkIfAllUnsorted(e)){var t=new Array,a=new Array;t.push(e.SortedData[0]),1==e.HasUIDs&&a.push(e.SortedUIDs[0]);for(var n=1;n<e.SortedData.length;n++){for(var r=t.length,i=0;i<t.length;i++){for(var o=1,l=0;l<e.SortedData[n].length;l++){var s,d=getGridSortedColumnIndex(e,l);if(d>-1)if("Alphabetical"==e.SortableColumnsArray[d][1]&&"Unsorted"!=e.SortableColumnsArray[d][2])"Alphabetical"==e.SortableColumnsArray[d][1]?s=e.SortedData[n][l]&&t[i][l]?e.SortedData[n][l].localeCompare(t[i][l]):e.SortedData[n][l]&&!t[i][l]?1:e.SortedData[n][l]||t[i][l]?-1:0:"Numerical"!=e.SortableColumnsArray[d][1]&&"Date"!=e.SortableColumnsArray[d][1]||(s=e.SortedData[n][l]&&t[i][l]?Number(e.SortedData[n][l])>Number(t[i][l])?1:Number(e.SortedData[n][l])<Number(t[i][l])?-1:0:e.SortedData[n][l]||t[i][l]?e.SortedData[n][l]&&!t[i][l]?1:-1:0),"Ascending"==e.SortableColumnsArray[d][2]&&(1==s?s=-1:(s=-1)&&(s=1)),s<=o&&(o=s)}if(1==o){r=i;break}r=i+1}t.splice(r,0,e.SortedData[n]),1==e.HasUIDs&&a.splice(r,0,e.SortedUIDs[n])}e.SortedData=t,1==e.HasUIDs&&(e.SortedUIDs=a)}else e.SortedData=e.RowData,1==e.HasUIDs&&(e.SortedUIDs=e.OrigUIDs)}CCLGrid.prototype={CanvasID:null,WindowID:null,X:null,Y:null,Width:null,Height:null,RowData:null,HeaderData:null,RowDataTextColor:null,RowDataTextFontString:null,HeaderDataTextColor:null,HeaderDataTextHeight:null,HeaderDataTextFontString:null,CellClickFunction:null,DataRowHeight:null,ColumnWidthArray:null,HeaderRowHeight:null,HasBorder:null,BorderColor:null,BorderLineWidth:null,VScrollBarWindowId:null,HScrollBarWindowId:null,HeaderBackgroundStartColor:null,HeaderBackgroundEndColor:null,AltRowBgColorStart1:null,AltRowBgColorEnd1:null,AltRowBgColorStart2:null,AltRowBgColorEnd2:null,Tag:null,HasSelectedRow:null,SelectedRowBgColor:null,HasSelectedCell:null,SelectedCellBgColor:null,SelectedRow:null,SelectedCell:null,HasSorting:null,SortableColumnsArray:null,HasSortImages:null,SortImageURLsArray:null,SortImageShowIndex:null,SortedData:null,CustomSortFunction:null,HasFilters:null,FilterColumnsArray:null,HasFilterImageIcon:null,FilterImageIcon:null,FilteredData:null,SortClickExtents:null,HasUIDs:null,UIDs:null,ControlNameID:null,DrawHeaderCellFunction:null,DrawRowDataCellFunction:null,RowDataTextHeight:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createGrid(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.RowData,this.HeaderData,this.RowDataTextColor,this.RowDataTextHeight,this.RowDataTextFontString,this.HeaderDataTextColor,this.HeaderDataTextHeight,this.HeaderDataTextFontString,this.DrawRowDataCellFunction,this.DrawHeaderCellFunction,this.CellClickFunction,this.DataRowHeight,this.HeaderRowHeight,this.ColumnWidthArray,this.HasBorder,this.BorderColor,this.BorderLineWidth,this.HeaderBackgroundStartColor,this.HeaderBackgroundEndColor,this.AltRowBgColorStart1,this.AltRowBgColorEnd1,this.AltRowBgColorStart2,this.AltRowBgColorEnd2,this.Tag,this.HasSelectedRow,this.SelectedRowBgColor,this.HasSelectedCell,this.SelectedCellBgColor,this.HasSorting,this.SortableColumnsArray,this.HasSortImages,this.SortImageURLsArray,this.SortImageShowIndex,this.CustomSortFunction,this.HasUIDs,this.UIDs,this.HasFilters,this.FilterColumnsArray,this.HasFilterImageIcon,this.FilterImageIcon,this.TabStopIndex)}};var comboboxPropsArray=new Array;function getComboboxPropsByTextAreaWindowId(e,t){for(var a=0;a<comboboxPropsArray.length;a++)if(comboboxPropsArray[a].CanvasID==e&&comboboxPropsArray[a].TextAreaWindowID==t)return comboboxPropsArray[a]}function getComboboxPropsByButtonWindowId(e,t){for(var a=0;a<comboboxPropsArray.length;a++)if(comboboxPropsArray[a].CanvasID==e&&comboboxPropsArray[a].ButtonWindowID==t)return comboboxPropsArray[a]}function getComboboxPropsByListAreaWindowId(e,t){for(var a=0;a<comboboxPropsArray.length;a++)if(comboboxPropsArray[a].CanvasID==e&&comboboxPropsArray[a].ListAreaWindowID==t)return comboboxPropsArray[a]}function getComboboxPropsByScrollBarWindowId(e,t){for(var a=0;a<comboboxPropsArray.length;a++)if(comboboxPropsArray[a].CanvasID==e&&comboboxPropsArray[a].VScrollBarWindowID==t)return comboboxPropsArray[a]}function CCLCombobox(){}function createComboBox(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D){var S=createWindow(e,a,n,r-i,i,o,-1,"ComboBoxTextArea",t+"ComboBoxTextArea",-1,D),W=createWindow(e,a+r-i,n,i,i,o,-1,"ComboBoxButton",t+"ComboBoxButton",S,D),b=createWindow(e,a,n+i,r-15,100,o,-1,"ComboBoxListArea",t+"ComboBoxListArea",S,D),H=createScrollBar(e,t+"VS",a+r-15,n+i,100,o,l.length,1,b,function(){drawComboboxScrollBar(e,H)},null,S,D);return comboboxPropsArray.push({CanvasID:e,WindowID:S,TextAreaWindowID:S,ButtonWindowID:W,ListAreaWindowID:b,VScrollBarWindowID:H,X:a,Y:n,Width:r,Height:i,Data:l,SelectedID:0,TextAreaTextColor:c,TextAreaTextHeight:w,TextAreaFontString:I,ListAreaTextColor:C,ListAreaTextHeight:x,ListAreaFontString:p,OnSelectionChanged:f,Tag:T,DrawListAreaFunction:u,ListAreaClickFunction:g,ButtonClickFunction:h,DrawButtonFunction:d,DrawTextAreaFunction:s}),registerWindowDrawFunction(S,null!=s?function(){s(e,S)}:function(){drawComboboxTextArea(e,S)},e),registerWindowDrawFunction(W,null!=d?function(){d(e,W)}:function(){drawComboboxButton(e,W)},e),registerWindowDrawFunction(b,null!=u?function(){u(e,b)}:function(){drawComboboxListArea(e,b)},e),registerClickFunction(W,null!=h?h:comboboxButtonClick,e),registerClickFunction(b,null!=g?g:comboboxListAreaClick,e),registerModalWindow(e,b),registerHiddenWindow(e,b,1),registerModalWindow(e,H),registerHiddenWindow(e,H,1),registerLostFocusFunction(e,b,function(){comboboxListAreaLostFocus(e,b)}),registerLostFocusFunction(e,S,function(){comboboxTextAreaLostFocus(e,S)}),registerLostFocusFunction(e,H,function(){comboboxScrollBarLostFocus(e,H)}),registerLostFocusFunction(e,W,function(){comboboxButtonLostFocus(e,W)}),D>0&&registerKeyDownFunction(e,function(e,t,a){if(40==a.keyCode)1==checkIfHiddenWindow(e,(n=getComboboxPropsByTextAreaWindowId(e,S)).ListAreaWindowID)&&(setHiddenWindowStatus(e,n.VScrollBarWindowID,0),setHiddenWindowStatus(e,n.ListAreaWindowID,0),invalidateRect(e,-1,n.X,n.Y,n.Width+1,n.Height+101));else if(38==a.keyCode){var n;1!=checkIfHiddenWindow(e,(n=getComboboxPropsByTextAreaWindowId(e,S)).ListAreaWindowID)&&(setHiddenWindowStatus(e,n.VScrollBarWindowID,1),setHiddenWindowStatus(e,n.ListAreaWindowID,1),invalidateRect(e,-1,n.X,n.Y,n.Width+1,n.Height+101))}},S),S}function drawComboboxScrollBar(e,t){drawScrollBar(e,t)}function drawComboboxTextArea(e,t){var a=getComboboxPropsByTextAreaWindowId(e,t),n=getCtx(e);n.clearRect(a.X,a.Y,a.Width,a.Height),n.fillStyle=a.TextAreaTextColor,n.font=a.TextAreaFontString,a.SelectedID<a.Data.length&&a.SelectedID>=0?n.fillText(a.Data[a.SelectedID],a.X+5,a.Y+a.Height-a.TextAreaTextHeight/2):n.fillText(a.Data[0],a.X+5,a.Y+a.Height-a.TextAreaTextHeight/2),n.strokeStyle="#b7bfc8",n.beginPath(),n.rect(a.X,a.Y,a.Width-a.Height,a.Height),n.stroke()}function drawComboboxButton(e,t){var a=getComboboxPropsByButtonWindowId(e,t),n=getCtx(e);n.lineCap="butt",n.strokeStyle="#3c7fb1",n.beginPath(),n.rect(a.X+a.Width-a.Height,a.Y,a.Height,a.Height),n.stroke(),n.fillStyle="#dcf0fb",n.beginPath(),n.rect(a.X+a.Width-a.Height+1,a.Y+1,a.Height/2-2,a.Height-2),n.fill(),n.strokeStyle="#c0e4f8",n.moveTo(a.X+a.Width-a.Height/2+1,a.Y+1),n.lineTo(a.X+a.Width-a.Height/2+1,a.Y+a.Height-1),n.stroke(),n.fillStyle="#a7d8f3",n.beginPath(),n.rect(a.X+a.Width-a.Height/2+1,a.Y+1,a.Height/2-2,a.Height-2),n.fill();var r=n.createLinearGradient(a.X+a.Width-a.Height/2-1,a.Y+a.Height/2-1,a.X+a.Width-a.Height/2-1,a.Y+a.Height/2+3);r.addColorStop(0,"#0d2a3a"),r.addColorStop(1,"#4e9ac4"),n.fillStyle=r,n.beginPath(),n.moveTo(a.X+a.Width-a.Height/2-4,a.Y+a.Height/2-1),n.lineTo(a.X+a.Width-a.Height/2+3,a.Y+a.Height/2-1),n.lineTo(a.X+a.Width-a.Height/2-1,a.Y+a.Height/2+3),n.closePath(),n.fill()}function comboboxButtonClick(e,t){var a=getComboboxPropsByButtonWindowId(e,t);1==checkIfHiddenWindow(e,a.ListAreaWindowID)?(setHiddenWindowStatus(e,a.VScrollBarWindowID,0),setHiddenWindowStatus(e,a.ListAreaWindowID,0)):(setHiddenWindowStatus(e,a.VScrollBarWindowID,1),setHiddenWindowStatus(e,a.ListAreaWindowID,1)),invalidateRect(e,-1,a.X,a.Y,a.Width+1,a.Height+101)}function drawComboboxListArea(e,t){var a=getComboboxPropsByListAreaWindowId(e,t),n=getScrollBarProps(e,a.VScrollBarWindowID),r=getCtx(e);r.fillStyle="#FFFFFF",r.beginPath(),r.rect(a.X,a.Y+a.Height,a.Width-15,100),r.fill(),r.fillStyle=a.ListAreaTextColor,r.font=a.ListAreaFontString;for(var i=n.SelectedID;i<a.Data.length&&(a.ListAreaTextHeight+6)*(i-n.SelectedID+1)<100;i++)r.fillText(a.Data[i],a.X+5,a.Y+a.Height+(a.ListAreaTextHeight+6)*(i-n.SelectedID+1));r.strokeStyle="#b7bfc8",r.beginPath(),r.rect(a.X,a.Y+a.Height,a.Width-15,100),r.stroke()}function comboboxListAreaClick(e,t,a){for(var n=getComboboxPropsByListAreaWindowId(e,t),r=getScrollBarProps(e,n.VScrollBarWindowID),i=a.calcX,o=a.calcY,l=r.SelectedID;l<n.Data.length&&(n.ListAreaTextHeight+6)*(l-r.SelectedID+1)<100;l++)if(i>n.X&&o>n.Y+n.Height+(n.ListAreaTextHeight+6)*(l-r.SelectedID)&&i<n.X+n.Width-15&&o<n.Y+n.Height+(n.ListAreaTextHeight+6)*(l-r.SelectedID+1)){if(n.SelectedID!=l){n.SelectedID=l,setHiddenWindowStatus(e,n.VScrollBarWindowID,1),setHiddenWindowStatus(e,n.ListAreaWindowID,1);var s=getCanvas(e);invalidateRect(e,-1,0,0,s.width,s.height),null!=n.OnSelectionChanged&&n.OnSelectionChanged(e,n.TextAreaWindowID,l)}return}}function comboboxListAreaLostFocus(e,t){var a=getComboboxPropsByListAreaWindowId(e,t);0==doesWindowHaveFocus(e,a.VScrollBarWindowID)&&0==doesWindowHaveFocus(e,a.TextAreaWindowID)&&0==doesWindowHaveFocus(e,a.ButtonWindowID)&&doingEventForWindowID!=a.ListAreaWindowID&&doingEventForWindowID!=a.VScrollBarWindowID&&(setHiddenWindowStatus(e,a.VScrollBarWindowID,1),setHiddenWindowStatus(e,a.ListAreaWindowID,1),invalidateRect(e,-1,a.X,a.Y,a.Width+1,a.Height+101))}function comboboxTextAreaLostFocus(e,t){var a=getComboboxPropsByTextAreaWindowId(e,t);0==doesWindowHaveFocus(e,a.VScrollBarWindowID)&&0==doesWindowHaveFocus(e,a.ListAreaWindowID)&&0==doesWindowHaveFocus(e,a.ButtonWindowID)&&doingEventForWindowID!=a.ListAreaWindowID&&doingEventForWindowID!=a.VScrollBarWindowID&&(setHiddenWindowStatus(e,a.VScrollBarWindowID,1),setHiddenWindowStatus(e,a.ListAreaWindowID,1),invalidateRect(e,-1,a.X,a.Y,a.Width+1,a.Height+101))}function comboboxButtonLostFocus(e,t){var a=getComboboxPropsByButtonWindowId(e,t);0==doesWindowHaveFocus(e,a.VScrollBarWindowID)&&0==doesWindowHaveFocus(e,a.ListAreaWindowID)&&0==doesWindowHaveFocus(e,a.TextAreaWindowID)&&doingEventForWindowID!=a.ListAreaWindowID&&doingEventForWindowID!=a.VScrollBarWindowID&&(setHiddenWindowStatus(e,a.VScrollBarWindowID,1),setHiddenWindowStatus(e,a.ListAreaWindowID,1),invalidateRect(e,-1,a.X,a.Y,a.Width+1,a.Height+101))}function comboboxScrollBarLostFocus(e,t){var a=getComboboxPropsByScrollBarWindowId(e,t);0==doesWindowHaveFocus(e,a.TextAreaWindowID)&&0==doesWindowHaveFocus(e,a.ListAreaWindowID)&&0==doesWindowHaveFocus(e,a.ButtonWindowID)&&doingEventForWindowID!=a.ListAreaWindowID&&doingEventForWindowID!=a.VScrollBarWindowID&&(setHiddenWindowStatus(e,a.VScrollBarWindowID,1),setHiddenWindowStatus(e,a.ListAreaWindowID,1),invalidateRect(e,-1,a.X,a.Y,a.Width+1,a.Height+101))}CCLCombobox.prototype={CanvasID:null,TextAreaWindowID:null,ButtonWindowID:null,ListAreaWindowID:null,VScrollBarWindowID:null,X:null,Y:null,Width:null,Height:null,Data:null,SelectedID:null,TextAreaTextColor:null,TextAreaTextHeight:null,TextAreaFontString:null,ListAreaTextColor:null,ListAreaTextHeight:null,ListAreaFontString:null,OnSelectionChanged:null,Tag:null,DrawListAreaFunction:null,ListAreaClickFunction:null,ControlNameID:null,ButtonClickFunction:null,DrawButtonFunction:null,DrawTextAreaFunction:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createComboBox(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.DrawTextAreaFunction,this.DrawButtonFunction,this.DrawListAreaFunction,this.ButtonClickFunction,this.ListAreaClickFunction,this.TextAreaTextColor,this.TextAreaTextHeight,this.TextAreaFontString,this.ListAreaTextColor,this.ListAreaTextHeight,this.ListAreaFontString,this.OnSelectionChanged,this.Tag,this.TabStopIndex)}};var checkboxPropsArray=new Array;function getcheckboxProps(e,t){for(var a=0;a<checkboxPropsArray.length;a++)if(checkboxPropsArray[a].CanvasID==e&&checkboxPropsArray[a].WindowID==t)return checkboxPropsArray[a]}function drawCheckbox(e,t){var a,n=getcheckboxProps(e,t),r=getCtx(e);(r.save(),r.shadowOffsetX=1,r.shadowOffsetY=1,r.shadowBlur=5,r.shadowColor="#e3e3e3",r.strokeStyle="#3c7fb1",r.beginPath(),r.rect(n.X,n.Y,15,15),r.stroke(),r.lineCap="round",1==n.Status)?(r.lineWidth=4,(a=r.createLinearGradient(n.X,n.Y,n.X+15,n.Y+15)).addColorStop(0,"#abffaf"),a.addColorStop(1,"#00ff0c"),r.strokeStyle=a,r.beginPath(),r.moveTo(n.X+3,n.Y+9),r.lineTo(n.X+6,n.Y+12),r.lineTo(n.X+18,n.Y-3),r.stroke()):(r.lineWidth=3,(a=r.createLinearGradient(n.X,n.Y,n.X+15,n.Y+15)).addColorStop(0,"#ff2a2a"),a.addColorStop(1,"#ff6b6b"),r.strokeStyle=a,r.beginPath(),r.moveTo(n.X+4,n.Y+4),r.lineTo(n.X+11,n.Y+11),r.moveTo(n.X+11,n.Y+4),r.lineTo(n.X+4,n.Y+11),r.stroke());r.restore()}function CCLCheckbox(){}function createCheckbox(e,t,a,n,r,i,o,l){var s=createWindow(e,a,n,15,15,r,-1,"CheckBox",t,-1,l);return checkboxPropsArray.push({CanvasID:e,WindowID:s,X:a,Y:n,Status:i,Tag:o}),registerClickFunction(s,function(){var t=getcheckboxProps(e,s);1==t.Status?t.Status=0:t.Status=1},e),registerWindowDrawFunction(s,function(){drawCheckbox(e,s)},e),l>0&&registerKeyDownFunction(e,function(){},s),s}CCLCheckbox.prototype={CanvasID:null,X:null,Y:null,Status:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createCheckbox(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Depth,this.Status,this.Tag,this.TabStopIndex)}};var radiobuttonPropsArray=new Array;function getRadioButtonProps(e,t){for(var a=0;a<radiobuttonPropsArray.length;a++)if(radiobuttonPropsArray[a].CanvasID==e&&radiobuttonPropsArray[a].WindowID==t)return radiobuttonPropsArray[a]}function CCLRadioButtonGroup(){}function createRadioButtonGroup(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w){var I=document.getElementById(e).getContext("2d");I.font=u;var C=0;C=2*g>=h+8?2*g:h+8;for(var x=0,p=0;p<l.length;p++){x+=I.measureText(l[p]).width+8+2*g}var f=createWindow(e,a,n,x,C,i,-1,"RadioButtonGroup",t,-1,w);return radiobuttonPropsArray.push({CanvasID:e,WindowID:f,X:a,Y:n,Width:x,Height:C,Alignment:r,GroupName:o,Labels:l,SelectedID:s,LabelTextColor:d,LabelFontString:u,Radius:g,ButtonExtents:new Array,LabelTextHeight:h,Tag:c}),registerWindowDrawFunction(f,function(e,t){var a=getRadioButtonProps(e,t),n=getCtx(e),r=0;n.font=a.LabelFontString;for(var i=new Array,o=0;o<a.Labels.length;o++){n.fillStyle=a.LabelTextColor,n.fillText(a.Labels[o],a.X+r,a.Y+a.Height-(a.Height-a.LabelTextHeight)/2);var l=n.measureText(a.Labels[o]).width;n.fillStyle="#fcfcfc",n.beginPath(),n.arc(a.X+r+l+4+a.Radius,a.Y+a.Radius+(a.Height-2*a.Radius)/2,a.Radius,0,2*Math.PI,!1),n.fill(),n.lineWidth=1,n.strokeStyle="#c4c4c4",n.beginPath(),n.arc(a.X+r+l+4+a.Radius,a.Y+a.Radius+(a.Height-2*a.Radius)/2,a.Radius-1,Math.PI/180*315,Math.PI/180*135,!1),n.stroke(),n.strokeStyle="#141414",n.beginPath(),n.arc(a.X+r+l+4+a.Radius,a.Y+a.Radius+(a.Height-2*a.Radius)/2,a.Radius-1,Math.PI/180*135,Math.PI/180*315,!1),n.stroke(),n.strokeStyle="#808080",n.beginPath(),n.arc(a.X+r+l+4+a.Radius,a.Y+a.Radius+(a.Height-2*a.Radius)/2,a.Radius-1,Math.PI/180*135,Math.PI/180*315,!1),n.stroke(),o==a.SelectedID&&(n.fillStyle="#51852f",n.beginPath(),n.arc(a.X+r+l+4+a.Radius,a.Y+a.Radius+(a.Height-2*a.Radius)/2,a.Radius-4,0,2*Math.PI,!1),n.fill()),i.push({X:a.X+r+l+4,Y:a.Y,Width:2*a.Radius,Height:a.Height}),r+=l+8+2*a.Radius}a.ButtonExtents=i},e),registerClickFunction(f,function(e,t,a){for(var n=getRadioButtonProps(e,t),r=a.calcX,i=a.calcY,o=0;o<n.ButtonExtents.length;o++)if(r>n.ButtonExtents[o].X&&r<n.ButtonExtents[o].X+n.ButtonExtents[o].Width&&i>n.ButtonExtents[o].Y&&i<n.ButtonExtents[o].Y+n.ButtonExtents[o].Height){n.SelectedID=o;break}},e),w>0&&registerKeyDownFunction(e,function(){},f),f}CCLRadioButtonGroup.prototype={CanvasID:null,WindowID:null,X:null,Y:null,Width:null,Height:null,Alignment:null,GroupName:null,Labels:null,SelectedID:null,LabelTextColor:null,LabelFontString:null,Radius:null,LabelTextHeight:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createRadioButtonGroup(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Alignment,this.Depth,this.GroupName,this.Labels,this.SelectedID,this.LabelTextColor,this.LabelFontString,this.LabelTextHeight,this.Radius,this.Tag,this.TabStopIndex)}};var imageControlPropsArray=new Array;function getImageControlProps(e,t){for(var a=0;a<imageControlPropsArray.length;a++)if(imageControlPropsArray[a].CanvasID==e&&imageControlPropsArray[a].WindowID==t)return imageControlPropsArray[a]}var imageControlImages=new Array;function setImageControlImage(e,t){for(var a=0,n=0;n<imageControlImages.length;n++)imageControlImages[n].CanvasID==e.CanvasID&&imageControlImages[n].WindowID==e.WindowID&&(a=1,imageControlImages[n].Image=t);0==a&&imageControlImages.push({CanvasID:e.CanvasID,WindowID:e.WindowID,Image:t})}function getImageControlImage(e){for(var t=0;t<imageControlImages.length;t++)if(imageControlImages[t].CanvasID==e.CanvasID&&imageControlImages[t].WindowID==e.WindowID)return imageControlImages[t].Image}function CCLImage(){}function createImage(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b,H,v){var m=createWindow(e,a,n,r,i,o,-1,"Image",t,-1,v),P=new Image;return P.onload=function(){invalidateRect(e,-1,a,n,r,i)},imageControlPropsArray.push({CanvasID:e,WindowID:m,X:a,Y:n,Width:r,Height:i,ImageURL:l,ClickFunction:s,AlreadyDrawnImage:0,IsHyperlink:h,URL:g,NoBrowserHistory:c,IsNewBrowserWindow:w,NameOfNewBrowserWindow:I,WidthOfNewBrowserWindow:C,HeightOfNewBrowserWindow:x,NewBrowserWindowIsResizable:p,NewBrowserWindowHasScrollBars:f,NewBrowserWindowHasToolbar:T,NewBrowserWindowHasLocationOrURLOrAddressBox:D,NewBrowserWindowHasDirectoriesOrExtraButtons:S,NewBrowserWindowHasStatusBar:W,NewBrowserWindowHasMenuBar:b,NewBrowserWindowCopyHistory:H,Tag:u,Tile:d}),P.src=l,setImageControlImage(getImageControlProps(e,m),P),registerWindowDrawFunction(m,function(e,t){var a=getCtx(e),n=getImageControlProps(e,t),r=getImageControlImage(n);if(r&&1==r.complete)if(1==n.Tile){var i=getWindowProps(e,t);if(i)for(var o=Math.ceil(i.Width/r.width),l=Math.ceil(i.Height/r.height),s=0;s<l;s++)for(var d=0;d<o;d++)a.drawImage(r,n.X+d*r.width,n.Y+s*r.height)}else a.drawImage(r,n.X,n.Y)},e),null!=s?registerClickFunction(m,function(){s(e,m)},e):1==h&&registerClickFunction(m,function(){if(1==w){var e="",t=0;null!=C&&(e+="width="+C,t=1),null!=x&&(e+=(1==t?",":"")+"height="+x),null!=p&&(e+=(1==t?",":"")+"resizable="+p),null!=f&&(e+=(1==t?",":"")+"scrollbars="+f),null!=T&&(e+=(1==t?",":"")+"toolbar="+T),null!=D&&(e+=(1==t?",":"")+"location="+D),null!=newbroserwindowhasdirectoriesorextrabuttons&&(e+=(1==t?",":"")+"directories="+newbroserwindowhasdirectoriesorextrabuttons),null!=W&&(e+=(1==t?",":"")+"status="+W),null!=b&&(e+=(1==t?",":"")+"menubar="+b),null!=H&&(e+=(1==t?",":"")+"copyhistory="+H),window.open(g,I,e)}else 1==c?window.location.replace(g):window.location.href=g},e),v>0&&registerKeyDownFunction(e,function(){},m),m}CCLImage.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,ImageURL:null,ClickFunction:null,AlreadyDrawnImage:null,IsHyperlink:null,URL:null,NoBrowserHistory:null,IsNewBrowserWindow:null,NameOfNewBrowserWindow:null,WidthOfNewBrowserWindow:null,HeightOfNewBrowserWindow:null,NewBrowserWindowIsResizable:null,NewBrowserWindowHasScrollBars:null,NewBrowserWindowHasToolbar:null,NewBrowserWindowHasLocationOrURLOrAddressBox:null,NewBrowserWindowHasDirectoriesOrExtraButtons:null,NewBrowserWindowHasStatusBar:null,NewBrowserWindowHasMenuBar:null,NewBrowserWindowCopyHistory:null,Tag:null,Tile:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createImage(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.imgurl,this.ClickFunction,this.Tile,this.Tag,this.IsHyperlink,this.URL,this.NoBrowserHistory,this.IsNewBrowserWindow,this.NameOfNewBrowserWindow,this.WidthOfNewBrowserWindow,this.HeightOfNewBrowserWindow,this.NewBrowserWindowIsResizable,this.NewBrowserWindowHasScrollBars,this.NewBrowserWindowHasToolbar,this.NewBrowserWindowHasLocationOrURLOrAddressBox,this.NewBrowserWindowHasDirectoriesOrExtraButtons,this.NewBrowserWindowHasStatusBar,this.NewBrowserWindowHasMenuBar,this.NewBrowserWindowCopyHistory,this.TabStopIndex)}};var treeViewPropsArray=new Array,iconImages=new Array;function getTreeViewProps(e,t){for(var a=0;a<treeViewPropsArray.length;a++)if(treeViewPropsArray[a].CanvasID==e&&treeViewPropsArray[a].WindowID==t)return treeViewPropsArray[a]}function findNumberOfExpandedNodesInAll(e){for(var t=0,a=0;a<e.length;a++)1==e[a].Expanded&&t++,e[a].ChildNodes.length>0&&(t+=findNumberOfExpandedNodesInAll(e[a].ChildNodes));return t}function findIfImageAlreadyInIconImages(e,t){for(var a=0;a<t.length;a++)if(t[a].ImageURL==e)return 1;return 0}function fillIconImages(e,t){for(var a=0;a<e.length;a++){if(null!=e[a].ImageURL&&e[a].ImageURL.length>0&&0==findIfImageAlreadyInIconImages(e[a].ImageURL,t)){var n=new Image;n.onload=function(){},n.src=e[a].ImageURL,t.push({ImageURL:e[a].ImageURL,Image:n})}e[a].ChildNodes.length>0&&fillIconImages(e[a].ChildNodes,t)}return t}function findNodeIndex(e,t){for(var a=0;a<t.length;a++){if(e==t[a])return a;if(t[a].ChildNodes&&t[a].ChildNodes.length>0)return a+findNodeIndex(e,t[a].ChildNodes)}return 0}function treeviewVSCustomIncrementFunction(e,t,a){for(var n=new Array,r=0;r<e.TreeviewNodeInstancesRootNodes.length;r++)n.push(e.TreeviewNodeInstancesRootNodes[r]),e.TreeviewNodeInstancesRootNodes[r].ChildNodes.length>0&&1==e.TreeviewNodeInstancesRootNodes[r].Expanded&&fillChildNodes(e.TreeviewNodeInstancesRootNodes[r].ChildNodes,n);for(r=0;r<n.length;r++)if(getSelectedTag(t.CanvasID,t.WindowID)==n[r]){1==a?r+1<n.length&&setSelectedTag(t.CanvasID,t.WindowID,n[r+1]):r-1>=0&&setSelectedTag(t.CanvasID,t.WindowID,n[r-1]);break}for(r=0;r<treeViewPropsArray.length;r++)if(getTreeviewNodes(treeViewPropsArray[r])==e.TreeviewNodeInstancesRootNodes){invalidateRect(treeViewPropsArray[r].CanvasID,-1,treeViewPropsArray[r].X,treeViewPropsArray[r].Y,treeViewPropsArray[r].Width,treeViewPropsArray[r].Height),setTreeviewSelectedNode(treeViewPropsArray[r],getSelectedTag(t.CanvasID,t.WindowID));break}}function treeviewVSCustomMouseMoveFunction(e,t){for(var a=null,n=0;n<treeViewPropsArray.length;n++)e.WindowID==treeViewPropsArray[n].VScrollBarWindowID&&(a=treeViewPropsArray[n]);if(null!=a){var r=new Array,i=getTreeviewNodes(a);for(n=0;n<i.length;n++)r.push(i[n]),i[n].ChildNodes.length>0&&1==i[n].Expanded&&fillChildNodes(i[n].ChildNodes,r);t>=0&&t<r.length&&(setSelectedTag(e.CanvasID,e.WindowID,r[t]),setTreeviewSelectedNode(a,r[t]))}}var treeviewNodesArray=new Array;function setTreeviewNodes(e,t){for(var a=0,n=0;n<treeviewNodesArray.length;n++)treeviewNodesArray[n][0]==e.CanvasID&&treeviewNodesArray[n][1]==e.WindowID&&(a=1,treeviewNodesArray[n][2]=t);0==a&&treeviewNodesArray.push([e.CanvasID,e.WindowID,t])}function getTreeviewNodes(e){for(var t=0;t<treeviewNodesArray.length;t++)if(treeviewNodesArray[t][0]==e.CanvasID&&treeviewNodesArray[t][1]==e.WindowID)return treeviewNodesArray[t][2]}var treeviewSelectedNodeArray=new Array;function setTreeviewSelectedNode(e,t){for(var a=0,n=0;n<treeviewSelectedNodeArray.length;n++)treeviewSelectedNodeArray[n][0]==e.CanvasID&&treeviewSelectedNodeArray[n][1]==e.WindowID&&(a=1,treeviewSelectedNodeArray[n][2]=t);0==a&&treeviewSelectedNodeArray.push([e.CanvasID,e.WindowID,t])}function getTreeviewSelectedNode(e){for(var t=0;t<treeviewSelectedNodeArray.length;t++)if(treeviewSelectedNodeArray[t][0]==e.CanvasID&&treeviewSelectedNodeArray[t][1]==e.WindowID)return treeviewSelectedNodeArray[t][2]}var treeviewClickLabelExtentsArray=new Array;function setTreeviewClickLabelExtents(e,t){for(var a=0,n=0;n<treeviewClickLabelExtentsArray.length;n++)treeviewClickLabelExtentsArray[n][0]==e.CanvasID&&treeviewClickLabelExtentsArray[n][1]==e.WindowID&&(a=1,treeviewClickLabelExtentsArray[n][2]=t);0==a&&treeviewClickLabelExtentsArray.push([e.CanvasID,e.WindowID,t])}function getTreeviewClickLabelExtents(e){for(var t=0;t<treeviewClickLabelExtentsArray.length;t++)if(treeviewClickLabelExtentsArray[t][0]==e.CanvasID&&treeviewClickLabelExtentsArray[t][1]==e.WindowID)return treeviewClickLabelExtentsArray[t][2]}var treeviewClickButtonExtentsArray=new Array;function setTreeviewClickButtonExtents(e,t){for(var a=0,n=0;n<treeviewClickButtonExtentsArray.length;n++)treeviewClickButtonExtentsArray[n][0]==e.CanvasID&&treeviewClickButtonExtentsArray[n][1]==e.WindowID&&(a=1,treeviewClickButtonExtentsArray[n][2]=t);0==a&&treeviewClickButtonExtentsArray.push([e.CanvasID,e.WindowID,t])}function getTreeviewClickButtonExtents(e){for(var t=0;t<treeviewClickButtonExtentsArray.length;t++)if(treeviewClickButtonExtentsArray[t][0]==e.CanvasID&&treeviewClickButtonExtentsArray[t][1]==e.WindowID)return treeviewClickButtonExtentsArray[t][2]}function CCLTreeview(){}function createTreeView(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x){var p=createWindow(e,a,n,r,i,o,-1,"TreeView",t,-1,x),f=findNumberOfExpandedNodesInAll(l);iconImages=1==c?fillIconImages(l,new Array):new Array;var T=createScrollBar(e,t+"VS",a+r,n,i,o,f,1,p,null,null,null,treeviewVSCustomIncrementFunction,null!=C?C:null!=l&&l.length>0?l[0]:null,treeviewVSCustomMouseMoveFunction),D=createScrollBar(e,t+"HS",a,n+i,r,o,f,0,p),S=new Array,W=new Array;return treeViewPropsArray.push({CanvasID:e,WindowID:p,X:a,Y:n,Width:r,Height:i,VScrollBarWindowID:T,HScrollBarWindowID:D,ClickNodeFunction:h,Tag:g,HasIcons:c,IconWidth:w,IconHeight:I,TextColor:s,TextFontString:d,TextHeight:u}),setTreeviewSelectedNode(getTreeViewProps(e,p),null!=C?C:null!=l&&l.length>0?l[0]:null),setTreeviewNodes(getTreeViewProps(e,p),l),setTreeviewClickLabelExtents(getTreeViewProps(e,p),W),setTreeviewClickButtonExtents(getTreeViewProps(e,p),S),registerWindowDrawFunction(p,drawTreeView,e),registerClickFunction(p,clickTreeView,e),x>0&&registerKeyDownFunction(e,function(){},p),p}function toggleNodeExpandedState(e,t){0==t.Expanded?t.Expanded=1:t.Expanded=0}function clickTreeView(e,t,a){for(var n=getTreeViewProps(e,t),r=getScrollBarProps(e,n.VScrollBarWindowID),i=a.calcX,o=a.calcY,l=getTreeviewClickButtonExtents(n),s=0;s<l.length;s++)if(l[s].Node&&i>l[s].X&&i<l[s].X+9&&o>l[s].Y&&o<l[s].Y+9)return toggleNodeExpandedState(n,l[s].Node),r.MaxItems=checkHowManyChildNodesAreExpandedInAll(getTreeviewNodes(n)),void invalidateRect(e,-1,n.X,n.Y,n.Width,n.Height);if(null!=n.ClickNodeFunction){var d=getTreeviewClickLabelExtents(n);for(s=0;s<d.length;s++)if(d[s].TreeviewClickLabelExtentsNode&&i>d[s].X&&i<d[s].X+d[s].Width&&o>d[s].Y&&o<d[s].Y+d[s].TextHeight)return n.ClickNodeFunction(e,t,d[s].TreeviewClickLabelExtentsNode),setTreeviewSelectedNode(n,d[s].TreeviewClickLabelExtentsNode),void invalidateRect(e,-1,n.X,n.Y,n.Width,n.Height)}}function checkIfParentsAreExpanded(e,t){if(null==t.TreeviewNodeInstancesParentNode)return 1;for(var a=t;null!=a.TreeviewNodeInstancesParentNode;){if(0==a.Expanded)return 0;a=a.TreeviewNodeInstancesParentNode}return 1}function checkIfStringAndConvertToInt(e){return"string"==typeof e?parseInt(e):e}function fillChildNodes(e,t){for(var a=0;a<e.length;a++)t.push(e[a]),e[a].ChildNodes.length>0&&1==e[a].Expanded&&fillChildNodes(e[a].ChildNodes,t)}function drawTreeView(e,t){var a=getTreeViewProps(e,t),n=getCtx(e);n.save(),n.strokeStyle="#C0C0C0",n.beginPath(),n.rect(a.X,a.Y,a.Width,a.Height),n.stroke(),n.beginPath(),n.rect(a.X,a.Y,a.Width,a.Height),n.clip(),n.fillStyle=a.TextColor,n.font=a.TextFontString;var r=0;setTreeviewClickLabelExtents(a,new Array);for(var i=new Array,o=getTreeviewNodes(a),l=0;l<o.length;l++)i.push(o[l]),o[l].ChildNodes.length>0&&1==o[l].Expanded&&fillChildNodes(o[l].ChildNodes,i);var s=0;for(l=0;l<i.length&&r<a.Height;l++)if(i[l]==getTreeviewSelectedNode(a)&&(s=1),1==s){a.Y;var d=findNodeLevel(i[l]);drawTreeViewNode(n,i[l],4+a.X,4+a.Y+r,a.TextColor,a.TextFontString,a.TextHeight,d,a.IconWidth,a.IconHeight,a),r+=(a.TextHeight>a.IconHeight?a.TextHeight>9?a.TextHeight:9:a.IconHeight>9?a.IconHeight:9)+8}n.restore()}function findNodeLevel(e){return null==e.TreeviewNodeInstancesParentNode?0:1+findNodeLevel(e.TreeviewNodeInstancesParentNode)}function numberOfChildNodes(e){var t=e.ChildNodes.length;if(t>0)for(var a=0;a<e.ChildNodes.length;a++)t+=numberOfChildNodes(e.ChildNodes[a]);return t}function checkHowManyChildNodesAreExpanded(e){var t=e.ChildNodes.length;if(t>0)for(var a=0;a<e.ChildNodes.length;a++)1==e.ChildNodes[a].Expanded&&(t++,e.ChildNodes[a].ChildNodes.length>0&&(t+=checkHowManyChildNodesAreExpanded(e.ChildNodes[a])));return t}function checkHowManyChildNodesAreExpandedInAll(e){for(var t=0,a=0;a<e.length;a++)1==e[a].Expanded&&(t++,e[a].ChildNodes.length>0&&(t+=e[a].ChildNodes.length,t+=checkHowManyChildNodesAreExpandedInAll(e[a].ChildNodes)));return t}function drawTreeViewNode(e,t,a,n,r,i,o,l,s,d,u){if(a+=8*l+(0==l?2:10),t.ChildNodes.length>0){e.strokeStyle="#3c7fb1",e.beginPath(),e.rect(a,n,10,10);var h=getTreeviewClickButtonExtents(u);h.push({X:a,Y:n,Node:t}),setTreeviewClickButtonExtents(u,h),e.stroke(),e.fillStyle="#dcf0fb",e.beginPath(),e.rect(a+1,n+1,8,5),e.fill(),e.fillStyle="#a7d8f3",e.beginPath(),e.rect(a+1,n+6,8,4),e.fill(),e.strokeStyle="#000000",e.beginPath(),e.moveTo(a+2,n+5),e.lineTo(a+8,n+5),e.stroke(),0==t.Expanded&&(e.beginPath(),e.moveTo(a+5,n+2),e.lineTo(a+5,n+8),e.stroke()),numOfChildNodes=checkHowManyChildNodesAreExpanded(t),t.ChildNodes.length>0&&0==numOfChildNodes&&(e.strokeStyle="#000000",e.beginPath(),e.moveTo(a+5,n+2),e.lineTo(a+5,n+8),e.stroke())}var g=0;if(null!=t.ImageURL)for(var c=0;c<iconImages.length;c++)if(t.ImageURL==iconImages[c].ImageURL){e.drawImage(iconImages[c].Image,a+13,n),g+=s+5;break}e.fillStyle=r,e.font=i,e.fillText(t.Label,a+13+g,n+o),getTreeviewClickLabelExtents(u).push({X:a+13,Y:n,Width:e.measureText(t.Label).width+g,TextHeight:o,TreeviewClickLabelExtentsNode:t})}function insertTreeviewNode(e,t,a,n){for(var r=getTreeViewProps(e,t),i=0;i<r.Data.length;i++)a?r.Data[i][0]==a&&r.Data.splice(i,0,n):r.Data.push(n)}function addChildNodes(e,t,a,n,r,i){var o={TreeviewNodeInstancesParentNode:t,TreeviewNodeInstancesRootNodes:e,ImageURL:a,Expanded:n,ChildNodes:new Array,Label:r,CustomExtraInfo:i};return null==t?e.push(o):t.ChildNodes.push(o),o}CCLTreeview.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,VScrollBarWindowID:null,HScrollBarWindowID:null,ClickNodeFunction:null,Tag:null,HasIcons:null,IconWidth:null,IconHeight:null,TextColor:null,TextFontString:null,TextHeight:null,ControlNameID:null,Depth:null,Nodes:null,SelectedNode:null,TabStopIndex:-1,Initialize:function(){return createTreeView(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Nodes,this.TextColor,this.TextFontString,this.TextHeight,this.ClickNodeFunction,this.Tag,this.HasIcons,this.IconWidth,this.IconHeight,this.SelectedNode,this.TabStopIndex)}};var calenderPropsArray=new Array;function getCalenderProps(e,t){for(var a=0;a<calenderPropsArray.length;a++)if(calenderPropsArray[a].CanvasID==e&&calenderPropsArray[a].WindowID==t)return calenderPropsArray[a]}function drawCalender(e,t){var a=getCalenderProps(e,t),n=getCtx(e),r=new Date("1 "+a.VisibleMonth+" "+a.VisibleYear),i=new Date;n.fillStyle=a.HeaderBackgroundColor,n.beginPath(),n.rect(a.X,a.Y,a.Width,a.HeaderHeight),n.fill(),n.fillStyle=a.BodyBackgroundColor,n.beginPath(),n.rect(a.X,a.Y+a.HeaderHeight,a.Width,a.Height-a.HeaderHeight),n.fill();var o=new Array;n.fillStyle="#C0C0C0",n.font=a.TextHeaderFontString;var l=n.measureText("September").width,s=n.measureText("0000").width,d=a.X+(a.Width-(68+l+s))/2;n.beginPath(),n.moveTo(d+4,a.Y+(a.HeaderHeight-11)/2+6),n.lineTo(d+15,a.Y+(a.HeaderHeight-11)/2),n.lineTo(d+15,a.Y+(a.HeaderHeight-11)/2+11),n.closePath(),n.fill(),o.push({X:d+4,Y:a.Y+(a.HeaderHeight-11)/2,Width:11,Height:11}),n.beginPath(),n.moveTo(d+23+l,a.Y+(a.HeaderHeight-11)/2),n.lineTo(d+23+l,a.Y+(a.HeaderHeight-11)/2+11),n.lineTo(d+34+l,a.Y+(a.HeaderHeight-11)/2+6),n.closePath(),n.fill(),o.push({X:d+23+l,Y:a.Y+(a.HeaderHeight-11)/2,Width:11,Height:11}),n.beginPath(),n.moveTo(d+38+l,a.Y+(a.HeaderHeight-11)/2+6),n.lineTo(d+49+l,a.Y+(a.HeaderHeight-11)/2),n.lineTo(d+49+l,a.Y+(a.HeaderHeight-11)/2+11),n.closePath(),n.fill(),o.push({X:d+38+l,Y:a.Y+(a.HeaderHeight-11)/2,Width:11,Height:11}),n.beginPath(),n.moveTo(d+57+l+s,a.Y+(a.HeaderHeight-11)/2),n.lineTo(d+57+l+s,a.Y+(a.HeaderHeight-11)/2+11),n.lineTo(d+68+l+s,a.Y+(a.HeaderHeight-11)/2+6),n.closePath(),n.fill(),o.push({X:d+57+l+s,Y:a.Y+(a.HeaderHeight-11)/2,Width:11,Height:11}),a.ButtonClickExtents=o,n.fillStyle=a.TextHeaderColor,n.fillText(a.VisibleMonth,d+19+(l-n.measureText(a.VisibleMonth).width)/2,a.Y+(a.HeaderHeight-a.TextHeaderHeight)/2+a.TextHeaderHeight),n.fillText(a.VisibleYear,d+53+l,a.Y+(a.HeaderHeight-a.TextHeaderHeight)/2+a.TextHeaderHeight);for(var u=r.getDay()>0?new Date(r.getTime()-24*r.getDay()*60*60*1e3):r,h=new Array,g=null,c=0;c<7;c++){switch(c){case 0:g="Sun";break;case 1:g="Mon";break;case 2:g="Tue";break;case 3:g="Wed";break;case 4:g="Thu";break;case 5:g="Fri";break;case 6:g="Sat"}n.fillStyle=a.DayLabelTextColor,n.font=a.DayLabelTextFontString,n.fillText(g,a.X+4+c%7*a.DayCellWidth+(a.DayCellWidth-n.measureText(g).width)/2,a.Y+a.HeaderHeight+4+a.DayCellHeight-(a.DayCellHeight-a.DayLabelTextHeight)/2)}for(c=0;c<42;c++,u=new Date(u.getTime()+864e5)){h.push({X:a.X+4+c%7*a.DayCellWidth,Y:a.Y+a.HeaderHeight+4+(Math.floor(c/7)+1)*a.DayCellHeight,Date:u});var w=0;null!=a.MouseHoverDate&&u.getMonth()==a.MouseHoverDate.getMonth()&&u.getDate()==a.MouseHoverDate.getDate()&&u.getFullYear()==a.MouseHoverDate.getFullYear()&&(w=1,n.fillStyle=a.MouseOverHightLightColor,n.beginPath(),n.rect(a.X+4+c%7*a.DayCellWidth,a.Y+a.HeaderHeight+4+(Math.floor(c/7)+1)*a.DayCellHeight,a.DayCellWidth,a.DayCellHeight),n.fill()),u.getMonth()!=r.getMonth()?(n.fillStyle=a.DayDateInactiveTextColor,n.font=a.DayDateInactiveTextFontString,n.fillText(u.getDate().toString(),a.X+4+c%7*a.DayCellWidth+(a.DayCellWidth-n.measureText(u.getDate().toString()).width)/2,a.Y+a.HeaderHeight+4+(Math.floor(c/7)+2)*a.DayCellHeight-(a.DayCellHeight-a.TodayTextHeight)/2)):null!=a.SelectedDay&&u.getMonth()==a.SelectedDay.getMonth()&&u.getDate()==a.SelectedDay.getDate()&&u.getFullYear()==a.SelectedDay.getFullYear()?(n.fillStyle=a.SelectedDayHighLightColor,n.beginPath(),n.rect(a.X+4+c%7*a.DayCellWidth,a.Y+a.HeaderHeight+4+(Math.floor(c/7)+1)*a.DayCellHeight,a.DayCellWidth,a.DayCellHeight),n.fill(),n.fillStyle=a.SelectedDayTextColor,n.font=a.SelectedDayTextFontString,n.fillText(u.getDate().toString(),a.X+4+c%7*a.DayCellWidth+(a.DayCellWidth-n.measureText(u.getDate().toString()).width)/2,a.Y+a.HeaderHeight+4+(Math.floor(c/7)+2)*a.DayCellHeight-(a.DayCellHeight-a.SelectedDayTextHeight)/2)):u.getMonth()==i.getMonth()&&u.getDate()==i.getDate()&&u.getFullYear()==i.getFullYear()?(0==w&&(n.fillStyle=a.TodayHighLightColor,n.beginPath(),n.rect(a.X+4+c%7*a.DayCellWidth,a.Y+a.HeaderHeight+4+(Math.floor(c/7)+1)*a.DayCellHeight,a.DayCellWidth,a.DayCellHeight),n.fill()),n.fillStyle=a.TodayTextColor,n.font=a.TodayTextFontString,n.fillText(u.getDate().toString(),a.X+4+c%7*a.DayCellWidth+(a.DayCellWidth-n.measureText(u.getDate().toString()).width)/2,a.Y+a.HeaderHeight+4+(Math.floor(c/7)+2)*a.DayCellHeight-(a.DayCellHeight-a.TodayTextHeight)/2)):(n.fillStyle=a.DayDateActiveColor,n.font=a.DayDateActiveTextFontString,n.fillText(u.getDate().toString(),a.X+4+c%7*a.DayCellWidth+(a.DayCellWidth-n.measureText(u.getDate().toString()).width)/2,a.Y+a.HeaderHeight+4+(Math.floor(c/7)+2)*a.DayCellHeight-(a.DayCellHeight-a.DayDateActiveTextHeight)/2))}a.DateClickExtents=h}function CCLCalendar(){}function createCalendar(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b,H,v,m,P,y,B,L,M,A,F,X,Y,k,R){var E=createWindow(e,a,n,r,i,o,-1,"Calender",t,-1,R);return calenderPropsArray.push({CanvasID:e,WindowID:E,X:a,Y:n,Width:r,Height:i,VisibleMonth:l,VisibleYear:s,SelectedDay:new Date(d),DayCellWidth:u,DayCellHeight:h,HeaderHeight:g,TextHeaderColor:I,TextHeaderHeight:C,TextHeaderFontString:x,DayDateActiveColor:p,DayDateActiveTextHeight:f,DayDateActiveTextFontString:T,DayDateInactiveTextColor:D,DayDateInactiveTextHeight:S,DayDateInactiveTextFontString:W,SelectedDayTextColor:b,SelectedDayTextHeight:H,SelectedDayTextFontString:v,SelectedDayHighLightColor:m,TodayTextColor:P,TodayTextHeight:y,TodayTextFontString:B,TodayHighLightColor:L,OnDayClickFunction:A,HeaderBackgroundColor:c,BodyBackgroundColor:w,MouseOverHightLightColor:M,MouseHoverDate:null,ButtonClickExtents:null,DateClickExtents:null,DayLabelTextColor:F,DayLabelTextHeight:X,Tag:k,DayLabelTextFontString:Y}),registerWindowDrawFunction(E,drawCalender,e),registerClickFunction(E,calenderClick,e),registerMouseOverFunction(E,calenderMouseOver,e),R>0&&registerKeyDownFunction(e,function(){},E),E}function getMonthName(e){switch(e){case 0:return"January";case 1:return"Febuary";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December"}}function calenderClick(e,t,a){for(var n=getCalenderProps(e,t),r=a.calcX,i=a.calcY,o=new Date("1 "+n.VisibleMonth+" "+n.VisibleYear),l=0;l<n.ButtonClickExtents.length;l++)if(r>n.ButtonClickExtents[l].X&&r<n.ButtonClickExtents[l].X+n.ButtonClickExtents[l].Width&&i>n.ButtonClickExtents[l].Y&&i<n.ButtonClickExtents[l].Y+n.ButtonClickExtents[l].Height)switch(l){case 0:return void(0==o.getMonth()?(n.VisibleMonth="December",n.VisibleYear=(parseInt(n.VisibleYear,10)-1).toString()):n.VisibleMonth=getMonthName(o.getMonth()-1));case 1:return void(11==o.getMonth()?(n.VisibleMonth="January",n.VisibleYear=(parseInt(n.VisibleYear,10)+1).toString()):n.VisibleMonth=getMonthName(o.getMonth()+1));case 2:return void(n.VisibleYear=(parseInt(n.VisibleYear,10)-1).toString());case 3:return void(n.VisibleYear=(parseInt(n.VisibleYear,10)+1).toString())}for(l=0;l<n.DateClickExtents.length;l++)if(r>n.DateClickExtents[l].X&&r<n.DateClickExtents[l].X+n.DayCellWidth&&i>n.DateClickExtents[l].Y&&i<n.DateClickExtents[l].Y+n.DayCellHeight)return n.SelectedDay=n.DateClickExtents[l].Date,void(null!=n.OnDayClickFunction&&n.OnDayClickFunction(n.CanvasID,n.WindowID,n.SelectedDay))}function calenderMouseOver(e,t,a){for(var n=getCalenderProps(e,t),r=a.calcX,i=a.calcY,o=0;o<n.DateClickExtents.length;o++)if(r>n.DateClickExtents[o].X&&r<n.DateClickExtents[o].X+n.DayCellWidth&&i>n.DateClickExtents[o].Y&&i<n.DateClickExtents[o].Y+n.DayCellHeight)return void(n.MouseHoverDate=n.DateClickExtents[o].Date)}CCLCalendar.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,VisibleMonth:null,VisibleYear:null,SelectedDay:null,DayCellWidth:null,DayCellHeight:null,HeaderHeight:null,TextHeaderColor:null,TextHeaderHeight:null,TextHeaderFontString:null,DayDateActiveColor:null,DayDateActiveTextHeight:null,DayDateActiveTextFontString:null,DayDateInactiveTextColor:null,DayDateInactiveTextHeight:null,DayDateInactiveTextFontString:null,SelectedDayTextColor:null,SelectedDayTextHeight:null,SelectedDayTextFontString:null,SelectedDayHighLightColor:null,TodayTextColor:null,TodayTextHeight:null,TodayTextFontString:null,TodayHighLightColor:null,OnDayClickFunction:null,HeaderBackgroundColor:null,BodyBackgroundColor:null,MouseOverHightLightColor:null,MouseHoverDate:null,DayLabelTextColor:null,DayLabelTextHeight:null,Tag:null,DayLabelTextFontString:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createCalendar(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.VisibleMonth,this.VisibleYear,this.SelectedDay,this.DayCellWidth,this.DayCellHeight,this.HeaderHeight,this.HeaderBackgroundColor,this.BodyBackgroundColor,this.TextHeaderColor,this.TextHeaderHeight,this.TextHeaderFontString,this.DayDateActiveColor,this.DayDateActiveTextHeight,this.DayDateActiveTextFontString,this.DayDateInactiveTextColor,this.DayDateInactiveTextHeight,this.DayDateInactiveTextFontString,this.SelectedDayTextColor,this.SelectedDayTextHeight,this.SelectedDayTextFontString,this.SelectedDayHighLightColor,this.TodayTextColor,this.TodayTextHeight,this.TodayTextFontString,this.TodayHighLightColor,this.MouseOverHightLightColor,this.OnDayClickFunction,this.DayLabelTextColor,this.DayLabelTextHeight,this.DayLabelTextFontString,this.Tag,this.TabStopIndex)}};var progressBarPropsArray=new Array;function getProgressBarProps(e,t){for(var a=0;a<progressBarPropsArray.length;a++)if(progressBarPropsArray[a].CanvasID==e&&progressBarPropsArray[a].WindowID==t)return progressBarPropsArray[a]}function CCLProgressBar(){}function createProgressBar(e,t,a,n,r,i,o,l,s,d,u,h,g){var c=createWindow(e,a,n,r,i,o,-1,"ProgressBar",t,-1,g);return progressBarPropsArray.push({CanvasID:e,WindowID:c,X:a,Y:n,Width:r,Height:i,Color:l,MaxValue:s,MinValue:d,CurrentValue:u,Tag:h}),registerWindowDrawFunction(c,drawProgressBar,e),g>0&&registerKeyDownFunction(e,function(){},c),c}function setProgressBarCurrentValue(e,t,a){var n=getProgressBarProps(e,t);n.CurrentValue=a,invalidateRect(e,-1,n.X,n.Y,n.Width,n.Height)}function drawProgressBar(e,t){var a=getProgressBarProps(e,t),n=getCtx(e),r=n.createLinearGradient(a.X,a.Y,a.X,a.Y+a.Height);r.addColorStop(0,"#f4f5f6"),r.addColorStop(1,"#eaeced"),n.fillStyle=r,n.beginPath(),n.moveTo(a.X,a.Y+5),n.arc(a.X+5,a.Y+5,5,Math.PI,270*Math.PI/180,!1),n.lineTo(a.X+a.Width-5,a.Y),n.arc(a.X+a.Width-5,a.Y+5,5,270*Math.PI/180,2*Math.PI,!1),n.lineTo(a.X+a.Width,a.Y+a.Height-5),n.arc(a.X+a.Width-5,a.Y+a.Height-5,5,0,Math.PI/2,!1),n.lineTo(a.X+5,a.Y+a.Height),n.arc(a.X+5,a.Y+a.Height-5,5,Math.PI/2,Math.PI,!1),n.closePath(),n.fill(),n.strokeStyle="#a9b2bb",n.beginPath(),n.moveTo(a.X,a.Y+5),n.arc(a.X+5,a.Y+5,5,Math.PI,270*Math.PI/180,!1),n.lineTo(a.X+a.Width-5,a.Y),n.arc(a.X+a.Width-5,a.Y+5,5,270*Math.PI/180,2*Math.PI,!1),n.stroke(),n.strokeStyle="#768694",n.beginPath(),n.moveTo(a.X+a.Width,a.Y+5),n.lineTo(a.X+a.Width,a.Y+a.Height-5),n.arc(a.X+a.Width-5,a.Y+a.Height-5,5,0,Math.PI/2,!1),n.moveTo(a.X+5,a.Y+a.Height),n.arc(a.X+5,a.Y+a.Height-5,5,Math.PI/2,Math.PI,!1),n.lineTo(a.X,a.Y+5),n.stroke(),n.strokeStyle="#657582",n.beginPath(),n.moveTo(a.X+5,a.Y+a.Height),n.lineTo(a.X+a.Width-5,a.Y+a.Height),n.stroke();var i=(a.CurrentValue-a.MinValue)*a.Width/(a.MaxValue-a.MinValue),o=n.createLinearGradient(a.X,a.Y,a.X,a.Y+a.Height),l=parseInt(a.Color.substr(1,2),16),s=parseInt(a.Color.substr(3,2),16),d=parseInt(a.Color.substr(5,2),16);o.addColorStop(0,"#"+getlowcomp(l)+getlowcomp(s)+getlowcomp(d)),o.addColorStop(.5,a.Color),o.addColorStop(1,"#"+gethighcomp(l)+gethighcomp(s)+gethighcomp(d)),n.fillStyle=o,n.beginPath(),n.moveTo(a.X+2,a.Y+7),n.arc(a.X+7,a.Y+7,5,Math.PI,270*Math.PI/180,!1),n.lineTo(a.X+i-7,a.Y+2),n.arc(a.X+i-7,a.Y+7,5,270*Math.PI/180,2*Math.PI,!1),n.lineTo(a.X+i-2,a.Y+a.Height-7),n.arc(a.X+i-7,a.Y+a.Height-7,5,0,Math.PI/2,!1),n.lineTo(a.X+7,a.Y+a.Height-2),n.arc(a.X+7,a.Y+a.Height-7,5,Math.PI/2,Math.PI,!1),n.closePath(),n.fill()}CCLProgressBar.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Color:null,MaxValue:null,MinValue:null,CurrentValue:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Color,this.MaxValue,this.MinValue,this.CurrentValue,this.Tag,this.TabStopIndex}};var sliderPropsArray=new Array;function getSliderProps(e,t){for(var a=0;a<sliderPropsArray.length;a++)if(sliderPropsArray[a].CanvasID==e&&sliderPropsArray[a].WindowID==t)return sliderPropsArray[a]}function drawSlider(e,t){var a=getSliderProps(e,t),n=getCtx(e);n.strokeStyle="#a3aeb9",n.beginPath(),n.rect(a.X,a.Y+a.HandleHeight/2-1,a.Width,3),n.stroke(),n.strokeStyle="#e6eff7",n.beginPath(),n.moveTo(a.X+1,a.Y+a.HandleHeight/2),n.lineTo(a.X+a.Width-1,a.Y+a.HandleHeight/2),n.stroke();var r=(a.CurrentValue-a.MinValue)*a.Width/(a.MaxValue-a.MinValue)-a.HandleWidth/2,i=n.createLinearGradient(a.X+r,a.Y,a.X+r,a.Y+a.HandleHeight);i.addColorStop(0,"#fdfdfd"),i.addColorStop(1,"#ced4d9"),n.fillStyle=i,n.beginPath(),n.rect(a.X+r,a.Y,a.HandleWidth,a.HandleHeight),n.fill(),n.strokeStyle="#a0abb7",n.beginPath(),n.moveTo(a.X+r+1,a.Y),n.lineTo(a.X+r+a.HandleWidth-1,a.Y),n.stroke(),n.strokeStyle="#8094a4",n.beginPath(),n.moveTo(a.X+r,a.Y+1),n.lineTo(a.X+r,a.Y+a.HandleHeight-1),n.moveTo(a.X+r+a.HandleWidth,a.Y+1),n.lineTo(a.X+r+a.HandleWidth,a.Y+a.HandleHeight-1),n.stroke(),n.strokeStyle="#617584",n.beginPath(),n.moveTo(a.X+r+1,a.Y+a.HandleHeight),n.lineTo(a.X+r+a.HandleWidth-1,a.Y+a.HandleHeight),n.stroke()}function sliderMouseDown(e,t){getSliderProps(e,t).MouseDownState=1}function sliderMouseMove(e,t,a){var n=getSliderProps(e,t);if(1==n.MouseDownState){var r=a.calcX;r<n.X?n.CurrentValue=n.MinValue:r>n.X+n.Width?n.CurrentValue=n.MaxValue:n.CurrentValue=n.MinValue+(r-n.X)*(n.MaxValue-n.MinValue)/n.Width}}function sliderMouseUp(e,t){getSliderProps(e,t).MouseDownState=0}function CCLSlider(){}function createSlider(e,t,a,n,r,i,o,l,s,d,u,h,g){var c=createWindow(e,a,n,r,i,o,-1,"Slider",t,-1,g);return sliderPropsArray.push({CanvasID:e,WindowID:c,X:a,Y:n,Width:r,Height:i,HandleWidth:l,HandleHeight:i,MaxValue:s,MinValue:d,CurrentValue:u,MouseDownState:0,Tag:h}),registerWindowDrawFunction(c,drawSlider,e),registerMouseDownFunction(c,sliderMouseDown,e),registerMouseUpFunction(c,sliderMouseUp,e),registerMouseMoveFunction(c,sliderMouseMove,e),g>0&&registerKeyDownFunction(e,function(){},c),c}CCLSlider.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,HandleWidth:null,HandleHeight:null,MaxValue:null,MinValue:null,MouseDownState:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Value:null,Initialize:function(){return createSlider(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.HandleWidth,this.MaxValue,this.MinValue,this.Value,this.Tag,this.TabStopIndex)}};var datePickerPropsArray=new Array;function getDatePickerPropsByTextBoxAreaWindowID(e,t){for(var a=0;a<datePickerPropsArray.length;a++)if(datePickerPropsArray[a].CanvasID==e&&datePickerPropsArray[a].TextBoxAreaWindowID==t)return datePickerPropsArray[a]}function getDatePickerPropsByButtonWindowID(e,t){for(var a=0;a<datePickerPropsArray.length;a++)if(datePickerPropsArray[a].CanvasID==e&&datePickerPropsArray[a].ButtonWindowID==t)return datePickerPropsArray[a]}function getDatePickerPropsByCalenderWindowID(e,t){for(var a=0;a<datePickerPropsArray.length;a++)if(datePickerPropsArray[a].CanvasID==e&&datePickerPropsArray[a].CalenderWindowID==t)return datePickerPropsArray[a]}function CCLDatePicker(){}function createDatePicker(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b,H,v,m,P,y,B,L,M,A,F,X,Y,k,R,E,N,G,V){var O=createWindow(e,a,n,r-i,i,o,-1,"DatePickerTextArea",t+"DatePickerTextArea",-1),U=createWindow(e,a+r-i,n,i,i,o,-1,"DatePickerButton",t+"DatePickerButton",-1),K=createCalendar(e,t+"DatePickerCalender",a,n+i,r,N,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b,H,v,m,P,y,B,L,M,function(){var t=getDatePickerPropsByTextBoxAreaWindowID(e,O),a=getCalenderProps(e,t.CalenderWindowID);null!=A&&A(e,t.CalenderWindowID,a.SelectedDay),setHiddenWindowStatus(e,t.CalenderWindowID,1)},F,X,Y);return datePickerPropsArray.push({CanvasID:e,WindowID:O,TextBoxAreaWindowID:O,ButtonWindowID:U,CalenderWindowID:K,X:a,Y:n,Width:r,Height:i,TextBoxAreaTextColor:k,TextBoxAreaTextHeight:R,TextBoxAreaTextFontString:E,Tag:G}),registerModalWindow(e,K),registerHiddenWindow(e,K,1),registerClickFunction(U,function(t,a){var n=getDatePickerPropsByButtonWindowID(t,a);1==checkIfHiddenWindow(e,n.CalenderWindowID)?setHiddenWindowStatus(e,n.CalenderWindowID,0):setHiddenWindowStatus(e,n.CalenderWindowID,1);var r=getCalenderProps(t,n.CalenderWindowID);invalidateRect(t,-1,r.X,r.Y,r.Width,r.Height)},e),registerWindowDrawFunction(O,function(e,t){var a=getDatePickerPropsByTextBoxAreaWindowID(e,t),n=getCalenderProps(e,a.CalenderWindowID),r=getCtx(e);if(r.strokeStyle="#a3aeb9",r.beginPath(),r.rect(a.X,a.Y,a.Width-a.Height,a.Height),r.stroke(),null!=n.SelectedDay){r.fillStyle=a.TextBoxAreaTextColor,r.font=a.TextBoxAreaTextFontString;var i=n.SelectedDay.getDate().toString()+"/"+(n.SelectedDay.getMonth()+1).toString()+"/"+n.SelectedDay.getFullYear().toString();r.fillText(i,a.X+4,a.Y+a.Height-(a.Height-a.TextBoxAreaTextHeight)/2)}},e),registerWindowDrawFunction(U,function(e,t){var a=getDatePickerPropsByButtonWindowID(e,t),n=getCtx(e);n.lineCap="butt",n.strokeStyle="#3c7fb1",n.beginPath(),n.rect(a.X+a.Width-a.Height,a.Y,a.Height,a.Height),n.stroke(),n.fillStyle="#dcf0fb",n.beginPath(),n.rect(a.X+a.Width-a.Height+1,a.Y+1,a.Height/2-2,a.Height-2),n.fill(),n.strokeStyle="#c0e4f8",n.moveTo(a.X+a.Width-a.Height/2+1,a.Y+1),n.lineTo(a.X+a.Width-a.Height/2+1,a.Y+a.Height-1),n.stroke(),n.fillStyle="#a7d8f3",n.beginPath(),n.rect(a.X+a.Width-a.Height/2+1,a.Y+1,a.Height/2-2,a.Height-2),n.fill();var r=n.createLinearGradient(a.X+a.Width-a.Height/2-1,a.Y+a.Height/2-1,a.X+a.Width-a.Height/2-1,a.Y+a.Height/2+3);r.addColorStop(0,"#0d2a3a"),r.addColorStop(1,"#4e9ac4"),n.fillStyle=r,n.beginPath(),n.moveTo(a.X+a.Width-a.Height/2-4,a.Y+a.Height/2-1),n.lineTo(a.X+a.Width-a.Height/2+3,a.Y+a.Height/2-1),n.lineTo(a.X+a.Width-a.Height/2-1,a.Y+a.Height/2+3),n.closePath(),n.fill()},e),registerModalWindow(e,K),registerHiddenWindow(e,K,1),registerLostFocusFunction(e,K,function(){datePickerCalenderWindowLostFocus(e,K)}),registerLostFocusFunction(e,O,function(){datePickerTextBoxWindowLostFocus(e,O)}),registerLostFocusFunction(e,U,function(){datePickerButtonLostFocus(e,U)}),O}function datePickerCalenderWindowLostFocus(e,t){var a=getDatePickerPropsByCalenderWindowID(e,t);0==doesWindowHaveFocus(e,a.TextBoxAreaWindowID)&&0==doesWindowHaveFocus(e,a.ButtonWindowID)&&doingEventForWindowID!=a.CalenderWindowID&&setHiddenWindowStatus(e,a.CalenderWindowID,1)}function datePickerTextBoxWindowLostFocus(e,t){var a=getDatePickerPropsByTextBoxAreaWindowID(e,t);0==doesWindowHaveFocus(e,a.CalenderWindowID)&&0==doesWindowHaveFocus(e,a.ButtonWindowID)&&doingEventForWindowID!=a.CalenderWindowID&&setHiddenWindowStatus(e,a.CalenderWindowID,1)}function datePickerButtonLostFocus(e,t){var a=getDatePickerPropsByButtonWindowID(e,t);0==doesWindowHaveFocus(e,a.CalenderWindowID)&&0==doesWindowHaveFocus(e,a.TextBoxAreaWindowID)&&doingEventForWindowID!=a.CalenderWindowID&&setHiddenWindowStatus(e,a.CalenderWindowID,1)}CCLDatePicker.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,TextBoxAreaTextColor:null,TextBoxAreaTextHeight:null,TextBoxAreaTextFontString:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,VisibleMonth:null,VisibleYear:null,SelectedDay:null,DayCellWidth:null,DayCellHeight:null,HeaderHeight:null,TextHeaderColor:null,TextHeaderHeight:null,TextHeaderFontString:null,DayDateActiveColor:null,DayDateActiveTextHeight:null,DayDateActiveTextFontString:null,DayDateInactiveTextColor:null,DayDateInactiveTextHeight:null,DayDateInactiveTextFontString:null,SelectedDayTextColor:null,SelectedDayTextHeight:null,SelectedDayTextFontString:null,SelectedDayHighLightColor:null,TodayTextColor:null,TodayTextHeight:null,TodayTextFontString:null,TodayHighLightColor:null,OnDayClickFunction:null,HeaderBackgroundColor:null,BodyBackgroundColor:null,MouseOverHightLightColor:null,MouseHoverDate:null,DayLabelTextColor:null,DayLabelTextHeight:null,Tag:null,DayLabelTextFontString:null,CalenderHeight:null,Initialize:function(){return this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.VisibleMonth,this.VisibleYear,this.SelectedDay,this.DayCellWidth,this.DayCellHeight,this.HeaderHeight,this.HeaderBackgroundColor,this.BodyBackgroundColor,this.TextHeaderColor,this.TextHeaderHeight,this.TextHeaderFontString,this.DayDateActiveColor,this.DayDateActiveTextHeight,this.DayDateActiveTextFontString,this.DayDateInactiveTextColor,this.DayDateInactiveTextHeight,this.DayDateInactiveTextFontString,this.SelectedDayTextColor,this.SelectedDayTextHeight,this.SelectedDayTextFontString,this.SelectedDayHighLightColor,this.TodayTextColor,this.TodayTextHeight,this.TodayTextFontString,this.TodayHighLightColor,this.MouseOverHightLightColor,this.OnDayClickFunction,this.DayLabelTextColor,this.DayLabelTextHeight,this.DayLabelTextFontString,this.TextBoxAreaTextColor,this.TextBoxAreaTextHeight,this.TextBoxAreaTextFontString,this.CalenderHeight,this.Tag,this.TabStopIndex}};var panelPropsArray=new Array;function getPanelProps(e,t){for(var a=0;a<panelPropsArray.length;a++)if(panelPropsArray[a].CanvasID==e&&panelPropsArray[a].WindowID==t)return panelPropsArray[a]}function CCLPanel(){}function createPanel(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b,H,v){var m=createWindow(e,a,n,1==g?1==W?r:c:r,1==g?1==W?i:D:i,o,-1,"Panel",t,-1,v);return panelPropsArray.push({CanvasID:e,WindowID:m,X:a,Y:n,Width:r,Height:i,ExpandedWidth:r,ExpandedHeight:i,CollapsedWidth:c,CollapsedHeight:w,IsCollapsable:g,HasBorder:l,BorderColor:s,HasBackgroundGradient:d,BackgroundStartColor:u,BackgroundEndColor:h,HeaderHeight:D,HeaderBackgroundStartColor:f,HeaderBackgroundEndColor:T,ExpandCollapseButtonColor:S,IsExpanded:W,ExpandCollapseButtonRadius:b,PanelLabel:I,PanelLabelTextColor:C,PanelLabelTextHeight:x,PanelLabelTextFontString:p,OriginalWidth:r,OriginalHeight:i,Tag:H}),registerWindowDrawFunction(m,function(e,t){var a=getPanelProps(e,t),n=getCtx(e);if(1==a.IsCollapsable){if(1==a.IsExpanded){if(1==a.HasBackgroundGradient)(d=n.createLinearGradient(a.X,a.Y,a.X,a.Y+a.Height)).addColorStop(0,a.BackgroundStartColor),d.addColorStop(1,a.BackgroundEndColor),n.fillStyle=d,n.beginPath(),n.rect(a.X,a.Y,a.Width,a.Height),n.fill();1==a.HasBorder&&(n.strokeStyle=a.BorderColor,n.beginPath(),n.rect(a.X,a.Y,a.Width,a.Height),n.stroke())}else 1==a.HasBorder&&(n.strokeStyle=a.BorderColor,n.beginPath(),n.rect(a.X,a.Y,a.Width,a.HeaderHeight),n.stroke());var r=n.createLinearGradient(a.X,a.Y,a.X,a.Y+a.HeaderHeight);r.addColorStop(0,a.HeaderBackgroundStartColor),r.addColorStop(1,a.HeaderBackgroundEndColor),n.fillStyle=r,n.beginPath(),n.rect(a.X,a.Y,a.Width,a.HeaderHeight),n.fill(),n.fillStyle=a.PanelLabelTextColor,n.font=a.PanelLabelTextFontString,n.fillText(a.PanelLabel,a.X+(a.Width-a.ExpandCollapseButtonRadius-n.measureText(a.PanelLabel).width)/2,a.Y+a.HeaderHeight-(a.HeaderHeight-a.PanelLabelTextHeight)/2);var i=n.createRadialGradient(a.X+a.Width-4-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2-a.ExpandCollapseButtonRadius,0,a.X+a.Width-4-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2-a.ExpandCollapseButtonRadius,a.ExpandCollapseButtonRadius),o=parseInt(a.ExpandCollapseButtonColor.substr(1,2),16),l=parseInt(a.ExpandCollapseButtonColor.substr(3,2),16),s=parseInt(a.ExpandCollapseButtonColor.substr(5,2),16);i.addColorStop(0,"#"+gethighcomp(o)+gethighcomp(l)+gethighcomp(s)),i.addColorStop(.9,a.ExpandCollapseButtonColor),i.addColorStop(1,"#"+getlowcomp(o)+getlowcomp(l)+getlowcomp(s)),n.fillStyle=i,n.beginPath(),n.arc(a.X+a.Width-4-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2-a.ExpandCollapseButtonRadius,a.ExpandCollapseButtonRadius,0,2*Math.PI,!1),n.fill(),n.strokeStyle="#000000",n.beginPath(),1==a.IsExpanded?(n.moveTo(a.X+a.Width-8-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2+4-a.ExpandCollapseButtonRadius),n.lineTo(a.X+a.Width-4-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2-2-a.ExpandCollapseButtonRadius),n.lineTo(a.X+a.Width-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2+4-a.ExpandCollapseButtonRadius),n.moveTo(a.X+a.Width-8-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2+1-a.ExpandCollapseButtonRadius),n.lineTo(a.X+a.Width-4-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2-5-a.ExpandCollapseButtonRadius),n.lineTo(a.X+a.Width-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2+1-a.ExpandCollapseButtonRadius)):(n.moveTo(a.X+a.Width-8-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2-4-a.ExpandCollapseButtonRadius),n.lineTo(a.X+a.Width-4-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2+2-a.ExpandCollapseButtonRadius),n.lineTo(a.X+a.Width-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2-4-a.ExpandCollapseButtonRadius),n.moveTo(a.X+a.Width-8-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2-1-a.ExpandCollapseButtonRadius),n.lineTo(a.X+a.Width-4-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2+5-a.ExpandCollapseButtonRadius),n.lineTo(a.X+a.Width-a.ExpandCollapseButtonRadius,a.Y+a.HeaderHeight-(a.HeaderHeight-2*a.ExpandCollapseButtonRadius)/2-1-a.ExpandCollapseButtonRadius)),n.stroke()}else{var d;if(1==a.HasBackgroundGradient)(d=n.createLinearGradient(a.X,a.Y,a.X,a.Y+a.Height)).addColorStop(0,a.BackgroundStartColor),d.addColorStop(1,a.BackgroundEndColor),n.fillStyle=d,n.beginPath(),n.rect(a.X,a.Y,a.Width,a.Height),n.fill();1==a.HasBorder&&(n.strokeStyle=a.BorderColor,n.beginPath(),n.rect(a.X,a.Y,a.Width,a.Height),n.stroke())}},e),registerClickFunction(m,1==g?function(e,t,a){var n=getPanelProps(e,t),r=getWindowProps(e,t);if(r){var i=a.calcX,o=a.calcY;i>n.X+n.Width-4-2*n.ExpandCollapseButtonRadius&&i<n.X+n.Width-4&&o>n.Y+ +(n.HeaderHeight-2*n.ExpandCollapseButtonRadius)/2&&o<n.Y+n.HeaderHeight-(n.HeaderHeight-2*n.ExpandCollapseButtonRadius)/2&&(1==n.IsExpanded?(n.IsExpanded=0,n.Width=n.CollapsedWidth,n.Height=n.HeaderHeight+n.CollapsedHeight,r.Width=n.CollapsedWidth,r.Height=n.HeaderHeight+n.CollapsedHeight):(n.IsExpanded=1,n.Width=n.OriginalWidth,n.Height=n.OriginalHeight,r.Width=n.OriginalWidth,r.Height=n.OriginalHeight)),invalidateRect(e,-1,n.X,n.Y,n.OriginalWidth,n.OriginalHeight)}}:function(){},e),registerMouseDownFunction(m,function(){},e),registerMouseMoveFunction(m,function(){},e),registerMouseUpFunction(m,function(){},e),v>0&&registerKeyDownFunction(e,function(){},m),m}CCLPanel.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,ExpandedWidth:null,ExpandedHeight:null,CollapsedWidth:null,CollapsedHeight:null,IsCollapsable:null,HasBorder:null,BorderColor:null,HasBackgroundGradient:null,BackgroundStartColor:null,BackgroundEndColor:null,HeaderHeight:null,HeaderBackgroundStartColor:null,HeaderBackgroundEndColor:null,ExpandCollapseButtonColor:null,IsExpanded:null,ExpandCollapseButtonRadius:null,PanelLabel:null,PanelLabelTextColor:null,PanelLabelTextHeight:null,PanelLabelTextFontString:null,OriginalWidth:null,OriginalHeight:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.HasBorder,this.BorderColor,this.HasBackgroundGradient,this.BackgroundStartColor,this.BackgroundEndColor,this.IsCollapsable,this.CollapsedWidth,this.CollapsedHeight,this.PanelLabel,this.PanelLabelTextColor,this.PanelLabelTextHeight,this.PanelLabelTextFontString,this.HeaderBackgroundStartColor,this.HeaderBackgroundEndColor,this.HeaderHeight,this.ExpandCollapseButtonColor,this.IsExpanded,this.ExpandCollapseButtonRadius,this.Tag,this.TabStopIndex}};var barGraphsPropsArray=new Array;function getBarGraphProps(e,t){for(var a=0;a<barGraphsPropsArray.length;a++)if(barGraphsPropsArray[a].CanvasID==e&&barGraphsPropsArray[a].WindowID==t)return barGraphsPropsArray[a]}function CCLBarGraph(){}function createBarGraph(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b){var H=createWindow(e,a,n,r,i,o,-1,"BarGraph",t,-1,b);return barGraphsPropsArray.push({CanvasID:e,WindowID:H,X:a,Y:n,Width:r,Height:i,Data:l,MaxValue:s,NumMarksY:d,Title:u,TitleTextColor:h,TitleTextHeight:g,TitleTextFontString:c,BarWidth:w,BarLabelsWithBoundingBoxes:new Array,H:i-C-8-20,AxisLabelsTextHeight:C,AxisLabelsTextFontString:x,AxisLabelsTextColor:I,MarginLeft:p,GapBetweenBars:f,BarClickFunction:T,AlreadyUnregisteredAnimation:0,HasLegend:D,MarginRight:S,Tag:W}),registerClickFunction(H,function(e,t,a){for(var n=getBarGraphProps(e,t),r=a.calcX,i=a.calcY,o=0;o<n.BarLabelsWithBoundingBoxes.length;o++)if(r>=n.BarLabelsWithBoundingBoxes[o].X&&r<=n.BarLabelsWithBoundingBoxes[o].X+n.BarLabelsWithBoundingBoxes[o].Width&&i>=n.BarLabelsWithBoundingBoxes[o].Y&&i<=n.BarLabelsWithBoundingBoxes[o].Y+n.BarLabelsWithBoundingBoxes[o].Height&&null!=n.BarClickFunction)return void n.BarClickFunction(e,t,o)},e),registerWindowDrawFunction(H,function(e,t){var a=getBarGraphProps(e,t),n=getCtx(e),r=a.H;0==a.AlreadyUnregisteredAnimation&&r<a.TitleTextHeight+8&&(a.AlreadyUnregisteredAnimation=1,unregisterAnimatedWindow(e,t)),n.clearRect(0,0,canvas.width,canvas.height),n.save(),n.fillStyle=a.TitleTextColor,n.font=a.TitleTextFontString,n.lineWidth=2,n.fillText(a.Title,a.X+(a.Width-n.measureText(a.Title).width)/2,a.Y+a.TitleTextHeight+4),n.lineWidth=1,n.fillStyle=a.AxisLabelsTextColor,n.font=a.AxisLabelsTextFontString;var i=a.Height-a.TitleTextHeight-a.AxisLabelsTextHeight-16;n.beginPath(),n.moveTo(a.X+a.MarginLeft,a.Y+a.TitleTextHeight+8+i),n.lineTo(a.X+a.MarginLeft,a.Y+a.TitleTextHeight+8),n.stroke();for(var o=0;o<a.NumMarksY;o++){var s=a.MaxValue/a.NumMarksY*o;s=Math.round(100*s)/100;var d=n.measureText(s.toString()).width,u=i/a.NumMarksY;n.fillText(s.toString(),a.X+a.MarginLeft-d-5,a.Y+a.TitleTextHeight+8+a.AxisLabelsTextHeight/2+i-o*u),n.beginPath(),n.moveTo(a.X+a.MarginLeft,a.Y+a.TitleTextHeight+8+i-o*u),n.lineTo(a.X+a.MarginLeft+a.Data.length*(a.BarWidth+a.GapBetweenBars)+a.GapBetweenBars,a.Y+a.TitleTextHeight+8+i-o*u),n.stroke()}a.BarLabelsWithBoundingBoxes=new Array;for(var h=0;h<a.Data.length;h++){if(1!=a.HasLegend){var g=n.measureText(a.Data[h][0]).width;n.fillStyle=a.AxisLabelsTextColor,n.font=a.AxisLabelsTextFontString,g<a.BarWidth?n.fillText(a.Data[h][0],a.X+a.MarginLeft+a.GapBetweenBars+h*(a.BarWidth+a.GapBetweenBars)+(a.BarWidth-g)/2,a.Y+a.Height-4):n.fillText(a.Data[h][0],a.X+a.MarginLeft+a.GapBetweenBars+h*(a.BarWidth+a.GapBetweenBars)-(g-a.BarWidth)/2,a.Y+a.Height-4)}drawrect(e,t,n,a,h,i)}if(1==a.HasLegend)for(var c=0;c<a.Data.length;c++)n.fillStyle=l[c][2],n.fillRect(a.X+a.Width-a.MarginRight,a.Y+a.Height-8-a.AxisLabelsTextHeight-c*(8+a.AxisLabelsTextHeight),30,a.AxisLabelsTextHeight),n.fillText(l[c][0],a.X+a.Width-a.MarginRight+35,a.Y+a.Height-8-c*(8+a.AxisLabelsTextHeight));r>=a.TitleTextHeight+8&&(a.H-=5),n.restore()},e),registerAnimatedWindow(e,H),b>0&&registerKeyDownFunction(e,function(){},H),H}function drawrect(e,t,a,n,r,i){var o=n.H;n.H<n.TitleTextHeight+8+i-i*n.Data[r][1]/n.MaxValue&&(o=i-i*n.Data[r][1]/n.MaxValue),n.BarLabelsWithBoundingBoxes.push({X:n.X+n.MarginLeft+n.GapBetweenBars+r*(n.BarWidth+n.GapBetweenBars),Y:n.Y+n.TitleTextHeight+8+o,Width:n.BarWidth,Height:i-o});var l=a.createLinearGradient(n.X,n.Y+n.TitleTextHeight+8,n.X,n.Y+n.Height-n.AxisLabelsTextHeight-8),s=n.Data[r][2],d=parseInt(s.substr(1,2),16),u=parseInt(s.substr(3,2),16),h=parseInt(s.substr(5,2),16);l.addColorStop(0,"#"+getlowcomp(d)+getlowcomp(u)+getlowcomp(h)),l.addColorStop(.5,s),l.addColorStop(1,"#"+gethighcomp(d)+gethighcomp(u)+gethighcomp(h)),a.fillStyle=l,a.shadowOffsetX=5,a.shadowOffsetY=5,a.shadowBlur=5,a.shadowColor="#"+getlowcomp(d)+getlowcomp(u)+getlowcomp(h),a.beginPath(),a.moveTo(n.X+n.MarginLeft+n.GapBetweenBars+r*(n.BarWidth+n.GapBetweenBars),n.Y+n.TitleTextHeight+8+5+o),a.arc(n.X+n.MarginLeft+n.GapBetweenBars+r*(n.BarWidth+n.GapBetweenBars)+5,n.Y+n.TitleTextHeight+8+5+o,5,Math.PI,Math.PI/180*270,!1),a.lineTo(n.X+n.MarginLeft+n.GapBetweenBars+n.BarWidth-5+r*(n.BarWidth+n.GapBetweenBars),n.Y+n.TitleTextHeight+8+o),a.arc(n.X+n.MarginLeft+n.GapBetweenBars+n.BarWidth-5+r*(n.BarWidth+n.GapBetweenBars),n.Y+n.TitleTextHeight+8+5+o,5,Math.PI/180*270,0,!1),a.lineTo(n.X+n.MarginLeft+n.GapBetweenBars+n.BarWidth+r*(n.BarWidth+20),n.Y+n.TitleTextHeight+8+i),a.lineTo(n.X+n.MarginLeft+n.GapBetweenBars+r*(n.BarWidth+n.GapBetweenBars),n.Y+n.TitleTextHeight+8+i),a.closePath(),a.fill(),a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0,a.shadowColor="#FFFFFF",(l=a.createLinearGradient(0,0,50,300)).addColorStop(0,"#FFFFFF"),l.addColorStop(.5,"#000000"),l.addColorStop(1,"#FFFFFF"),a.fillStyle=l,a.globalAlpha=.1,a.beginPath(),a.moveTo(n.X+n.MarginLeft+n.GapBetweenBars+r*(n.BarWidth+n.GapBetweenBars)+5,n.Y+n.TitleTextHeight+8+5+o),a.arc(n.X+n.MarginLeft+n.GapBetweenBars+r*(n.BarWidth+n.GapBetweenBars)+10,n.Y+n.TitleTextHeight+8+10+o,5,Math.PI,Math.PI/180*270,!1),a.lineTo(n.X+n.MarginLeft+n.GapBetweenBars+n.BarWidth-10+r*(n.BarWidth+n.GapBetweenBars),n.Y+n.TitleTextHeight+8+o+5),a.arc(n.X+n.MarginLeft+n.GapBetweenBars+n.BarWidth-10+r*(n.BarWidth+n.GapBetweenBars),n.Y+n.TitleTextHeight+8+10+o,5,Math.PI/180*270,0,!1),a.lineTo(n.X+n.MarginLeft+n.GapBetweenBars+n.BarWidth+r*(n.BarWidth+20)-5,n.Y+n.TitleTextHeight+8+i),a.lineTo(n.X+n.MarginLeft+n.GapBetweenBars+r*(n.BarWidth+n.GapBetweenBars)+5,n.Y+n.TitleTextHeight+8+i),a.closePath(),a.fill(),a.globalAlpha=1;var g=a.measureText(n.Data[r][1].toString()).width;g<n.BarWidth?a.fillText(n.Data[r][1].toString(),n.X+n.MarginLeft+n.GapBetweenBars+r*(n.BarWidth+n.GapBetweenBars)+(n.BarWidth+-g)/2,n.Y+n.TitleTextHeight+8+n.AxisLabelsTextHeight+o+(i-o)/2):a.fillText(n.Data[r][1].toString(),n.X+n.MarginLeft+n.GapBetweenBars+r*(n.BarWidth+n.GapBetweenBars)-(g-n.BarWidth)/2,n.Y+n.TitleTextHeight+8+n.AxisLabelsTextHeight+o+(i-o)/2)}CCLBarGraph.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,MaxValue:null,NumMarksY:null,Title:null,TitleTextColor:null,TitleTextHeight:null,TitleTextFontString:null,BarWidth:null,AxisLabelsTextHeight:null,AxisLabelsTextFontString:null,AxisLabelsTextColor:null,MarginLeft:null,GapBetweenBars:null,BarClickFunction:null,AlreadyUnregisteredAnimation:null,HasLegend:null,MarginRight:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createBarGraph(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.MaxValue,this.NumMarksY,this.Title,this.TitleTextColor,this.TitleTextHeight,this.TitleTextFontString,this.BarWidth,this.AxisLabelsTextColor,this.AxisLabelsTextHeight,this.AxisLabelsTextFontString,this.MarginLeft,this.GapBetweenBars,this.BarClickFunction,this.HasLegend,this.MarginRight,this.Tag,this.TabStopIndex)}};var pieChartsPropsArray=new Array;function getPieChartProps(e,t){for(var a=0;a<barGraphsPropsArray.length;a++)if(pieChartsPropsArray[a].CanvasID==e&&pieChartsPropsArray[a].WindowID==t)return pieChartsPropsArray[a]}function CCLPieChart(){}function createPieChart(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x){for(var p=createWindow(e,a,n,r,i,o,-1,"PieChart",t,-1,x),f=0,T=0;T<l.length;T++)f+=l[T][1];return pieChartsPropsArray.push({CanvasID:e,WindowID:p,X:a,Y:n,Width:r,Height:i,Data:l,Title:s,TitleTextColor:d,TitleTextHeight:u,TitleTextFontString:h,CurrentRadius:20,TotalValue:f,LabelTextColor:g,LabelTextHeight:c,LabelTextFontString:w,AlreadyUnregisteredAnimation:0,DeltaI:-1,DeltaX:0,DeltaY:0,SliceClickFunction:I,Tag:C}),registerClickFunction(p,function(e,t,a){for(var n=getPieChartProps(e,t),r=n.Data,i=(n.Height-n.TitleTextHeight-24-2*n.LabelTextHeight)/2,o=0,l=0;l<r.length;l++)o+=r[l][1];var s=a.calcX,d=a.calcY,u=-1,h=n.X+(n.Width-2*i)/2+i,g=n.Y+16+n.TitleTextHeight+n.LabelTextHeight+i;i*i>(s-h)*(s-h)+(d-g)*(d-g)&&(s>h&&d==g?u=0:s>h&&d>g?u=180*Math.atan((d-g)/(s-h))/Math.PI:s<h&&d>g?u=180-180*Math.atan((d-g)/(s-h))/Math.PI:s<h&&d==g?u=180:s<h&&d<g?u=180+180*Math.atan((d-g)/(s-h))/Math.PI:s==h&&d<g?u=270:s>h&&d<g&&(u=360+180*Math.atan((d-g)/(s-h))/Math.PI));var c=0,w=0,I=0;for(l=0;l<r.length;l++){c+=360*r[l][1]/o;var C=0,x=0;if(u>=0&&w<=u&&c>=u){var p=w+(c-w)/2;0==p?(C=40,x=0):p>0&&p<90?(C=40*Math.cos(p*(Math.PI/180)),x=40*Math.sin(p*(Math.PI/180))):90==p?(C=0,x=40):p>90&&p<180?(C=-40*Math.cos((180-p)*(Math.PI/180)),x=40*Math.sin((180-p)*(Math.PI/180))):180==p?(C=-40,x=0):p>180&&p<270?(C=-40*Math.cos((180-p)*(Math.PI/180)),x=40*Math.sin((180-p)*(Math.PI/180))):270==p?(C=0,x=-40):p>270&&p<360&&(C=40*Math.cos((360-p)*(Math.PI/180)),x=-40*Math.sin((360-p)*(Math.PI/180)))}0==C&&0==x||(n.DeltaX=C,n.DeltaY=x,n.DeltaI=l,I=1,null!=n.SliceClickFunction&&n.SliceClickFunction(e,t,l)),c<90?(lastx=h+Math.cos(Math.PI/180*c)*i,lasty=g+Math.sin(Math.PI/180*c)*i):90==c?(lastx=h,lasty=g+i):c>90&&c<180?(lastx=h-Math.cos(Math.PI/180*(180-c))*i,lasty=g+Math.sin(Math.PI/180*(180-c))*i):180==c?(lastx=h-i,lasty=g):c>180&&c<270?(lastx=h+Math.cos(Math.PI/180*(c-180))*i,lasty=g+Math.sin(Math.PI/180*(c-180))*i):270==c?(lastx=h,lasty=g-i):c>270&&c<360&&(lastx=h-Math.cos(Math.PI/180*(360-c))*i,lasty=g+Math.sin(Math.PI/180*(360-c))*i),w=c}0==I&&(n.DeltaX=0,n.DeltaY=0,n.DeltaI=-1)},e),registerWindowDrawFunction(p,function(e,t){var a=getPieChartProps(e,t),n=a.CurrentRadius;0==a.AlreadyUnregisteredAnimation&&n>=(a.Height-a.TitleTextHeight-24-2*a.LabelTextHeight)/2&&(a.AlreadyUnregisteredAnimation=1,unregisterAnimatedWindow(e,t));var r=a.Data,i=a.X+(a.Width-2*n)/2+n,o=a.Y+16+a.TitleTextHeight+a.LabelTextHeight+n,l=getCtx(e);l.save(),l.fillStyle=a.TitleTextColor,l.font=a.TitleTextFontString,l.fillText(a.Title,a.X+(a.Width-l.measureText(a.Title).width)/2,a.Y+4+a.TitleTextHeight),l.font=a.LabelTextFontString;for(var s=0,d=0,u=0;u<r.length;u++){s+=100*r[u][1]*360/(100*f);var h=parseInt(r[u][2].substr(1,2),16),g=parseInt(r[u][2].substr(3,2),16),c=parseInt(r[u][2].substr(5,2),16),w=l.createRadialGradient(i,o,0,i,o,n);w.addColorStop(0,"#"+gethighcomp(h)+gethighcomp(g)+gethighcomp(c)),w.addColorStop(.5,r[u][2]),w.addColorStop(1,"#"+getlowcomp(h)+getlowcomp(g)+getlowcomp(c)),l.fillStyle=w,l.beginPath(),l.moveTo(i+(a.DeltaI==u?a.DeltaX:0),o+(a.DeltaI==u?a.DeltaY:0)),l.arc(i+(a.DeltaI==u?a.DeltaX:0),o+(a.DeltaI==u?a.DeltaY:0),n,Math.PI/180*d,Math.PI/180*s,!1),l.closePath(),l.fill(),l.strokeStyle=r[u][2],s<90?(lastx=i+Math.cos(Math.PI/180*s)*n,lasty=o+Math.sin(Math.PI/180*s)*n):90==s?(lastx=i,lasty=o+n):s>90&&s<180?(lastx=i-Math.cos(Math.PI/180*(180-s))*n,lasty=o+Math.sin(Math.PI/180*(180-s))*n):180==s?(lastx=i-n,lasty=o):s>180&&s<270?(lastx=i+Math.cos(Math.PI/180*(s-180))*n,lasty=o+Math.sin(Math.PI/180*(s-180))*n):270==s?(lastx=i,lasty=o-n):s>270&&s<360&&(lastx=i-Math.cos(Math.PI/180*(360-s))*n,lasty=o+Math.sin(Math.PI/180*(360-s))*n),d=s}n<(a.Height-a.TitleTextHeight-24-2*a.LabelTextHeight)/2&&(a.CurrentRadius+=5);s=0,d=0;l.font=a.LabelTextFontString;for(u=0;u<r.length;u++)s+=100*r[u][1]*360/(100*f),l.fillStyle=r[u][2],drawPieChartLabels(l,r[u][0],s,d,n,f,r[u][1],r[u][2],0,0,i+(a.DeltaI==u?a.DeltaX:0),o+(a.DeltaI==u?a.DeltaY:0),a.LabelTextHeight),d=s;for(var I=0;I<r.length;I++)l.fillStyle=r[I][2],l.fillRect(a.X+a.Width-100,a.Y+a.Height-8-a.LabelTextHeight-I*(8+a.LabelTextHeight),30,a.LabelTextHeight),l.fillStyle=r[I][2],l.fillText(r[I][0],a.X+a.Width-100+35,a.Y+a.Height-8-I*(8+a.LabelTextHeight));l.restore()},e),registerAnimatedWindow(e,p),x>0&&registerKeyDownFunction(e,function(){},p),p}function drawPieChartLabels(e,t,a,n,r,i,o,l,s,d,u,h,g){e.fillStyle=l,(a-n)/2+n<90?e.fillText(o.toString(),u+5+s+Math.cos(Math.PI/180*((a-n)/2+n))*r,h+d+Math.sin(Math.PI/180*((a-n)/2+n))*r):(a-n)/2+n==90?e.fillText(o.toString(),u+5+s+Math.cos(Math.PI/180*((a-n)/2+n))*r,h+d+Math.sin(Math.PI/180*((a-n)/2+n))*r):(a-n)/2+n>90&&(a-n)/2+n<180?(tw=e.measureText(o.toString()).width,e.fillText(o.toString(),u+s-tw-Math.cos(Math.PI/180*(180-((a-n)/2+n)))*r,h+g+d+Math.sin(Math.PI/180*(180-((a-n)/2+n)))*r)):(a-n)/2+n==180?e.fillText(o.toString(),u+s-Math.cos(Math.PI/180*(180-((a-n)/2+n)))*r,h+g+d+Math.sin(Math.PI/180*(180-((a-n)/2+n)))*r):(a-n)/2+n>180&&(a-n)/2+n<270?(tw=e.measureText(o.toString()).width,e.fillText(o.toString(),u-g+s-tw-Math.cos(Math.PI/180*((a-n)/2+n-180))*r,h+d-Math.sin(Math.PI/180*((a-n)/2+n-180))*r)):(a-n)/2+n==270?(tw=e.measureText(o.toString()).width,e.fillText(o.toString(),u-g+s-tw-Math.cos(Math.PI/180*((a-n)/2+n-180))*r,h+d-Math.sin(Math.PI/180*((a-n)/2+n-180))*r)):(a-n)/2+n>270&&(a-n)/2+n<360&&e.fillText(o.toString(),u+g+s+Math.cos(Math.PI/180*(360-((a-n)/2+n)))*r,h+d-Math.sin(Math.PI/180*(360-((a-n)/2+n)))*r)}CCLPieChart.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,Title:null,TitleTextColor:null,TitleTextHeight:null,TitleTextFontString:null,LabelTextColor:null,LabelTextHeight:null,LabelTextFontString:null,SliceClickFunction:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createPieChart(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.Title,this.TitleTextColor,this.TitleTextHeight,this.TitleTextFontString,this.LabelTextColor,this.LabelTextHeight,this.LabelTextFontString,this.SliceClickFunction,this.Tag,this.TabStopIndex)}};var lineGraphsPropsArray=new Array;function getLineGraphProps(e,t){for(var a=0;a<lineGraphsPropsArray.length;a++)if(lineGraphsPropsArray[a].CanvasID==e&&lineGraphsPropsArray[a].WindowID==t)return lineGraphsPropsArray[a]}function CCLLineGraph(){}function createLineGraph(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W){for(var b=createWindow(e,a,n,r,i,o,-1,"LineGraph",t,-1,W),H=0,v=0;v<l.length;v++)l[v][0].length>H&&(H=l[v][0].length);return lineGraphsPropsArray.push({CanvasID:e,WindowID:b,X:a,Y:n,Width:r,Height:i,Data:l,XMaxValue:s,NumMarksX:d,YMaxValue:u,NumMarksY:h,Title:g,TitleTextColor:c,TitleTextHeight:w,TitleTextFontString:I,AxisLabelsTextColor:C,AxisLabelsTextHeight:x,AxisLabelsTextFontString:p,H:2,HMax:H,LineXYs:new Array,ClickFunction:f,AlreadyUnregisteredAnimation:0,MarginLeft:T,IsLabeledXValues:D,Tag:S}),registerClickFunction(b,function(e,t,a){var r=getLineGraphProps(e,t);if(null!=r.ClickFunction)for(var i=r.LineXYs,o=a.calcX,l=a.calcY,s=0;s<i.length;s++)for(var d=0;d<i[s].length-1;d++)o>=i[s][d][0]&&o<=i[s][d+1][0]&&(l<=i[s][d][1]&&l>=i[s][d+1][1]||l>=i[s][d][1]&&l<=i[s][d+1][1])&&(n=(i[s][d][1]-i[s][d+1][1])*(o-i[s][d][0])/(i[s][d][0]-i[s][d+1][0])+i[s][d][1])+4>l&&n-4<l&&r.ClickFunction(e,t,s)},e),registerWindowDrawFunction(b,function(t,a){var n=getLineGraphProps(t,a);0==n.AlreadyUnregisteredAnimation&&n.H>n.HMax&&(n.AlreadyUnregisteredAnimation=1,unregisterAnimatedWindow(t,a)),n.LineXYs=new Array;var r=getCtx(t);r.save(),r.fillStyle=n.TitleTextColor,r.font=n.TitleTextFontString,r.fillText(n.Title,n.X+(n.Width-r.measureText(n.Title).width)/2,n.Y+n.TitleTextHeight+4),r.fillStyle="#A0A0A0",r.font=n.AxisLabelsTextFontString,r.beginPath(),r.moveTo(n.X+n.MarginLeft,n.Y+n.Height-n.AxisLabelsTextHeight-8),r.lineTo(n.X+n.MarginLeft,n.Y+n.TitleTextHeight+8),r.stroke(),r.beginPath(),r.moveTo(n.X+n.MarginLeft,n.Y+n.Height-n.AxisLabelsTextHeight-8),r.lineTo(n.X+n.Width,n.Y+n.Height-n.AxisLabelsTextHeight-8),r.stroke();for(var i=!1,o=0;o<n.NumMarksX;o++)i?(r.fillStyle="#C0C0C0",i=!1):(r.fillStyle="#D0D0D0",i=!0),r.fillRect(n.X+n.MarginLeft+o*((n.Width-n.MarginLeft)/n.NumMarksX),n.Y+n.TitleTextHeight+8,(n.Width-n.MarginLeft)/n.NumMarksX,n.Height-n.TitleTextHeight-n.AxisLabelsTextHeight-16);r.fillStyle=n.AxisLabelsTextColor,r.font=n.AxisLabelsTextFontString,r.strokeStyle="#404040";for(o=0;o<n.NumMarksY;o++){var s=n.YMaxValue/n.NumMarksY*o,d=r.measureText(s.toString()).width;r.fillText(s.toString(),n.X+n.MarginLeft-4-d,n.Y+n.Height-n.AxisLabelsTextHeight-8-o*((n.Height-n.TitleTextHeight-n.AxisLabelsTextHeight-16)/n.NumMarksY)),r.beginPath(),r.moveTo(n.X+n.MarginLeft-3,n.Y+n.Height-n.AxisLabelsTextHeight-8-o*((n.Height-n.TitleTextHeight-n.AxisLabelsTextHeight-16)/n.NumMarksY)),r.lineTo(n.X+n.Width,n.Y+n.Height-n.AxisLabelsTextHeight-8-o*((n.Height-n.TitleTextHeight-n.AxisLabelsTextHeight-16)/n.NumMarksY)),r.stroke()}var u=new Array;if(1==n.IsLabeledXValues){for(var h=0,g=0;g<n.Data.length;g++)n.Data[g][0].length>h&&(h=n.Data[g][0].length);for(g=0;g<h;g++)for(var c=0;c<n.Data.length;c++)if(g<n.Data[c][0].length){for(var w=0,I=0;I<u.length;I++)if(u[I]==n.Data[c][0][g][0]){w=1;break}0==w&&u.push(n.Data[c][0][g][0])}}for(var C=0;C<n.NumMarksX;C++){var x;1==n.IsLabeledXValues?(x=u.length/n.NumMarksX,s=u.length%n.NumMarksX>=n.NumMarksX/2?u[C*Math.ceil(x)]:u[C*Math.floor(x)]):s=n.XMaxValue/n.NumMarksX*C;d=r.measureText(s.toString()).width;r.fillText(s.toString(),n.X+n.MarginLeft+C*(n.Width-n.MarginLeft)/n.NumMarksX-d/2,n.Y+n.Height-4),r.beginPath(),r.moveTo(n.X+n.MarginLeft+C*(n.Width-n.MarginLeft)/n.NumMarksX,n.Y+n.Height-n.AxisLabelsTextHeight-5),r.lineTo(n.X+n.MarginLeft+C*(n.Width-n.MarginLeft)/n.NumMarksX,n.Y+n.TitleTextHeight+8),r.stroke()}for(g=0;g<l.length;)drawline(e,r,n,g,u),g++;n.H<n.HMax&&(n.H+=1),r.restore()},e),registerAnimatedWindow(e,b),W>0&&registerKeyDownFunction(e,function(){},b),b}function findXLabelIndexForValue(e,t){for(var a=0;a<e.length;a++)if(e[a]==t)return a}function drawline(e,t,a,n,r){var i=parseInt(a.Data[n][1].substr(1,2),16),o=parseInt(a.Data[n][1].substr(3,2),16),l=parseInt(a.Data[n][1].substr(5,2),16);t.strokeStyle=a.Data[n][1],t.lineWidth=3,t.lineCap="round",t.miterLimit=0,t.shadowOffsetX=2,t.shadowOffsetY=2,t.shadowBlur=5,t.shadowColor="#"+getlowcomp(i).toString(16)+getlowcomp(o).toString(16)+getlowcomp(l).toString(16),t.beginPath();var s=new Array;s=s.concat([[a.X+a.MarginLeft+(1==a.IsLabeledXValues?findXLabelIndexForValue(r,a.Data[n][0][0][0])*(a.Width-a.MarginLeft)/r.length:a.Data[n][0][0][0]*(a.Width-a.MarginLeft)/a.XMaxValue),a.Y+a.Height-a.AxisLabelsTextHeight-8-a.Data[n][0][0][1]*(a.Height-a.TitleTextHeight-a.AxisLabelsTextHeight-16)/a.YMaxValue]]),t.moveTo(a.X+a.MarginLeft+(1==a.IsLabeledXValues?findXLabelIndexForValue(r,a.Data[n][0][0][0])*(a.Width-a.MarginLeft)/r.length:a.Data[n][0][0][0]*(a.Width-a.MarginLeft)/a.XMaxValue),a.Y+a.Height-a.AxisLabelsTextHeight-8-a.Data[n][0][0][1]*(a.Height-a.TitleTextHeight-a.AxisLabelsTextHeight-16)/a.YMaxValue);for(var d=1;d<a.H&&d<a.Data[n][0].length;d++)s=s.concat([[a.X+a.MarginLeft+(1==a.IsLabeledXValues?findXLabelIndexForValue(r,a.Data[n][0][d][0])*(a.Width-a.MarginLeft)/r.length:a.Data[n][0][d][0]*(a.Width-a.MarginLeft)/a.XMaxValue),a.Y+a.Height-a.AxisLabelsTextHeight-8-a.Data[n][0][d][1]*(a.Height-a.TitleTextHeight-a.AxisLabelsTextHeight-16)/a.YMaxValue]]),t.lineTo(a.X+a.MarginLeft+(1==a.IsLabeledXValues?findXLabelIndexForValue(r,a.Data[n][0][d][0])*(a.Width-a.MarginLeft)/r.length:a.Data[n][0][d][0]*(a.Width-a.MarginLeft)/a.XMaxValue),a.Y+a.Height-a.AxisLabelsTextHeight-8-a.Data[n][0][d][1]*(a.Height-a.TitleTextHeight-a.AxisLabelsTextHeight-16)/a.YMaxValue);a.LineXYs.concat([[s]]),t.stroke()}CCLLineGraph.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,XMaxValue:null,NumMarksX:null,YMaxValue:null,NumMarksY:null,Title:null,TitleTextColor:null,TitleTextHeight:null,TitleTextFontString:null,AxisLabelsTextColor:null,AxisLabelsTextHeight:null,AxisLabelsTextFontString:null,ClickFunction:null,MarginLeft:null,IsLabeledXValues:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createLineGraph(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.XMaxValue,this.NumMarksX,this.YMaxValue,this.NumMarksY,this.Title,this.TitleTextColor,this.TitleTextHeight,this.TitleTextFontString,this.AxisLabelsTextColor,this.AxisLabelsTextHeight,this.AxisLabelsTextFontString,this.ClickFunction,this.MarginLeft,this.IsLabeledXValues,this.Tag,this.TabStopIndex)}};var gaugeChartPropsArray=new Array;function getGaugeChartProps(e,t){for(var a=0;a<gaugeChartPropsArray.length;a++)if(gaugeChartPropsArray[a].CanvasID==e&&gaugeChartPropsArray[a].WindowID==t)return gaugeChartPropsArray[a]}function CCLGauge(){}function createGauge(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x){var p=createWindow(e,a,n,r,i,o,-1,"Gauge",t,-1,x);return gaugeChartPropsArray.push({CanvasID:e,WindowID:p,X:a,Y:n,Width:r,Height:i,Data:l,Title:s,TitleTextColor:d,TitleTextHeight:u,TitleTextFontString:h,H:1,CenterX:a+r/2,CenterY:n+(i-8-u)/2+(i-8-u-2*g)/2,GaugeRadius:g,GaugeLabelTextColor:c,GaugeLabelTextHeight:w,GaugeLabelTextFontString:I,AlreadyUnregisteredAnimation:0,Tag:C}),registerWindowDrawFunction(p,function(e,t){var a=getGaugeChartProps(e,t),n=getCtx(e);0==a.AlreadyUnregisteredAnimation&&a.H>100&&(a.AlreadyUnregisteredAnimation=1,unregisterAnimatedWindow(canvaisd1,t)),n.save(),n.globalAlpha=a.H/100,n.fillStyle=a.TitleTextColor,n.font=a.TitleTextFontString,n.fillText(a.Title,a.X+(a.Width-n.measureText(s).width)/2,a.Y+a.TitleTextHeight+4);var r=n.createRadialGradient(a.CenterX,a.CenterY,0,a.CenterX,a.CenterY,a.GaugeRadius-5);r.addColorStop(0,"#C0C0C0"),r.addColorStop(.5,"#A0A0A0"),r.addColorStop(1,"#D0D0D0"),n.fillStyle=r,n.beginPath(),n.arc(a.CenterX,a.CenterY,a.GaugeRadius,0,2*Math.PI,!1),n.arc(a.CenterX,a.CenterY,a.GaugeRadius-5,0,2*Math.PI,!0),n.closePath(),n.fill();var i=n.createRadialGradient(a.CenterX,a.CenterY,0,a.CenterX,a.CenterY,a.GaugeRadius-5);i.addColorStop(0,"#0000C0"),i.addColorStop(.5,"#0000A0"),i.addColorStop(1,"#0000D0"),n.fillStyle=i,n.beginPath(),n.arc(a.CenterX,a.CenterY,a.GaugeRadius-5,0,2*Math.PI,!1),n.fill(),a.H<60?n.globalAlpha=0:n.globalAlpha=(a.H-60)/100,(c=n.createRadialGradient(a.CenterX,a.CenterY,a.GaugeRadius-50,a.CenterX,a.CenterY,a.GaugeRadius-5)).addColorStop(0,"#000000"),c.addColorStop(1,"#FFFFFF"),n.fillStyle=c,n.beginPath(),n.moveTo(a.CenterX-Math.sin(Math.PI/8)*(a.GaugeRadius-10),a.CenterY+Math.cos(Math.PI/8)*(a.GaugeRadius-10)),n.arc(a.CenterX,a.CenterY,a.GaugeRadius-10,Math.PI/180*112.5,Math.PI/180*67.5,!1),n.lineTo(a.CenterX+Math.sin(Math.PI/8)*(a.GaugeRadius-50),a.CenterY+Math.cos(Math.PI/8)*(a.GaugeRadius-50)),n.arc(a.CenterX,a.CenterY,a.GaugeRadius-50,Math.PI/180*67.5,Math.PI/180*112.5,!0),n.closePath(),n.fill(),n.globalAlpha=a.H/100,n.strokeStyle="#000000";for(var o=0;o<a.Data[1]/a.Data[5]+1;o++){(h=315*o/(a.Data[1]/a.Data[5])+112.5)>360&&(h-=360),n.beginPath(),0==h?(n.moveTo(a.CenterX+(a.GaugeRadius-45),a.CenterY),n.lineTo(a.CenterX+(a.GaugeRadius-25),a.CenterY)):h>0&&h<90?(n.moveTo(a.CenterX+Math.cos(Math.PI/180*h)*(a.GaugeRadius-45),a.CenterY+Math.sin(Math.PI/180*h)*(a.GaugeRadius-45)),n.lineTo(a.CenterX+Math.cos(Math.PI/180*h)*(a.GaugeRadius-25),a.CenterY+Math.sin(Math.PI/180*h)*(a.GaugeRadius-25))):90==h?(n.moveTo(a.CenterX,a.CenterY+(a.GaugeRadius-45)),n.lineTo(a.CenterX,a.CenterY+(a.GaugeRadius-25))):h>90&&h<180?(h=180-h,n.moveTo(a.CenterX-Math.cos(Math.PI/180*h)*(a.GaugeRadius-45),a.CenterY+Math.sin(Math.PI/180*h)*(a.GaugeRadius-45)),n.lineTo(a.CenterX-Math.cos(Math.PI/180*h)*(a.GaugeRadius-25),a.CenterY+Math.sin(Math.PI/180*h)*(a.GaugeRadius-25))):180==h?(n.moveTo(a.CenterX-(a.GaugeRadius-45),a.CenterY),n.lineTo(a.CenterX-(a.GaugeRadius-25),a.CenterY)):h>180&&h<270?(h-=180,n.moveTo(a.CenterX-Math.cos(Math.PI/180*h)*(a.GaugeRadius-45),a.CenterY-Math.sin(Math.PI/180*h)*(a.GaugeRadius-45)),n.lineTo(a.CenterX-Math.cos(Math.PI/180*h)*(a.GaugeRadius-25),a.CenterY-Math.sin(Math.PI/180*h)*(a.GaugeRadius-25))):270==h?(n.moveTo(a.CenterX,a.CenterY-(a.GaugeRadius-45)),n.lineTo(a.CenterX,a.CenterY-(a.GaugeRadius-25))):h>270&&h<360&&(h-=270,n.moveTo(a.CenterX+Math.sin(Math.PI/180*h)*(a.GaugeRadius-45),a.CenterY-Math.cos(Math.PI/180*h)*(a.GaugeRadius-45)),n.lineTo(a.CenterX+Math.sin(Math.PI/180*h)*(a.GaugeRadius-25),a.CenterY-Math.cos(Math.PI/180*h)*(a.GaugeRadius-25))),n.stroke()}n.fillStyle=a.GaugeLabelTextColor,n.font=a.GaugeLabelTextFontString;for(o=0;o<a.Data[1]/a.Data[5]+1;o++){(h=315*o/(a.Data[1]/a.Data[5])+112.5)>360&&(h-=360);var l=(o*a.Data[5]).toString(),d=n.measureText(l).width,u=a.GaugeLabelTextHeight;0==h?n.fillText(l,a.CenterX+(a.GaugeRadius-52)-n.measureText(l).width,a.CenterY):h>0&&h<90?n.fillText(l,a.CenterX-d+Math.cos(Math.PI/180*h)*(a.GaugeRadius-52),a.CenterY+Math.sin(Math.PI/180*h)*(a.GaugeRadius-52)):90==h?n.fillText(l,a.CenterX-d/2,a.CenterY+(a.GaugeRadius-52)-u):h>90&&h<180?(h=180-h,n.fillText(l,a.CenterX-Math.cos(Math.PI/180*h)*(a.GaugeRadius-52),a.CenterY+Math.sin(Math.PI/180*h)*(a.GaugeRadius-52))):180==h?n.fillText(l,a.CenterX-(a.GaugeRadius-52),a.CenterY-u/2):h>180&&h<270?(h-=180,n.fillText(l,a.CenterX-Math.cos(Math.PI/180*h)*(a.GaugeRadius-52),a.CenterY+u-Math.sin(Math.PI/180*h)*(a.GaugeRadius-52))):270==h?n.fillText(l,a.CenterX-d/2,a.CenterY-(a.GaugeRadius-52)+u):h>270&&h<360&&(h-=270,n.fillText(l,a.CenterX+Math.sin(Math.PI/180*h)*(a.GaugeRadius-52-d),a.CenterY-Math.cos(Math.PI/180*h)*(a.GaugeRadius-52-d)))}n.strokeStyle="#000000";for(o=0;o<a.Data[1]/a.Data[5]*a.Data[6]+1;o++){var h;if(o%a.Data[6]>0)(h=315*o/(a.Data[1]/a.Data[5]*a.Data[6])+112.5)>360&&(h-=360),n.beginPath(),0==h?(n.moveTo(a.CenterX+(a.GaugeRadius-45),a.CenterY),n.lineTo(a.CenterX+(a.GaugeRadius-35),a.CenterY)):h>0&&h<90?(n.moveTo(a.CenterX+Math.cos(Math.PI/180*h)*(a.GaugeRadius-45),a.CenterY+Math.sin(Math.PI/180*h)*(a.GaugeRadius-45)),n.lineTo(a.CenterX+Math.cos(Math.PI/180*h)*(a.GaugeRadius-35),a.CenterY+Math.sin(Math.PI/180*h)*(a.GaugeRadius-35))):90==h?(n.moveTo(a.CenterX,a.CenterY+(a.GaugeRadius-45)),n.lineTo(a.CenterX,a.CenterY+(a.GaugeRadius-35))):h>90&&h<180?(h=180-h,n.moveTo(a.CenterX-Math.cos(Math.PI/180*h)*(a.GaugeRadius-45),a.CenterY+Math.sin(Math.PI/180*h)*(a.GaugeRadius-45)),n.lineTo(a.CenterX-Math.cos(Math.PI/180*h)*(a.GaugeRadius-35),a.CenterY+Math.sin(Math.PI/180*h)*(a.GaugeRadius-35))):180==h?(n.moveTo(a.CenterX-(a.GaugeRadius-45),a.CenterY),n.lineTo(a.CenterX-(a.GaugeRadius-35),a.CenterY)):h>180&&h<270?(h-=180,n.moveTo(a.CenterX-Math.cos(Math.PI/180*h)*(a.GaugeRadius-45),a.CenterY-Math.sin(Math.PI/180*h)*(a.GaugeRadius-45)),n.lineTo(a.CenterX-Math.cos(Math.PI/180*h)*(a.GaugeRadius-35),a.CenterY-Math.sin(Math.PI/180*h)*(a.GaugeRadius-35))):270==h?(n.moveTo(a.CenterX,a.CenterY-(a.GaugeRadius-45)),n.lineTo(a.CenterX,a.CenterY-(a.GaugeRadius-35))):h>270&&h<360&&(h-=270,n.moveTo(a.CenterX+Math.sin(Math.PI/180*h)*(a.GaugeRadius-45),a.CenterY-Math.cos(Math.PI/180*h)*(a.GaugeRadius-45)),n.lineTo(a.CenterX+Math.sin(Math.PI/180*h)*(a.GaugeRadius-35),a.CenterY-Math.cos(Math.PI/180*h)*(a.GaugeRadius-35))),n.stroke()}drawarc(n,a.Data[2][2],a.Data[2][0],a.Data[2][1],a.Data[1],a.CenterX,a.CenterY,a.GaugeRadius),drawarc(n,a.Data[3][2],a.Data[3][0],a.Data[3][1],a.Data[1],a.CenterX,a.CenterY,a.GaugeRadius),drawarc(n,a.Data[4][2],a.Data[4][0],a.Data[4][1],a.Data[1],a.CenterX,a.CenterY,a.GaugeRadius);var g=315*a.Data[7]/a.Data[1]*(a.H/100)+112.5;g>360&&(g-=360),n.translate(a.CenterX,a.CenterY),n.rotate(Math.PI/180*g);var c,w=n.createLinearGradient(0,0,a.GaugeRadius-80,0),I=parseInt("#60007C".substr(1,2),16),C=parseInt("#60007C".substr(3,2),16),x=parseInt("#60007C".substr(5,2),16);w.addColorStop(0,"#"+getlowcomp(I)+getlowcomp(C)+getlowcomp(x)),w.addColorStop(.5,"#60007C"),w.addColorStop(1,"#"+gethighcomp(I)+gethighcomp(C)+gethighcomp(x)),n.fillStyle=w,n.beginPath(),n.moveTo(0,10),n.lineTo(0,-10),n.lineTo(a.GaugeRadius-40,0),n.closePath(),n.fill(),(c=n.createRadialGradient(a.CenterX,a.CenterY,0,a.CenterX,a.CenterY,10)).addColorStop(0,"#C0C0C0"),c.addColorStop(.5,"#A0A0A0"),c.addColorStop(1,"#D0D0D0"),n.fillStyle=c,n.beginPath(),n.arc(0,0,10,0,2*Math.PI,!1),n.fill(),n.restore(),a.H<100&&a.H++},e),registerAnimatedWindow(e,p),x>0&&registerKeyDownFunction(e,function(){},p),p}function drawarc(e,t,a,n,r,i,o,l){var s=e.createRadialGradient(i,o,l-100,i,o,l-80),d=parseInt(t.substr(1,2),16),u=parseInt(t.substr(3,2),16),h=parseInt(t.substr(5,2),16);s.addColorStop(0,"#"+getlowcomp(d)+getlowcomp(u)+getlowcomp(h)),s.addColorStop(.5,t),s.addColorStop(1,"#"+gethighcomp(d)+gethighcomp(u)+gethighcomp(h)),e.fillStyle=s;var g=315*a/r+112.5;g>360&&(g-=360);var c=315*n/r+112.5;c>360&&(c-=360),e.beginPath();var w=0;0==g?e.moveTo(i+(l-100),o):g>0&&g<90?e.moveTo(i+Math.cos(Math.PI/180*g)*(l-100),o+Math.sin(Math.PI/180*g)*(l-100)):90==g?e.moveTo(i,o+(l-100)):g>90&&g<180?(w=180-g,e.moveTo(i-Math.cos(Math.PI/180*w)*(l-100),o+Math.sin(Math.PI/180*w)*(l-100))):180==g?e.moveTo(i-(l-100),o):g>180&&g<270?(w=g-180,e.moveTo(i-Math.cos(Math.PI/180*w)*(l-100),o-Math.sin(Math.PI/180*w)*(l-100))):270==g?e.moveTo(i,o-(l-100)):g>270&&g<360&&(w=g-270,e.moveTo(i+Math.sin(Math.PI/180*w)*(l-100),o-Math.cos(Math.PI/180*w)*(l-100))),e.arc(i,o,l-100,Math.PI/180*g,Math.PI/180*c,!1),e.arc(i,o,l-80,Math.PI/180*c,Math.PI/180*g,!0),e.closePath(),e.fill()}CCLGauge.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,Title:null,TitleTextColor:null,TitleTextHeight:null,TitleTextFontString:null,GaugeRadius:null,GaugeLabelTextColor:null,GaugeLabelTextHeight:null,GaugeLabelTextFontString:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.Title,this.TitleTextColor,this.TitleTextHeight,this.TitleTextFontString,this.GaugeRadius,this.GaugeLabelTextColor,this.GaugeLabelTextHeight,this.GaugeLabelTextFontString,this.Tag,this.TabStopIndex}};var radarGraphPropsArray=new Array;function getRadarGraphProps(e,t){for(var a=0;a<radarGraphPropsArray.length;a++)if(radarGraphPropsArray[a].CanvasID==e&&radarGraphPropsArray[a].WindowID==t)return radarGraphPropsArray[a]}function CCLRadarGraph(){}function createRadarGraph(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f){var T=createWindow(e,a,n,r,i,o,-1,"RadarGraph",t,-1,f);radarGraphPropsArray.push({CanvasID:e,WindowID:T,X:a,Y:n,Width:r,Height:i,Data:l,MaxValue:s,ColorStr:d,NumMarks:u,Title:h,TitleTextColor:g,TitleTextHeight:c,TitleTextFontString:w,H:20,MarkLabelTextColor:I,MarkLabelTextHeight:C,MarkLabelTextFontString:x,AlreadyUnregisteredAnimation:0,Tag:p}),registerWindowDrawFunction(T,function(e,t){var a=getRadarGraphProps(e,t),n=getCtx(e);0==a.AlreadyUnregisteredAnimation&&a.H>=(a.Height-a.TitleTextHeight-8-a.MarkLabelTextHeight-8-4)/2&&(a.AlreadyUnregisteredAnimation=1,unregisterAnimatedWindow(e,t)),n.save(),n.fillStyle=a.TitleTextColor,n.font=a.TitleTextFontString,n.fillText(a.Title,a.X+(a.Width-n.measureText(a.Title).width)/2,a.Y+a.TitleTextHeight+4),n.font=a.MarkLabelTextFontString;var r=360*Math.PI/(180*a.Data.length);n.translate(a.X+a.Width/2,a.Y+a.TitleTextHeight+8+(a.Height-a.TitleTextHeight-8-a.MarkLabelTextHeight-8)/2+a.MarkLabelTextHeight+8),n.rotate(270*Math.PI/180);var i=parseInt(a.ColorStr.substr(1,2),16),o=parseInt(a.ColorStr.substr(3,2),16),l=parseInt(a.ColorStr.substr(5,2),16),s=n.createRadialGradient(0,0,0,0,0,a.H);s.addColorStop(0,"#"+gethighcomp(i)+gethighcomp(o)+gethighcomp(l)),s.addColorStop(.5,a.ColorStr),s.addColorStop(1,"#"+getlowcomp(i)+getlowcomp(o)+getlowcomp(l)),n.fillStyle=s,n.beginPath(),n.moveTo(a.Data[0]*a.H/a.MaxValue,0);for(var d=1;d<a.Data.length;d++)n.rotate(r),n.lineTo(a.Data[d]*a.H/a.MaxValue,0);n.closePath(),n.fill(),n.restore(),n.save(),n.strokeStyle="#505050",n.translate(a.X+a.Width/2,a.Y+a.TitleTextHeight+8+(a.Height-a.TitleTextHeight-8-a.MarkLabelTextHeight-8)/2+a.MarkLabelTextHeight+8),n.rotate(270*Math.PI/180);for(d=0;d<a.Data.length;d++){n.beginPath(),n.moveTo(0,0),n.lineTo(a.H,0),n.closePath(),n.stroke();for(var u=a.H/a.NumMarks,h=0;h<a.NumMarks;h++)n.beginPath(),n.moveTo((h+1)*u,3),n.lineTo((h+1)*u,-3),n.closePath(),n.stroke();n.rotate(r)}if(n.restore(),n.fillStyle=a.MarkLabelTextColor,n.font=a.MarkLabelTextFontString,a.H==(a.Height-a.TitleTextHeight-8-a.MarkLabelTextHeight-8-4)/2){n.save(),n.translate(a.X+a.Width/2,a.Y+a.TitleTextHeight+8+(a.Height-a.TitleTextHeight-8-a.MarkLabelTextHeight-8)/2+a.MarkLabelTextHeight+8);for(d=0;d<a.NumMarks;d++){var g=((d+1)*a.MaxValue/a.NumMarks).toString();n.fillText(g,-(n.measureText(g).width+5),a.MarkLabelTextHeight/2-(d+1)*((a.Height-a.TitleTextHeight-8)/2/a.NumMarks))}n.restore()}a.H+5<=(a.Height-a.TitleTextHeight-8-a.MarkLabelTextHeight-8-4)/2?a.H+=5:a.H=(a.Height-a.TitleTextHeight-8-a.MarkLabelTextHeight-8-4)/2},e),registerAnimatedWindow(e,T)}CCLRadarGraph.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,MaxValue:null,ColorStr:null,NumMarks:null,Title:null,TitleTextColor:null,TitleTextHeight:null,TitleTextFontString:null,MarkLabelTextColor:null,MarkLabelTextHeight:null,MarkLabelTextFontString:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createRadarGraph(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.MaxValue,this.ColorStr,this.NumMarks,this.Title,this.TitleTextColor,this.TitleTextHeight,this.TitleTextFontString,this.MarkLabelTextColor,this.MarkLabelTextHeight,this.MarkLabelTextFontString,this.Tag,this.TabStopIndex)}};var lineAreaGraphPropsArray=new Array;function getLineAreaGraphProps(e,t){for(var a=0;a<lineAreaGraphPropsArray.length;a++)if(lineAreaGraphPropsArray[a].CanvasID==e&&lineAreaGraphPropsArray[a].WindowID==t)return lineAreaGraphPropsArray[a]}function CCLLineAreaGraph(){}function createLineAreaGraph(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S){var W=createWindow(e,a,n,r,i,o,-1,"LineAreaGraph",t,-1,S);lineAreaGraphPropsArray.push({CanvasID:e,WindowID:W,X:a,Y:n,Width:r,Height:i,Data:l,XMaxValue:s,YMaxValue:d,NumMarksX:u,NumMarksY:h,Title:g,TitleTextColor:c,TitleTextHeight:w,TitleTextFontString:I,AxisLabelsColor:C,AxisLabelsHeight:x,AxisLabelsFontString:p,H:0,MarginLeft:f,AlreadyUnregisteredAnimation:0,IsLabledOnXAxis:T,Tag:D}),registerWindowDrawFunction(W,function(e,t){var a=getLineAreaGraphProps(e,t);0==a.AlreadyUnregisteredAnimation&&a.H>=a.Data[0].length-1&&(a.AlreadyUnregisteredAnimation=1,unregisterAnimatedWindow(e,t));var n=getCtx(e);n.save(),n.fillStyle=a.TitleTextColor,n.font=a.TitleTextFontString,n.fillText(a.Title,a.X+(a.Width-n.measureText(a.Title).width)/2,a.Y+4+a.TitleTextHeight),n.font=a.AxisLabelsFontString,n.beginPath(),n.moveTo(a.X+a.MarginLeft,a.Y+a.Height-a.AxisLabelsHeight-8),n.lineTo(a.X+a.MarginLeft,a.Y+a.TitleTextHeight+8),n.stroke(),n.beginPath(),n.moveTo(a.X+a.MarginLeft,a.Y+a.Height-a.AxisLabelsHeight-8),n.lineTo(a.X+a.Width,a.Y+a.Height-a.AxisLabelsHeight-8),n.stroke();for(var r=!1,i=0;i<a.NumMarksX;i++)r?(n.fillStyle="#C0C0C0",r=!1):(n.fillStyle="#D0D0D0",r=!0),n.fillRect(a.X+a.MarginLeft+i*((a.Width-a.MarginLeft)/a.NumMarksX),a.Y+a.TitleTextHeight+8,(a.Width-a.MarginLeft)/a.NumMarksX,a.Height-a.TitleTextHeight-a.AxisLabelsHeight-16);for(n.fillStyle=a.AxisLabelsColor,n.strokeStyle="#404040",i=0;i<a.NumMarksY;i++){var o=a.YMaxValue/a.NumMarksY*i,l=n.measureText(o.toString()).width;n.fillText(o.toString(),a.X+a.MarginLeft-l-10,a.Y+a.Height-a.AxisLabelsHeight-8-i*((a.Height-a.TitleTextHeight-a.AxisLabelsHeight-16)/a.NumMarksY)),n.beginPath(),n.moveTo(a.X+a.MarginLeft-5,a.Y+a.Height-a.AxisLabelsHeight-8-i*((a.Height-a.TitleTextHeight-a.AxisLabelsHeight-16)/a.NumMarksY)),n.lineTo(a.X+a.Width,a.Y+a.Height-a.AxisLabelsHeight-8-i*((a.Height-a.TitleTextHeight-a.AxisLabelsHeight-16)/a.NumMarksY)),n.stroke()}var s=new Array;if(1==a.IsLabledOnXAxis)for(var d=0;d<a.Data[0].length;d++)s.push(a.Data[0][d][0]);n.fillStyle=a.AxisLabelsColor;for(var u=0;u<a.NumMarksX;u++){1==a.IsLabledOnXAxis?(increment=s.length/a.NumMarksX,o=s.length%a.NumMarksX>=a.NumMarksX/2?s[u*Math.ceil(increment)]:s[u*Math.floor(increment)]):o=a.XMaxValue/a.NumMarksX*u;l=n.measureText(o.toString()).width;n.fillText(o.toString(),a.X+a.MarginLeft+u*((a.Width-a.MarginLeft)/a.NumMarksX)-l/2,a.Y+a.Height-4),n.beginPath(),n.moveTo(a.X+a.MarginLeft+u*((a.Width-a.MarginLeft)/a.NumMarksX),a.Y+a.TitleTextHeight+8+(a.Height-a.TitleTextHeight-a.AxisLabelsHeight-16)+5),n.lineTo(a.X+a.MarginLeft+u*((a.Width-a.MarginLeft)/a.NumMarksX),a.Y+a.TitleTextHeight+8),n.stroke()}for(i=0;i<a.Data[0][0][1].length;i++){var h=a.Data[1][i],g=n.createLinearGradient(a.X+a.MarginLeft,a.Y+a.Height-a.AxisLabelsHeight-8,a.X+a.Width-a.MarginLeft,a.Y+a.Height-a.AxisLabelsHeight-8),c=parseInt(h.substr(1,2),16),w=parseInt(h.substr(3,2),16),I=parseInt(h.substr(5,2),16);g.addColorStop(0,"#"+getlowcomp(c)+getlowcomp(w)+getlowcomp(I)),g.addColorStop(.5,h),g.addColorStop(1,"#"+gethighcomp(c)+gethighcomp(w)+gethighcomp(I)),n.fillStyle=g,n.beginPath(),n.moveTo(a.X+a.MarginLeft,a.Y+a.Height-a.AxisLabelsHeight-8);for(d=0;d<a.H+1;d++)n.lineTo(a.X+a.MarginLeft+(1==a.IsLabledOnXAxis?findXLabelIndexForValue(s,a.Data[0][d][0])*(a.Width-a.MarginLeft)/s.length:a.Data[0][d][0]*(a.Width-a.MarginLeft)/a.XMaxValue),a.Y+a.Height-a.AxisLabelsHeight-8-(a.Data[0][d][1][i]+sumyvalues(a.Data,i,d))*(a.Height-a.TitleTextHeight-a.AxisLabelsHeight-16)/a.YMaxValue);if(0==i)n.lineTo(a.X+a.MarginLeft+(1==a.IsLabledOnXAxis?findXLabelIndexForValue(s,a.Data[0][a.H][0])*(a.Width-a.MarginLeft)/s.length:a.Data[0][a.H][0]*(a.Width-a.MarginLeft)/a.XMaxValue),a.Y+a.Height-a.AxisLabelsHeight-8);else for(d=a.H;d>=0;d--)n.lineTo(a.X+a.MarginLeft+(1==a.IsLabledOnXAxis?findXLabelIndexForValue(s,a.Data[0][d][0])*(a.Width-a.MarginLeft)/s.length:a.Data[0][d][0]*(a.Width-a.MarginLeft)/a.XMaxValue),a.Y+a.Height-a.AxisLabelsHeight-8-(a.Data[0][d][1][i-1]+sumyvalues(a.Data,i-1,d))*(a.Height-a.TitleTextHeight-a.AxisLabelsHeight-16)/a.YMaxValue);n.closePath(),n.fill()}n.restore(),a.H<a.Data[0].length-1&&a.H++},e),registerAnimatedWindow(e,W)}function sumyvalues(e,t,a){for(var n=0,r=0;r<t;r++)n+=e[0][a][1][r];return n}CCLLineAreaGraph.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,XMaxValue:null,YMaxValue:null,NumMarksX:null,NumMarksY:null,Title:null,TitleTextColor:null,TitleTextHeight:null,TitleTextFontString:null,AxisLabelsColor:null,AxisLabelsHeight:null,AxisLabelsFontString:null,MarginLeft:null,IsLabledOnXAxis:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createLineAreaGraph(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.XMaxValue,this.YMaxValue,this.NumMarksX,this.NumMarksY,this.Title,this.TitleTextColor,this.TitleTextHeight,this.TitleTextFontString,this.AxisLabelsColor,this.AxisLabelsHeight,this.AxisLabelsFontString,this.MarginLeft,this.IsLabledOnXAxis,this.Tag,this.TabStopIndex)}};var candlesticksGraphPropsArray=new Array;function getCandlesticksGraphProps(e,t){for(var a=0;a<candlesticksGraphPropsArray.length;a++)if(candlesticksGraphPropsArray[a].CanvasID==e&&candlesticksGraphPropsArray[a].WindowID==t)return candlesticksGraphPropsArray[a]}function CCLCandlesticksGraph(){}function createCandlesticksGraph(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b){var H=createWindow(e,a,n,r,i,o,-1,"CandlesticksGraph",t,-1,b);candlesticksGraphPropsArray.push({CanvasID:e,WindowID:H,X:a,Y:n,Width:r,Height:i,Data:l,XMarksLabelData:s,XMarksWidth:d,YMaxValue:u,NumMarksY:h,Title:g,TitleColor:c,TitleHeight:w,TitleFontString:I,CandleBodyWidth:C,CandleBodyColor:x,CandleLineColor:p,MarginLeft:f,AxisLabelsColor:T,AxisLabelsHeight:D,AxisLabelsFontString:S,Tag:W}),registerWindowDrawFunction(H,function(e,t){var a=getCandlesticksGraphProps(e,t),n=getCtx(e);n.save(),n.fillStyle=a.TitleColor,n.font=a.TitleFontString,n.fillText(a.Title,a.X+(a.Width-n.measureText(g).width)/2,a.Y+a.TitleHeight+4),n.strokeStyle="#C0C0C0",n.beginPath(),n.moveTo(a.X+a.MarginLeft,a.Y+a.Height-8-a.AxisLabelsHeight),n.lineTo(a.X+a.MarginLeft,a.Y+a.TitleHeight+8),n.stroke(),n.beginPath(),n.moveTo(a.X+a.MarginLeft,a.Y+a.Height-8-a.AxisLabelsHeight),n.lineTo(a.X+a.Width,a.Y+a.Height-8-a.AxisLabelsHeight),n.stroke();for(var r=!1,i=0;i<=l.length;i++)r?(n.fillStyle="#C0C0C0",r=!1):(n.fillStyle="#D0D0D0",r=!0),n.fillRect(a.X+a.MarginLeft+i*a.XMarksWidth,a.Y+a.TitleHeight+8,a.XMarksWidth,a.Height-a.TitleHeight-a.AxisLabelsHeight-16);n.fillStyle=a.AxisLabelsColor,n.font=a.AxisLabelsFontString,n.strokeStyle="#404040";for(i=0;i<a.NumMarksY;i++){var o=a.YMaxValue/a.NumMarksY*i,s=n.measureText(o.toString()).width;n.fillText(o.toString(),a.X+a.MarginLeft-10-s,a.Y+a.Height-a.AxisLabelsHeight-8-i*((a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.NumMarksY)),n.beginPath(),n.moveTo(a.X+a.MarginLeft-5,a.Y+a.Height-a.AxisLabelsHeight-8-i*((a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.NumMarksY)),n.lineTo(a.X+a.Width,a.Y+a.Height-a.AxisLabelsHeight-8-i*((a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.NumMarksY)),n.stroke()}for(var d=0;d<a.Data.length;d++)n.beginPath(),n.moveTo(a.X+a.MarginLeft+(d+1)*a.XMarksWidth,a.Y+a.Height-a.AxisLabelsHeight-8+5),n.lineTo(a.X+a.MarginLeft+(d+1)*a.XMarksWidth,a.Y+a.TitleHeight+8),n.stroke();for(i=0;i<a.XMarksLabelData.length;i++){s=n.measureText(a.XMarksLabelData[i][1].toString()).width;n.fillText(a.XMarksLabelData[i][1],a.X+a.MarginLeft+(a.XMarksLabelData[i][0]+1)*a.XMarksWidth-s/2,a.Y+a.Height-4)}for(i=0;i<a.Data.length;i++){var u=n.createLinearGradient(a.X+a.MarginLeft+(i+1)*a.XMarksWidth,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][0]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue,a.X+a.MarginLeft+(i+1)*a.XMarksWidth,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][1]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),h=parseInt(a.CandleBodyColor.substr(1,2),16),c=parseInt(a.CandleBodyColor.substr(3,2),16),w=parseInt(a.CandleBodyColor.substr(5,2),16);u.addColorStop(0,"#"+getlowcomp(h)+getlowcomp(c)+getlowcomp(w)),u.addColorStop(.5,a.CandleBodyColor),u.addColorStop(1,"#"+gethighcomp(h)+gethighcomp(c)+gethighcomp(w)),n.fillStyle=u,n.strokeStyle=a.CandleLineColor,n.beginPath(),a.Data[i][0]<a.Data[i][1]?(n.moveTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth-a.CandleBodyWidth/2,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][0]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.lineTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth+a.CandleBodyWidth/2,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][0]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.lineTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth+a.CandleBodyWidth/2,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][1]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.lineTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth-a.CandleBodyWidth/2,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][1]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.closePath(),n.fill(),n.beginPath(),n.moveTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][0]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.lineTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][2]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.closePath(),n.stroke(),n.beginPath(),n.moveTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][1]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.lineTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][3]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.closePath(),n.stroke()):(n.strokeStyle=a.CandleBodyColor,n.moveTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth-a.CandleBodyWidth/2,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][0]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.lineTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth+a.CandleBodyWidth/2,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][0]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.lineTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth+a.CandleBodyWidth/2,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][1]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.lineTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth-a.CandleBodyWidth/2,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][1]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.closePath(),n.stroke(),n.strokeStyle=a.CandleLineColor,n.beginPath(),n.moveTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][1]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.lineTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][2]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.closePath(),n.stroke(),n.beginPath(),n.moveTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][0]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.lineTo(a.X+a.MarginLeft+(i+1)*a.XMarksWidth,a.Y+a.Height-a.AxisLabelsHeight-8-a.Data[i][3]*(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.YMaxValue),n.closePath(),n.stroke())}n.restore()},e)}CCLCandlesticksGraph.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,XMarksLabelData:null,XMarksWidth:null,YMaxValue:null,NumMarksY:null,Title:null,TitleColor:null,TitleHeight:null,TitleFontString:null,CandleBodyWidth:null,CandleBodyColor:null,CandleLineColor:null,MarginLeft:null,AxisLabelsColor:null,AxisLabelsHeight:null,AxisLabelsFontString:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createCandlesticksGraph(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.XMarksLabelData,this.XMarksWidth,this.YMaxValue,this.NumMarksY,this.Title,this.TitleColor,this.TitleHeight,this.TitleFontString,this.CandleBodyWidth,this.CandleBodyColor,this.CandleLineColor,this.marginleft,this.axislabelscolor,this.axislabelsheight,this.axislabelsfontstring,this.Tag,this.TabStopIndex)}};var doughnutChartPropsArray=new Array;function getDoughnutChartProps(e,t){for(var a=0;a<doughnutChartPropsArray.length;a++)if(doughnutChartPropsArray[a].CanvasID==e&&doughnutChartPropsArray[a].WindowID==t)return doughnutChartPropsArray[a]}function CCLDoughnutChart(){}function createDoughnutChart(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S){for(var W=createWindow(e,a,n,r,i,o,-1,"DoughnutChart",t,-1,S),b=0,H=0;H<l.length;H++)b+=l[H][1];return doughnutChartPropsArray.push({CanvasID:e,WindowID:W,X:a,Y:n,Width:r,Height:i,Data:l,Title:s,TitleColor:d,TitleTextHeight:u,TitleFontString:h,InnerRadius:g,CurrentRadius:g+20,TotalValue:b,MarginSides:c,LabelColor:w,LabelHeight:I,LabelFontString:C,LegendWidth:x,LegendHeight:p,LegendFontString:f,AnimationCompleted:0,DeltaI:-1,DeltaX:0,DeltaY:0,SliceClickFunction:T,Tag:D}),registerClickFunction(W,function(e,t,a){var n=getDoughnutChartProps(e,t),r=n.Data,i=n.TotalValue,o=a.calcX,l=a.calcY,s=-1,d=n.X+n.Width/2+n.MarginSides,u=n.Y+(n.Height-n.TitleTextHeight-8-2*n.LabelHeight)/2;22500>(o-d)*(o-d)+(l-u)*(l-u)&&(o>d&&l==u?s=0:o>d&&l>u?s=180*Math.atan((l-u)/(o-d))/Math.PI:o<d&&l>u?s=180-180*Math.atan((l-u)/(o-d))/Math.PI:o<d&&l==u?s=180:o<d&&l<u?s=180+180*Math.atan((l-u)/(o-d))/Math.PI:o==d&&l<u?s=270:o>d&&l<u&&(s=360+180*Math.atan((l-u)/(o-d))/Math.PI));var h=0,g=0,c=0;for(H=0;H<r.length;H++){h+=360*r[H][1]/i;var w=0,I=0;if(s>=0&&g<=s&&h>=s){var C=g+(h-g)/2;0==C?(w=40,I=0):C>0&&C<90?(w=40*Math.cos(C*(Math.PI/180)),I=40*Math.sin(C*(Math.PI/180))):90==C?(w=0,I=40):C>90&&C<180?(w=-40*Math.cos((180-C)*(Math.PI/180)),I=40*Math.sin((180-C)*(Math.PI/180))):180==C?(w=-40,I=0):C>180&&C<270?(w=-40*Math.cos((180-C)*(Math.PI/180)),I=40*Math.sin((180-C)*(Math.PI/180))):270==C?(w=0,I=-40):C>270&&C<360&&(w=40*Math.cos((360-C)*(Math.PI/180)),I=-40*Math.sin((360-C)*(Math.PI/180)))}0==w&&0==I||(n.DeltaX=w,n.DeltaY=I,n.DeltaI=H,c=1,null!=n.SliceClickFunction&&n.SliceClickFunction(e,t,H)),g=h}0==c&&(n.DeltaX=0,n.DeltaY=0,n.DeltaI=-1)},e),registerWindowDrawFunction(W,function(e,t){var a=getDoughnutChartProps(e,t),n=getCtx(e),r=a.TotalValue,i=a.Data,o=a.InnerRadius,l=a.CurrentRadius;0==a.AnimationCompleted&&l>=(a.Width-2*a.MarginSides-a.LegendWidth)/2&&(unregisterAnimatedWindow(e,t),a.AnimationCompleted=1),n.save(),n.fillStyle=a.TitleColor,n.font=a.TitleFontString,n.fillText(a.Title,a.X+(a.Width-n.measureText(a.Title).width)/2,a.Y+a.TitleTextHeight+4),n.font=a.LabelFontString;for(var s=a.X+a.Width/2+a.MarginSides,d=a.Y+(a.Height-a.TitleTextHeight-8-2*a.LabelHeight)/2,u=0,h=0,g=0;g<i.length;g++){u+=100*i[g][1]*360/(100*r);var c=parseInt(i[g][2].substr(1,2),16),w=parseInt(i[g][2].substr(3,2),16),I=parseInt(i[g][2].substr(5,2),16),C=n.createRadialGradient(s+(a.DeltaI==g?a.DeltaX:0),d+(a.DeltaI==g?a.DeltaY:0),o,s+(a.DeltaI==g?a.DeltaX:0),d+(a.DeltaI==g?a.DeltaY:0),l);C.addColorStop(0,"#"+gethighcomp(c)+gethighcomp(w)+gethighcomp(I)),C.addColorStop(.5,i[g][2]),C.addColorStop(1,"#"+getlowcomp(c)+getlowcomp(w)+getlowcomp(I)),n.fillStyle=C,n.beginPath(),n.arc(s+(a.DeltaI==g?a.DeltaX:0),d+(a.DeltaI==g?a.DeltaY:0),l,Math.PI/180*h,Math.PI/180*u,!1),n.arc(s+(a.DeltaI==g?a.DeltaX:0),d+(a.DeltaI==g?a.DeltaY:0),o,Math.PI/180*u,Math.PI/180*h,!0),n.closePath(),n.fill(),n.strokeStyle=i[g][2],h=u}0==a.AnimationCompleted&&(a.CurrentRadius+=5);for(u=0,h=0,g=0;g<i.length;g++)u+=100*i[g][1]*360/(100*r),n.strokeStyle=i[g][2],drawPieChartLabels(n,i[g][0],u,h,l,r,i[g][1],i[g][2],0,0,s+(a.DeltaI==g?a.DeltaX:0),d+(a.DeltaI==g?a.DeltaY:0),a.LabelHeight),h=u;n.font=a.LegendFontString;for(var x=0;x<i.length;x++)n.fillStyle=i[x][2],n.fillRect(a.X+a.Width-a.LegendWidth,a.Y+a.Height-4-a.LegendHeight-x*(a.LegendHeight+10),30,a.LegendHeight),n.fillStyle=i[x][2],n.fillText(i[x][0],a.X+a.Width-a.LegendWidth+35,a.Y+a.Height-4-x*(a.LegendHeight+10));n.restore()},e),registerAnimatedWindow(e,W),S>0&&registerKeyDownFunction(e,function(){},W),W}CCLDoughnutChart.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,Title:null,TitleColor:null,TitleTextHeight:null,TitleFontString:null,InnerRadius:null,MarginSides:null,LabelColor:null,LabelHeight:null,LabelFontString:null,LegendWidth:null,LegendHeight:null,LegendFontString:null,SliceClickFunction:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.Title,this.TitleColor,this.TitleTextHeight,this.TitleFontString,this.InnerRadius,this.MarginSides,this.LabelColor,this.LabelHeight,this.LabelFontString,this.LegendWidth,this.LegendHeight,this.LegendFontString,this.SliceClickFunction,this.Tag,this.TabStopIndex}};var barsMixedWithLabledLineGraphsPropsArray=new Array;function getBarsMixedWithLabledLineGraphProps(e,t){for(var a=0;a<barsMixedWithLabledLineGraphsPropsArray.length;a++)if(barsMixedWithLabledLineGraphsPropsArray[a].CanvasID==e&&barsMixedWithLabledLineGraphsPropsArray[a].WindowID==t)return barsMixedWithLabledLineGraphsPropsArray[a]}function CCLBarsMixedWithLabledLineGraph(){}function createBarsMixedWithLabledLineGraph(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b,H,v){var m=createWindow(e,a,n,r,i,o,-1,"BarsMixedWithLabeledLineGraph",t,-1,v);return barsMixedWithLabledLineGraphsPropsArray.push({CanvasID:e,WindowID:m,X:a,Y:n,Width:r,Height:i,Data:l,MaxValue:s,NumMarksY:d,Title:u,TitleTextColor:h,TitleTextHeight:g,TitleTextFontString:c,BarWidth:w,BarLabelsWithBoundingBoxes:new Array,H:i-C-8-20,AxisLabelsTextHeight:C,AxisLabelsTextFontString:x,AxisLabelsTextColor:I,MarginLeft:p,GapBetweenBars:f,BarClickFunction:T,AlreadyUnregisteredAnimation:0,HasLegend:D,MarginRight:S,LinesData:W,LineXYs:new Array,LineClickFunction:b,YMaxValue:s,Tag:H}),registerClickFunction(m,function(e,t,a){for(var r=getBarsMixedWithLabledLineGraphProps(e,t),i=a.calcX,o=a.calcY,l=0;l<r.BarLabelsWithBoundingBoxes.length;l++)if(i>=r.BarLabelsWithBoundingBoxes[l].X&&i<=r.BarLabelsWithBoundingBoxes[l].X+r.BarLabelsWithBoundingBoxes[l].Width&&o>=r.BarLabelsWithBoundingBoxes[l].Y&&o<=r.BarLabelsWithBoundingBoxes[l].Y+r.BarLabelsWithBoundingBoxes[l].Height&&null!=r.BarClickFunction)return void r.BarClickFunction(e,t,l);var s=r.LineXYs;for(l=0;l<s.length;l++)for(var d=0;d<s[l].length-1;d++)i>=s[l][d][0]&&i<=s[l][d+1][0]&&(o<=s[l][d][1]&&o>=s[l][d+1][1]||o>=s[l][d][1]&&o<=s[l][d+1][1])&&(n=(s[l][d][1]-s[l][d+1][1])*(i-s[l][d][0])/(s[l][d][0]-s[l][d+1][0])+s[l][d][1])+4>o&&n-4<o&&r.LineClickFunction(e,t,l)},e),registerWindowDrawFunction(m,function(e,t){var a=getBarsMixedWithLabledLineGraphProps(e,t),n=getCtx(e),r=a.H;0==a.AlreadyUnregisteredAnimation&&r<a.TitleTextHeight+8&&(a.AlreadyUnregisteredAnimation=1,unregisterAnimatedWindow(e,t)),a.LineXYs=new Array,n.clearRect(0,0,canvas.width,canvas.height),n.save(),n.fillStyle=a.TitleTextColor,n.font=a.TitleTextFontString,n.lineWidth=2,n.fillText(a.Title,a.X+(a.Width-n.measureText(a.Title).width)/2,a.Y+a.TitleTextHeight+4),n.lineWidth=1,n.fillStyle=a.AxisLabelsTextColor,n.font=a.AxisLabelsTextFontString;var i=a.Height-a.TitleTextHeight-a.AxisLabelsTextHeight-16;n.beginPath(),n.moveTo(a.X+a.MarginLeft,a.Y+a.TitleTextHeight+8+i),n.lineTo(a.X+a.MarginLeft,a.Y+a.TitleTextHeight+8),n.stroke();for(var o=0;o<a.NumMarksY;o++){var s=a.MaxValue/a.NumMarksY*o;s=Math.round(100*s)/100;var d=n.measureText(s.toString()).width,u=i/a.NumMarksY;n.fillText(s.toString(),a.X+a.MarginLeft-d-5,a.Y+a.TitleTextHeight+8+a.AxisLabelsTextHeight/2+i-o*u),n.beginPath(),n.moveTo(a.X+a.MarginLeft,a.Y+a.TitleTextHeight+8+i-o*u),n.lineTo(a.X+a.MarginLeft+a.Data.length*(a.BarWidth+a.GapBetweenBars)+a.GapBetweenBars,a.Y+a.TitleTextHeight+8+i-o*u),n.stroke()}a.BarLabelsWithBoundingBoxes=new Array;for(var h=0;h<a.Data.length;h++){if(1!=a.HasLegend){var g=n.measureText(a.Data[h][0]).width;n.fillStyle=a.AxisLabelsTextColor,n.font=a.AxisLabelsTextFontString,g<a.BarWidth?n.fillText(a.Data[h][0],a.X+a.MarginLeft+a.GapBetweenBars+h*(a.BarWidth+a.GapBetweenBars)+(a.BarWidth-g)/2,a.Y+a.Height-4):n.fillText(a.Data[h][0],a.X+a.MarginLeft+a.GapBetweenBars+h*(a.BarWidth+a.GapBetweenBars)-(g-a.BarWidth)/2,a.Y+a.Height-4)}drawrect(e,t,n,a,h,i)}var c=new Array,w=0;for(h=0;h<a.LinesData.length;h++)a.LinesData[h][0].length>w&&(w=a.LinesData[h][0].length);for(h=0;h<w;h++)for(var I=0;I<a.LinesData.length;I++)if(h<a.LinesData[I][0].length){for(var C=0,x=0;x<c.length;x++)if(c[x]==a.LinesData[I][0][h][0]){C=1;break}0==C&&c.push(a.LinesData[I][0][h][0])}for(h=0;h<a.LinesData.length;)drawlineforbarsmixedwithlinesgraph(n,a,h,c),h++;if(1==a.HasLegend)for(var p=0;p<a.Data.length;p++)n.fillStyle=l[p][2],n.fillRect(a.X+a.Width-a.MarginRight,a.Y+a.Height-8-a.AxisLabelsTextHeight-p*(8+a.AxisLabelsTextHeight),30,a.AxisLabelsTextHeight),n.fillText(l[p][0],a.X+a.Width-a.MarginRight+35,a.Y+a.Height-8-p*(8+a.AxisLabelsTextHeight));r>=a.TitleTextHeight+8&&(a.H-=5),n.restore()},e),registerAnimatedWindow(e,m),v>0&&registerKeyDownFunction(e,function(){},m),m}function drawlineforbarsmixedwithlinesgraph(e,t,a,n){var r=parseInt(t.LinesData[a][1].substr(1,2),16),i=parseInt(t.LinesData[a][1].substr(3,2),16),o=parseInt(t.LinesData[a][1].substr(5,2),16);e.strokeStyle=t.LinesData[a][1],e.lineWidth=3,e.lineCap="round",e.miterLimit=0,e.shadowOffsetX=2,e.shadowOffsetY=2,e.shadowBlur=5,e.shadowColor="#"+getlowcomp(r).toString(16)+getlowcomp(i).toString(16)+getlowcomp(o).toString(16),e.beginPath();var l=new Array;l=l.concat([[t.X+t.MarginLeft+findXLabelIndexForValue(n,t.LinesData[a][0][0][0])*(t.Width-t.MarginLeft)/n.length,t.Y+t.Height-t.AxisLabelsTextHeight-8-t.LinesData[a][0][0][1]*(t.Height-t.TitleTextHeight-t.AxisLabelsTextHeight-16)/t.YMaxValue]]),e.moveTo(t.X+t.MarginLeft+t.GapBetweenBars+t.BarWidth/2+findXLabelIndexForValue(n,t.LinesData[a][0][0][0])*(t.Width-t.MarginLeft-t.GapBetweenBars-t.BarWidth/2)/n.length,t.Y+t.Height-t.AxisLabelsTextHeight-8-t.LinesData[a][0][0][1]*(t.Height-t.TitleTextHeight-t.AxisLabelsTextHeight-16)/t.YMaxValue);for(var s=1;s<t.H&&s<t.LinesData[a][0].length;s++)l=l.concat([[t.X+t.MarginLeft+findXLabelIndexForValue(n,t.LinesData[a][0][s][0])*(t.Width-t.MarginLeft)/n.length,t.Y+t.Height-t.AxisLabelsTextHeight-8-t.LinesData[a][0][s][1]*(t.Height-t.TitleTextHeight-t.AxisLabelsTextHeight-16)/t.YMaxValue]]),e.lineTo(t.X+t.MarginLeft+t.GapBetweenBars+t.BarWidth/2+findXLabelIndexForValue(n,t.LinesData[a][0][s][0])*(t.GapBetweenBars+t.BarWidth),t.Y+t.Height-t.AxisLabelsTextHeight-8-t.LinesData[a][0][s][1]*(t.Height-t.TitleTextHeight-t.AxisLabelsTextHeight-16)/t.YMaxValue);t.LineXYs.concat([[l]]),e.stroke()}CCLBarsMixedWithLabledLineGraph.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,MaxValue:null,NumMarksY:null,Title:null,TitleTextColor:null,TitleTextHeight:null,TitleTextFontString:null,BarWidth:null,AxisLabelsTextHeight:null,AxisLabelsTextFontString:null,AxisLabelsTextColor:null,MarginLeft:null,GapBetweenBars:null,BarClickFunction:null,HasLegend:null,MarginRight:null,LineClickFunction:null,YMaxValue:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,LinesData:null,Intialize:function(){return createBarsMixedWithLabledLineGraph(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.MaxValue,this.NumMarksY,this.Title,this.TitleTextColor,this.TitleTextHeight,this.TitleTextFontString,this.BarWidth,this.AxisLabelsTextColor,this.AxisLabelsTextHeight,this.AxisLabelsTextFontString,this.MarginLeft,this.GapBetweenBars,this.BarClickFunction,this.HasLegend,this.MarginRight,this.LinesData,this.LineClickFunction,this.Tag,this.TabStopIndex)}};var stackedBarGraphPropsArray=new Array;function getstackedBarGraphProps(e,t){for(var a=0;a<stackedBarGraphPropsArray.length;a++)if(stackedBarGraphPropsArray[a].CanvasID==e&&stackedBarGraphPropsArray[a].WindowID==t)return stackedBarGraphPropsArray[a]}function CCLStackedBarGraph(){}function createStackedBarGraph(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S){var W=createWindow(e,a,n,r,i,o,-1,"StackedBarGraph",t,-1,S);return stackedBarGraphPropsArray.push({CanvasID:e,WindowID:W,X:a,Y:n,Width:r,Height:i,Data:l,MaxValue:s,NumMarksY:d,Title:u,TitleColor:h,TitleHeight:g,TitleFontString:c,BarWidth:w,GapBetweenBarSets:I,H:i-g-16-x,AxisLabelsColor:C,AxisLabelsHeight:x,AxisLabelsFontString:p,BarLabelsWithBoundingBoxes:new Array,BarClickFunction:f,AlreadyUnregisteredAnimation:0,MarginLeft:T,Tag:D}),registerClickFunction(W,function(e,t,a){for(var n=getstackedBarGraphProps(e,t),r=n.Data,i=0;i<r.length;i++)r[i][1];var o=a.calcX,l=a.calcY;for(i=0;i<n.BarLabelsWithBoundingBoxes.length;i++)o>=n.BarLabelsWithBoundingBoxes[i][1]&&o<=n.BarLabelsWithBoundingBoxes[i][3]&&l>=n.BarLabelsWithBoundingBoxes[i][2]&&l<=n.BarLabelsWithBoundingBoxes[i][4]&&null!=n.BarClickFunction&&n.BarClickFunction(e,t,i)},e),registerWindowDrawFunction(W,function(e,t){var a=getstackedBarGraphProps(e,t);0==a.AlreadyUnregisteredAnimation&&a.H<100&&(unregisterAnimatedWindow(e,t),a.AlreadyUnregisteredAnimation=1);var n=getCtx(e);n.save(),n.fillStyle=a.TitleColor,n.font=a.TitleFontString,n.fillText(a.Title,a.X+(a.Width-n.measureText(a.Title).width)/2,a.Y+a.TitleHeight+4),n.font=a.AxisLabelsFontString,n.beginPath(),n.moveTo(a.X+a.MarginLeft,a.Y+a.Height-a.AxisLabelsHeight-8),n.lineTo(a.X+a.MarginLeft,a.Y+a.TitleHeight+8),n.stroke();for(var r=0;r<a.NumMarksY;r++){var i=a.MaxValue/a.NumMarksY*r;i=Math.round(100*i)/100;var o=n.measureText(i.toString()).width,l=(a.Height-a.TitleHeight-a.AxisLabelsHeight-16)/a.NumMarksY;n.fillText(i.toString(),a.X+a.MarginLeft-10-o,a.Y+a.Height-a.AxisLabelsHeight-8-r*l),n.beginPath(),n.moveTo(a.X+a.MarginLeft-5,a.Y+a.Height-a.AxisLabelsHeight-8-r*l),n.lineTo(a.X+a.MarginLeft+a.GapBetweenBarSets+a.Data.length*a.BarWidth,a.Y+a.Height-a.AxisLabelsHeight-8-r*l),n.stroke()}a.BarLabelsWithBoundingBoxes=new Array;for(var s=0;s<a.Data.length;s++){n.fillStyle=a.AxisLabelsColor,n.font=a.AxisLabelsFontString;var d=n.measureText(a.Data[s][0]).width;d<a.BarWidth?n.fillText(a.Data[s][0],a.X+a.MarginLeft+s*a.BarWidth+(a.BarWidth-d)/2,a.Y+a.Height-4):n.fillText(a.Data[s][0],a.X+a.MarginLeft+s*a.BarWidth,a.Y+a.Height-a.AxisLabelsHeight-3),drawmultiplerect(n,a,s)}0==a.AlreadyUnregisteredAnimation&&a.H>100&&(a.H-=5),n.restore()},e),registerAnimatedWindow(e,W),S>0&&registerKeyDownFunction(e,function(){},W),W}function drawmultiplerect(e,t,a){e.save();for(var n=t.H,r=0,i=1;i<t.Data.length;i++)r+=t.Data[a][i][0];var o=t.Height-t.TitleHeight-t.AxisLabelsHeight-16,l=t.Height-o-t.AxisLabelsHeight-8,s=t.Height-t.AxisLabelsHeight-8;t.H<l+(o-o/t.MaxValue*r)&&(n=l+(o-o/t.MaxValue*r)),t.BarLabelsWithBoundingBoxes.push([t.Data[a][0],t.X+t.MarginLeft+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-n,t.X+t.MarginLeft+t.GapBetweenBarSets+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s]);var d=0;for(i=1;i<t.Data[a].length;i++){var u=t.Data[a][i][1],h=e.createLinearGradient(t.X,t.Y,t.X+t.BarWidth,t.Y+o),g=parseInt(u.substr(1,2),16),c=parseInt(u.substr(3,2),16),w=parseInt(u.substr(5,2),16);h.addColorStop(0,"#"+getlowcomp(g)+getlowcomp(c)+getlowcomp(w)),h.addColorStop(.5,u),h.addColorStop(1,"#"+gethighcomp(g)+gethighcomp(c)+gethighcomp(w)),e.fillStyle=h,e.shadowOffsetX=5,e.shadowBlur=5,e.shadowColor="#"+getlowcomp(g).toString(16)+getlowcomp(c).toString(16)+getlowcomp(w).toString(16),n=(s-t.H)*t.Data[a][i][0]/r,t.H<l+(o-o/t.MaxValue*r)&&(n=o*t.Data[a][i][0]/t.MaxValue),e.shadowOffsetY=0,i<t.Data[a].length-1?(e.beginPath(),e.moveTo(t.X+t.MarginLeft+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-(d+n)),e.lineTo(t.X+t.MarginLeft+t.GapBetweenBarSets+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-(d+n)),e.lineTo(t.X+t.MarginLeft+t.GapBetweenBarSets+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-d),e.lineTo(t.X+t.MarginLeft+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-d),e.closePath(),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor="#FFFFFF",(h=e.createLinearGradient(t.X,t.Y,t.X+t.BarWidth,t.Y+o)).addColorStop(0,"#FFFFFF"),h.addColorStop(.5,"#000000"),h.addColorStop(1,"#FFFFFF"),e.fillStyle=h,e.globalAlpha=.1,e.beginPath(),e.moveTo(t.X+t.MarginLeft+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth+5,t.Y+s-(d+n)+5),e.lineTo(t.X+t.MarginLeft+t.GapBetweenBarSets-5+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-(d+n)+5),e.lineTo(t.X+t.MarginLeft+t.GapBetweenBarSets-5+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-d-5),e.lineTo(t.X+t.MarginLeft+5+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-d-5),e.closePath(),e.fill(),e.globalAlpha=1):(e.beginPath(),e.moveTo(t.X+t.MarginLeft+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-(d+n)+5),e.arc(t.X+t.MarginLeft+5+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-(d+n)+5,5,Math.PI,Math.PI/180*270,!1),e.lineTo(t.X+t.MarginLeft+t.BarWidth-t.GapBetweenBarSets-5+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-(d+n)),e.arc(t.X+t.MarginLeft+t.GapBetweenBarSets-5+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-(d+n)+5,5,Math.PI/180*270,0,!1),e.lineTo(t.X+t.MarginLeft+t.GapBetweenBarSets+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-d),e.lineTo(t.X+t.MarginLeft+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-d),e.closePath(),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor="#FFFFFF",(h=e.createLinearGradient(t.X,t.Y,t.X+t.BarWidth,t.Y+o)).addColorStop(0,"#FFFFFF"),h.addColorStop(.5,"#000000"),h.addColorStop(1,"#FFFFFF"),e.fillStyle=h,e.globalAlpha=.1,e.beginPath(),e.moveTo(t.X+t.MarginLeft+5+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-(d+n)+10),e.arc(t.X+t.MarginLeft+10+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-(d+n)+10,5,Math.PI,Math.PI/180*270,!1),e.lineTo(t.X+t.MarginLeft+t.GapBetweenBarSets-10+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-(d+n)+5),e.arc(t.X+t.MarginLeft+t.GapBetweenBarSets-10+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-(d+n)+10,5,Math.PI/180*270,0,!1),e.lineTo(t.X+t.MarginLeft+t.GapBetweenBarSets-5+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-5-d),e.lineTo(t.X+t.MarginLeft+5+(t.BarWidth-t.GapBetweenBarSets)/2+a*t.BarWidth,t.Y+s-5-d),e.closePath(),e.fill(),e.globalAlpha=1),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor="#FFFFFF",d+=n,e.restore()}}CCLStackedBarGraph.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,MaxValue:null,NumMarksY:null,Title:null,TitleColor:null,TitleHeight:null,TitleFontString:null,BarWidth:null,GapBetweenBarSets:null,AxisLabelsColor:null,AxisLabelsHeight:null,AxisLabelsFontString:null,BarClickFunction:null,MarginLeft:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createStackedBarGraph(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.MaxValue,this.NumMarksY,this.Title,this.TitleColor,this.TitleHeight,this.TitleFontString,this.BarWidth,this.GapBetweenBarSets,this.AxisLabelsColor,this.AxisLabelsHeight,this.AxisLabelsFontString,this.BarClickFunction,this.MarginLeft,this.Tag,this.TabStopIndex)}};var tabPropsArray=new Array;function getTabProps(e,t){for(var a=0;a<tabPropsArray.length;a++)if(tabPropsArray[a].CanvasID==e&&tabPropsArray[a].WindowID==t)return tabPropsArray[a]}function CCLTabControl(){}function createTabControl(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W){for(var b=createWindow(e,a,n,r,i,o,-1,"Tab",t,-1,W),H=new Array,v=0;v<l.length;v++){var m=createPanel(e,t+"Panel"+v.toString(),a,n+d+8,r,i-d-8,o,c,w,I,C,x);H.push(m),registerHiddenWindow(e,m,v==p?0:1),registerChildWindow(e,m,b)}return tabPropsArray.push({CanvasID:e,WindowID:b,X:a,Y:n,Width:r,Height:i,TabLabels:l,TabLabelColor:s,TabLabelHeight:d,TabLabelFontString:u,PanelWindowIDs:H,SelectedTabID:p,TabLabelGradientStartColor:h,TabLabelGradientEndColor:g,TabLabelHitAreas:new Array,GapBetweenTabs:f,SelectedTabBorderColor:T,SelectedTabBorderLineWidth:D,Tag:S}),registerWindowDrawFunction(b,function(e,t){var a=getTabProps(e,t),n=getCtx(e);n.font=a.TabLabelFontString;var r=n.measureText(a.TabLabels[a.SelectedTabID]).width+8+2*(a.TabLabelHeight+8),i=0,o=0;a.TabLabelHitAreas=new Array;for(var l=0,s=0;s<a.TabLabels.length;s++)if(s==a.SelectedTabID+1&&(i+=r),s==a.SelectedTabID)o=i;else{var d;if(l=n.measureText(a.TabLabels[s]).width+8+2*(a.TabLabelHeight+8),s!=a.SelectedTabID&&i+l<a.Width)(d=n.createLinearGradient(a.X+i,a.Y,a.X+i+l,a.Y+a.TabLabelHeight+8)).addColorStop(0,a.TabLabelGradientStartColor),d.addColorStop(1,a.TabLabelGradientEndColor),n.fillStyle=d,n.beginPath(),n.moveTo(a.X+i+(s+1)*a.GapBetweenTabs,a.Y+a.TabLabelHeight+8),n.lineTo(a.X+i+(s+1)*a.GapBetweenTabs,a.Y+5),n.arc(a.X+i+(s+1)*a.GapBetweenTabs+5,a.Y+5,5,Math.PI,Math.PI/180*270,!1),n.lineTo(a.X+i+(s+1)*a.GapBetweenTabs+l-5,a.Y),n.arc(a.X+i+(s+1)*a.GapBetweenTabs+l-5,a.Y+5,5,Math.PI/180*270,2*Math.PI,!1),n.lineTo(a.X+i+(s+1)*a.GapBetweenTabs+l,a.Y+a.TabLabelHeight+8),n.closePath(),n.fill(),n.fillStyle=a.TabLabelColor,n.fillText(a.TabLabels[s],a.X+i+(s+1)*a.GapBetweenTabs+a.TabLabelHeight+8+4,a.Y+a.TabLabelHeight+4),a.TabLabelHitAreas.push({XStart:a.X+i,XEnd:a.X+i+2*(a.TabLabelHeight+8)+l+8,YStart:a.Y,YEnd:a.Y+a.TabLabelHeight+8,PanelWindowID:a.PanelWindowIDs[s],TabID:s});i+=l}i=o,(d=n.createLinearGradient(a.X,a.Y,a.X,a.Y+a.TabLabelHeight+8)).addColorStop(0,a.TabLabelGradientStartColor),d.addColorStop(1,a.TabLabelGradientEndColor),n.fillStyle=d,n.beginPath(),n.moveTo(a.X+i+(a.SelectedTabID+1)*a.GapBetweenTabs,a.Y+a.TabLabelHeight+8),n.lineTo(a.X+i+(a.SelectedTabID+1)*a.GapBetweenTabs,a.Y+5),n.arc(a.X+i+(a.SelectedTabID+1)*a.GapBetweenTabs+5,a.Y+5,5,Math.PI,Math.PI/180*270,!1),n.lineTo(a.X+i+(a.SelectedTabID+1)*a.GapBetweenTabs+l-5,a.Y),n.arc(a.X+i+(a.SelectedTabID+1)*a.GapBetweenTabs+l-5,a.Y+5,5,Math.PI/180*270,2*Math.PI,!1),n.lineTo(a.X+i+(a.SelectedTabID+1)*a.GapBetweenTabs+l,a.Y+a.TabLabelHeight+8),n.closePath(),n.fill(),n.fillStyle=a.TabLabelColor,n.fillText(a.TabLabels[a.SelectedTabID],a.X+i+(a.SelectedTabID+1)*a.GapBetweenTabs+a.TabLabelHeight+8+4,a.Y+a.TabLabelHeight+4),n.strokeStyle=a.SelectedTabBorderColor,n.lineWidth=a.SelectedTabBorderLineWidth,n.beginPath(),n.moveTo(a.X,a.Y+a.TabLabelHeight+8),n.lineTo(a.X+i+(a.SelectedTabID+1)*a.GapBetweenTabs,a.Y+a.TabLabelHeight+8),n.lineTo(a.X+i+(a.SelectedTabID+1)*a.GapBetweenTabs,a.Y+5),n.arc(a.X+i+(a.SelectedTabID+1)*a.GapBetweenTabs+5,a.Y+5,5,Math.PI,Math.PI/180*270,!1),n.lineTo(a.X+i+(a.SelectedTabID+1)*a.GapBetweenTabs+l-5,a.Y),n.arc(a.X+i+(a.SelectedTabID+1)*a.GapBetweenTabs+l-5,a.Y+5,5,Math.PI/180*270,2*Math.PI,!1),n.lineTo(a.X+i+(a.SelectedTabID+1)*a.GapBetweenTabs+l,a.Y+a.TabLabelHeight+8),n.lineTo(a.X+a.Width,a.Y+a.TabLabelHeight+8),n.lineTo(a.X+a.Width,a.Y+a.Height),n.stroke(),n.lineWidth=1,a.TabLabelHitAreas.push({XStart:a.X+i,XEnd:a.X+i+2*(a.TabLabelHeight+8)+l+8,YStart:a.Y,YEnd:a.Y+a.TabLabelHeight+8,PanelWindowID:a.PanelWindowIDs[a.SelectedTabID],TabID:a.SelectedTabID})},e),registerClickFunction(b,function(e,t,a){for(var n=getTabProps(e,t),r=a.calcX,i=a.calcY,o=0;o<n.TabLabelHitAreas.length;o++)if(r>n.TabLabelHitAreas[o].XStart&&r<n.TabLabelHitAreas[o].XEnd&&i>n.TabLabelHitAreas[o].YStart&&i<n.TabLabelHitAreas[o].YEnd){for(var l=0;l<n.PanelWindowIDs.length;l++)l!=n.TabLabelHitAreas[o].PanelWindowID&&setHiddenWindowStatus(e,n.PanelWindowIDs[l],1);setHiddenWindowStatus(e,n.TabLabelHitAreas[o].PanelWindowID,0),n.SelectedTabID=n.TabLabelHitAreas[o].TabID}},e),W>0&&registerKeyDownFunction(e,function(){},b),b}CCLTabControl.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,TabLabels:null,TabLabelColor:null,TabLabelHeight:null,TabLabelFontString:null,PanelWindowIDs:null,SelectedTabID:null,TabLabelGradientStartColor:null,TabLabelGradientEndColor:null,GapBetweenTabs:null,SelectedTabBorderColor:null,SelectedTabBorderLineWidth:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,PanelHasBackgroundGradient:null,PanelHasBorder:null,PanelBackgroundStartColor:null,PanelBackgroundEndColor:null,PanelBorderColor:null,Initialize:function(){return createTabControl(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.TabLabels,this.TabLabelColor,this.TabLabelHeight,this.TabLabelFontString,this.TabLabelGradientStartColor,this.TabLabelGradientEndColor,this.PanelHasBorder,this.PanelBorderColor,this.PanelHasBackgroundGradient,this.panelBackgroundStartColor,this.panelBackgroundEndColor,this.selectedTabID,this.GapBetweenTabs,this.SelectedTabBorderColor,this.SelectedTabBorderLineWidth,this.Tag,this.TabStopIndex)}};var imageMapPropsArray=new Array;function getImageMapProps(e,t){for(var a=0;a<imageMapPropsArray.length;a++)if(imageMapPropsArray[a].CanvasID==e&&imageMapPropsArray[a].WindowID==t)return imageMapPropsArray[a]}var imageMapImages=new Array;function setImageMapImage(e,t){for(var a=0,n=0;n<imageMapImages.length;n++)imageMapImages[n].CanvasID==e.CanvasID&&imageMapImages[n].WindowID==e.WindowID&&(a=1,imageMapImages[n].Image=t);0==a&&imageMapImages.push({CanvasID:e.CanvasID,WindowID:e.WindowID,Image:t})}function getImageMapImage(e){for(var t=0;t<imageMapImages.length;t++)if(imageMapImages[t].CanvasID==e.CanvasID&&imageMapImages[t].WindowID==e.WindowID)return imageMapImages[t].Image}function CCLImageMapControl(){}function createImageMapControl(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C){var x=createWindow(e,a,n,r,i,o,-1,"ImageMap",t,-1,C),p=new Image;return p.src=l,p.onload=function(){invalidateRect(e,-1,a,n,r,i)},imageMapPropsArray.push({CanvasID:e,WindowID:x,X:a,Y:n,Width:r,Height:i,ImgUrl:l,PinXYs:s,PinClickFunction:d,HasZoom:u,ImageTopLeftXOffset:h,ImageTopLeftYOffset:g,MovingMap:0,LastMovingX:0,LastMovingY:0,Scale:c,ScaleIncrementFactor:w,Tag:I}),setImageMapImage(getImageMapProps(e,x),p),registerWindowDrawFunction(x,function(e,t){var a=getImageMapProps(e,t),n=getImageMapImage(a),r=getCtx(e);r.save(),r.drawImage(n,a.ImageTopLeftXOffset,a.ImageTopLeftYOffset,a.Width/a.Scale,a.Height/a.Scale,a.X,a.Y,a.Width,a.Height);for(var i=0;i<a.PinXYs.length;i++)if(a.PinXYs[i][0]*a.Scale>a.ImageTopLeftXOffset*a.Scale&&a.PinXYs[i][0]*a.Scale<a.ImageTopLeftXOffset*a.Scale+a.Width*a.Scale&&a.PinXYs[i][1]*a.Scale>a.ImageTopLeftYOffset*a.Scale&&a.PinXYs[i][1]*a.Scale<a.ImageTopLeftYOffset*a.Scale+a.Height*a.Scale){var o=r.createRadialGradient(a.X+a.PinXYs[i][0]*a.Scale-a.ImageTopLeftXOffset*a.Scale,a.Y+a.PinXYs[i][1]*a.Scale-a.ImageTopLeftYOffset*a.Scale,0,a.X+a.PinXYs[i][0]*a.Scale-a.ImageTopLeftXOffset*a.Scale,a.Y+a.PinXYs[i][1]*a.Scale-a.ImageTopLeftYOffset*a.Scale,a.PinXYs[i][2]),l=parseInt(a.PinXYs[i][3].substr(1,2),16),s=parseInt(a.PinXYs[i][3].substr(3,2),16),d=parseInt(a.PinXYs[i][3].substr(5,2),16);o.addColorStop(0,"#"+getlowcomp(l)+getlowcomp(s)+getlowcomp(d)),o.addColorStop(.5,a.PinXYs[i][3]),o.addColorStop(1,"#"+gethighcomp(l)+gethighcomp(s)+gethighcomp(d)),r.fillStyle=o,r.beginPath(),r.arc(a.X+a.PinXYs[i][0]*a.Scale-a.ImageTopLeftXOffset*a.Scale,a.Y+a.PinXYs[i][1]*a.Scale-a.ImageTopLeftYOffset*a.Scale,a.PinXYs[i][2],0,2*Math.PI,!1),r.fill()}r.restore()},e),registerMouseDownFunction(x,function(e,t){getImageMapProps(e,t).MovingMap=1},e),registerLostFocusFunction(e,x,function(e,t){getImageMapProps(e,t).MovingMap=0}),registerMouseUpFunction(x,function(e,t){getImageMapProps(e,t).MovingMap=0},e),registerClickFunction(x,function(e,t,a){for(var n=getImageMapProps(e,t),r=a.calcX,i=a.calcY,o=0;o<n.PinXYs.length;o++)r>n.X+n.PinXYs[o][0]*n.Scale-n.ImageTopLeftXOffset*n.Scale-n.PinXYs[o][2]&&r<n.X+n.PinXYs[o][0]*n.Scale-n.ImageTopLeftXOffset*n.Scale+n.PinXYs[o][2]&&i>n.Y+n.PinXYs[o][1]*n.Scale-n.ImageTopLeftYOffset*n.Scale-n.PinXYs[o][2]&&i<n.Y+n.PinXYs[o][1]*n.Scale-n.ImageTopLeftYOffset*n.Scale+n.PinXYs[o][2]&&null!=n.PinClickFunction&&n.PinClickFunction(e,t,o)},e),registerMouseMoveFunction(x,function(e,t,a){var n=getImageMapProps(e,t),r=a.calcX,i=a.calcY,o=getImageMapImage(n);if(0==n.MovingMap)n.LastMovingX=r,n.LastMovingY=i;else if(1==n.MovingMap){var l=r-n.LastMovingX,s=i-n.LastMovingY;0!=l&&n.ImageTopLeftXOffset+l>0&&n.ImageTopLeftXOffset+l+n.Width/n.Scale<o.width&&0!=s&&n.ImageTopLeftYOffset+s>0&&n.ImageTopLeftYOffset+s+n.Height/n.Scale<o.height&&(n.ImageTopLeftXOffset+=l,n.ImageTopLeftYOffset+=s)}},e),1==u&&registerMouseWheelFunction(x,function(e,t,a){var n=getImageMapProps(e,t),r=n.Scale;n.Scale+=a.wheelDelta/120*n.ScaleIncrementFactor,(n.ImageTopLeftXOffset+n.Width/n.Scale>=p.width||n.ImageTopLeftYOffset+n.Height/n.Scale>=p.height)&&(n.Scale=r)},e),C>0&&registerKeyDownFunction(e,function(){},x),x}CCLImageMapControl.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,ImgUrl:null,PinXYs:null,PinClickFunction:null,HasZoom:null,ImageTopLeftXOffset:null,ImageTopLeftYOffset:null,MovingMap:null,LastMovingX:null,LastMovingY:null,Scale:null,ScaleIncrementFactor:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createImageMapControl(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.ImgUrl,this.PinXYs,this.PinClickFunction,this.HasZoom,this.ImageTopLeftXOffset,this.ImageTopLeftYOffset,this.Scale,this.ScaleIncrementFactor,this.Tag,this.TabStopIndex)}};var menuBarPropsArray=new Array,subMenuBarPropsArray=new Array;function getMenuBarProps(e,t){for(var a=0;a<menuBarPropsArray.length;a++)if(menuBarPropsArray[a].CanvasID==e&&menuBarPropsArray[a].WindowID==t)return menuBarPropsArray[a]}function getSubMenuBarProps(e,t){for(var a=0;a<subMenuBarPropsArray.length;a++)if(subMenuBarPropsArray[a].CanvasID==e&&subMenuBarPropsArray[a].WindowID==t)return subMenuBarPropsArray[a]}function CCLSubMenu(){}function createSubMenu(e,t,a,n,r,i,o,l,s,d,u,h){for(var g=getCtx(e),c=0,w=5,I=new Array,C=0;C<r.length;C++){g.font=r[C][3];var x=g.measureText(r[C][0]).width+10;x>c&&(c=x),w+=r[C][2]+5,I.push([r[C][0],r[C][1],r[C][2],r[C][3],r[C][4],r[C][5]])}var p=createWindow(e,i,o,c,w,n,-1,"SubMenu",t,-1,h);registerModalWindow(e,p),registerHiddenWindow(e,p,1);var f=5,T=new Array;for(C=0;C<r.length;C++)null!=r[C][6]&&T.push(createSubMenu(e,t+"SubMenuLevel1_"+C.toString(),p,n,r[C][6],i+c,o+f+5,C,s,d)),f+=r[C][2]+5;return subMenuBarPropsArray.push({CanvasID:e,WindowID:p,X:i,Y:o,Width:c,Height:w,Data:I,ParentMenuWindowID:a,ParentIndexInParentMenu:l,ChildMenuWindowIDs:T,DropDownColorStart:s,DropDownColorEnd:d,Tag:u}),registerWindowDrawFunction(p,function(e,t){var a=getSubMenuBarProps(e,t),n=getMenuBarProps(e,a.ParentMenuWindowID);if(null!=n&&null!=n||(n=getSubMenuBarProps(e,a.ParentMenuWindowID)),1==n.Data[a.ParentIndexInParentMenu][4]){var r=getCtx(e),i=r.createLinearGradient(a.X,a.Y,a.X,a.Y+a.Height);i.addColorStop(0,a.DropDownColorStart),i.addColorStop(1,a.DropDownColorEnd),r.fillStyle=i,r.beginPath(),r.rect(a.X,a.Y,a.Width,a.Height),r.fill();for(var o=0,l=0;l<a.Data.length;l++)r.fillStyle=a.Data[l][1],r.font=a.Data[l][3],r.fillText(a.Data[l][0],a.X+5,a.Y+o+5+a.Data[l][2]),o+=a.Data[l][2]+5}},e),registerClickFunction(p,function(e,t,a){for(var n=getSubMenuBarProps(e,t),r=a.calcX,i=a.calcY,o=0,l=0;l<n.Data.length;l++){if(r>n.X&&r<n.X+n.Width&&i>n.Y+o+5&&i<n.Y+o+5+n.Data[l][2])if("function"==typeof n.Data[l][5])n.Data[l][5](e,t,1,l);else for(var s=0,d=0;d<n.Data.length;d++)d==l&&(0==n.Data[l][4]?(n.Data[l][4]=1,setStatusForAllChildWindowsFromMenuBar(e,n.ChildMenuWindowIDs,0,s,n.ParentMenuWindowID)):(n.Data[l][4]=0,setStatusForAllChildWindowsFromMenuBar(e,n.ChildMenuWindowIDs,1,s,n.ParentMenuWindowID))),null==n.Data[d][5]&&s++;o+=n.Data[l][2]+5}},e),registerLostFocusFunction(e,p,function(e,t){if(0==checkIfAnyMenuHasFocusFromSubMenu(e,t)){var a=getSubMenuBarProps(e,t),n=getMenuBarProps(e,a.ParentMenuWindowID);null!=n&&null!=n||(n=getSubMenuBarProps(e,a.ParentMenuWindowID)),n.Data[a.ParentIndexInParentMenu][4]=0,setStatusForAllChildWindowsFromMenuBar(e,a.ChildMenuWindowIDs,1,-1,a.ParentMenuWindowID)}}),h>0&&registerKeyDownFunction(e,function(){},p),p}function checkIfAnyMenuHasFocusFromSubMenu(e,t){var a=getSubMenuBarProps(e,t);if(doingEventForWindowID==t)return 1;for(var n=0;n<a.ChildMenuWindowIDs.length;n++)if(doingEventForWindowID==a.ChildMenuWindowIDs[n])return 1;var r=1,i=getMenuBarProps(e,a.ParentMenuWindowID);if(null!=i&&null!=i||(r=0,i=getSubMenuBarProps(e,a.ParentMenuWindowID)),doingEventForWindowID==i.WindowID)return 1;for(;0==r;)if(r=1,null!=(i=getMenuBarProps(e,i.ParentMenuWindowID))&&null!=i||(r=0,i=getSubMenuBarProps(e,a.ParentMenuWindowID)),doingEventForWindowID==i.WindowID)return 1;return 0}function checkIfAnyMenuHasFocusFromParentMenu(e,t){var a=getMenuBarProps(e,t);if(doingEventForWindowID==t)return 1;for(var n=0;n<a.ChildMenuWindowIDs.length;n++)if(doingEventForWindowID==a.ChildMenuWindowIDs[n])return 1;return 0}function CCLMenuBar(){}function createMenuBarControl(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I){for(var C=createWindow(e,a,n,r,i,o,-1,"MenuBar",t,-1,I),x=getCtx(e),p=0,f=new Array,T=0;T<l.length;T++)x.font=l[T][3],null!=l[T][6]&&f.push(createSubMenu(e,t+T.toString(),C,o,l[T][6],a+p+5,n+i,T,h,g)),p+=x.measureText(l[T][0]).width+5;return menuBarPropsArray.push({CanvasID:e,WindowID:C,X:a,Y:n,Width:r,Height:i,Data:l,BarColorStart:s,BarColorMiddle:d,BarColorEnd:u,DropDownColorStart:h,DropDownColorEnd:g,ChildMenuWindowIDs:f,Tag:w}),registerWindowDrawFunction(C,function(e,t){var a=getMenuBarProps(e,t),n=getCtx(e),r=n.createLinearGradient(a.X,a.Y,a.X,a.Y+a.Height);r.addColorStop(0,a.BarColorStart),r.addColorStop(.5,a.BarColorMiddle),r.addColorStop(1,a.BarColorEnd),n.fillStyle=r,n.beginPath(),n.rect(a.X,a.Y,a.Width,a.Height),n.fill();for(var i=0,o=0;o<a.Data.length;o++)n.fillStyle=a.Data[o][1],n.font=a.Data[o][3],n.fillText(a.Data[o][0],a.X+i+5,a.Y+a.Height-(a.Height-a.Data[o][2])/2),i+=n.measureText(a.Data[o][0]).width+5},e),registerClickFunction(C,function(e,t,a){for(var n=getMenuBarProps(e,t),r=getCtx(e),i=a.calcX,o=a.calcY,l=0,s=0;s<n.Data.length;s++){if(r.font=n.Data[s][3],currWidth=r.measureText(n.Data[s][0]).width,i>n.X+l+5&&i<n.X+l+currWidth+5&&o>n.Y&&o<n.Y+n.Height)if("function"==typeof n.Data[s][6])n.Data[s][6](e,t,0,s);else if(null!=n.Data[s][6])for(var d=0,u=0;u<n.Data.length;u++)u==s&&(0==n.Data[s][4]?(n.Data[s][4]=1,setStatusForAllChildWindowsFromMenuBar(e,n.ChildMenuWindowIDs,0,d,null)):(n.Data[s][4]=0,setStatusForAllChildWindowsFromMenuBar(e,n.ChildMenuWindowIDs,1,d,null))),null!=n.Data[u][6]&&d++;else null!=n.Data[s][5]&&n.Data[s][5](e,t,0,s);l+=currWidth+5}},e),registerLostFocusFunction(e,C,function(e,t){if(0==checkIfAnyMenuHasFocusFromParentMenu(e,t))for(var a=getMenuBarProps(e,t),n=0;n<a.Data.length;n++)1==a.Data[n][4]&&setStatusForAllChildWindowsFromMenuBar(e,a.ChildMenuWindowIDs,1,-1,null),a.Data[n][4]=0}),I>0&&registerKeyDownFunction(e,function(){},C),C}function setStatusForAllChildWindowsFromMenuBar(e,t,a,n,r){if(0==a)for(var i=0;i<t.length;i++){setHiddenWindowStatus(e,t[i],i==n?a:1);for(var o=getSubMenuBarProps(e,t[i]),l=0;l<o.Data.length;l++)o.Data[l][4]=a;setStatusForAllChildWindowsFromMenuBar(e,o.ChildMenuWindowIDs,a,-1)}else{for(o=null;r;)(o=getSubMenuBarProps(e,r))||(o=getMenuBarProps(e,r)),r=o.ParentMenuWindowID;if(!o)for(i=0;i<menuBarPropsArray.length;i++){var s=0;for(l=0;l<t.length;l++){for(var d=0,u=0;u<menuBarPropsArray[i].ChildMenuWindowIDs.length;u++)if(t[l]==menuBarPropsArray[i].ChildMenuWindowIDs[u]){d=1;break}if(0==d){s=1;break}}if(0==s){o=menuBarPropsArray[i];break}}for(i=0;i<o.ChildMenuWindowIDs.length;i++){setHiddenWindowStatus(e,o.ChildMenuWindowIDs[i],1);var h=getSubMenuBarProps(e,o.ChildMenuWindowIDs[i]);h.ChildMenuWindowIDs.length>0&&recurseHideSubMenuBarWindows(e,h)}}}function recurseHideSubMenuBarWindows(e,t){for(var a=0;a<t.ChildMenuWindowIDs.length;a++){setHiddenWindowStatus(e,t.ChildMenuWindowIDs[a],1);var n=getSubMenuBarProps(e,t.ChildMenuWindowIDs[a]);n.ChildMenuWindowIDs.length>0&&recurseHideSubMenuBarWindows(n)}}CCLSubMenu.prototype={CanvasID:null,XOffset:null,YOffset:null,Width:null,Height:null,Data:null,ParentMenuWindowID:null,ParentIndexInParentMenu:null,DropDownColorStart:null,DropDownColorEnd:null,Tag:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createSubMenu(this.CanvasID,this.ControlNameID,this.ParentMenuWindowID,this.Depth,this.Data,this.XOffset,this.YOffset,this.ParentIndexInParentMenu,this.DropDownColorStart,this.DropDownColorEnd,this.Tag,this.TabStopIndex)}},CCLMenuBar.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,BarColorStart:null,BarColorMiddle:null,BarColorEnd:null,DropDownColorStart:null,DropDownColorEnd:null,Tag:null,Orientation:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createMenuBarControl(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.BarColorStart,this.BarColorMiddle,this.BarColorEnd,this.DropDownColorStart,this.DropDownColorEnd,this.Orientation,this.Tag,this.TabStopIndex)}};var textBoxPropsArray=new Array;function getTextBoxProps(e,t){for(var a=0;a<textBoxPropsArray.length;a++)if(textBoxPropsArray[a].CanvasID==e&&textBoxPropsArray[a].WindowID==t)return textBoxPropsArray[a]}function getTextBoxPropsByDropDownWindowID(e,t){for(var a=0;a<textBoxPropsArray.length;a++)if(textBoxPropsArray[a].CanvasID==e&&textBoxPropsArray[a].DropDownWindowID==t)return textBoxPropsArray[a]}function getTextBoxPropsByKeyboardID(e,t){for(var a=0;a<textBoxPropsArray.length;a++)if(textBoxPropsArray[a].CanvasID==e&&textBoxPropsArray[a].CustomKeyboardWindowID==t)return textBoxPropsArray[a]}function textBoxTouchKeyPress(e,t,a){var n=getTextBoxPropsByKeyboardID(e,t);switch(a.toLowerCase()){case"left":return n.CaretPosIndex>-1&&(n.CaretPosIndex--,n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.WasSelecting=0,n.MouseDown=0),void invalidateRect(e,-1,n.X,n.Y,n.Width,n.Height);case"right":return n.CaretPosIndex>n.UserInputText.length-1?n.CaretPosIndex=n.UserInputText.length-1:n.CaretPosIndex++,n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.MouseDown=0,n.WasSelecting=0,void invalidateRect(e,-1,n.X,n.Y,n.Width,n.Height);case"backspacekey":return n.CaretPosIndex>-1&&(0==n.CaretPosIndex?(n.UserInputText.length>1?n.UserInputText=n.UserInputText.substring(1,n.UserInputText.length-1):n.UserInputText="",n.CaretPosIndex=-1):n.CaretPosIndex==n.UserInputText.length-1?(n.UserInputText=n.UserInputText.substring(0,n.UserInputText.length-1),n.CaretPosIndex--):n.CaretPosIndex>0&&(n.UserInputText=n.UserInputText.substring(0,n.CaretPosIndex)+n.UserInputText.substring(n.CaretPosIndex+1),n.CaretPosIndex--),n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.MouseDown=0,n.WasSelecting=0),null!=n.ListPossiblesAllChoices&&FindTextBoxPossible(n,i),void invalidateRect(e,-1,n.X,n.Y,n.Width,n.Height);case"spacebarkey":a=" ";break;case"carriagereturnkey":return}if(!n.UserInputText||n.UserInputText&&n.UserInputText.length<n.MaxChars){var r,i=a;null!=n.ListPossiblesAllChoices&&(r=FindTextBoxPossible(n,i)),n.AllowedCharsRegEx&&null!=n.AllowedCharsRegEx&&0!=n.AllowedCharsRegEx.length&&i.match(n.AllowedCharsRegEx)!=i||n.LimitToListPossibles&&(1!=n.LimitToListPossibles||!r)||(-1==n.CaretPosIndex?(n.UserInputText=i+(n.UserInputText?n.UserInputText:""),n.CaretPosIndex++):n.UserInputText&&n.CaretPosIndex==n.UserInputText.length-1?(n.UserInputText=n.UserInputText+i,n.CaretPosIndex++):n.UserInputText&&(n.UserInputText=n.UserInputText.substring(0,n.CaretPosIndex+1)+i+n.UserInputText.substring(n.CaretPosIndex+1),n.CaretPosIndex++),n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.MouseDown=0,n.WasSelecting=0)}invalidateRect(e,-1,n.X,n.Y,n.Width,n.Height)}var textBoxImages=new Array;function setTextBoxImage(e,t){for(var a=0,n=0;n<textBoxImages.length;n++)textBoxImages[n].CanvasID==e.CanvasID&&textBoxImages[n].WindowID==e.WindowID&&(a=1,textBoxImages[n].Image=t);0==a&&textBoxImages.push({CanvasID:e.CanvasID,WindowID:e.WindowID,Image:t})}function getTextBoxImage(e){for(var t=0;t<textBoxImages.length;t++)if(textBoxImages[t].CanvasID==e.CanvasID&&textBoxImages[t].WindowID==e.WindowID)return textBoxImages[t].Image}function CCLTextbox(){}function createTextBox(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b,H,v,m,P,y,B,L,M,A,F,X,Y,k,R,E,N,G,V,O,U,K,z){var j,J,Z=createWindow(e,a,n,r,i,o,-1,"TextBox",t,-1,z);if(1==A&&(j=createWindow(e,a,n+i,r,100,o,-1,"TextBoxDropDown",t+"TextBoxDropDown",-1),J=createScrollBar(e,t+"VS",a+r-15,n+i,100,o,F.length,1,Z),registerHiddenWindow(e,j,1),registerModalWindow(e,j),registerHiddenWindow(e,J,1),registerModalWindow(e,J),registerWindowDrawFunction(j,function(e,t){var a=getTextBoxPropsByDropDownWindowID(e,t),n=getScrollBarProps(e,a.VScrollBarWindowID),r=getCtx(e);r.fillStyle="#FFFFFF",r.beginPath(),r.rect(a.X,a.Y+a.Height,a.Width-15,100),r.fill(),r.fillStyle=a.ListPossiblesTextColor,r.font=a.ListPossiblesTextFontString;for(var i=n.SelectedID;i<a.ListPossibles.length&&(a.ListPossiblesTextHeight+6)*(i-n.SelectedID+1)<100;i++)r.fillText(a.ListPossibles[i],a.X+5,a.Y+a.Height+(a.ListPossiblesTextHeight+6)*(i-n.SelectedID+1));r.strokeStyle="#b7bfc8",r.beginPath(),r.rect(a.X,a.Y+a.Height,a.Width-15,100),r.stroke()},e),registerClickFunction(j,function(t,a,n){for(var r=getTextBoxPropsByDropDownWindowID(t,a),i=getScrollBarProps(t,r.VScrollBarWindowID),o=n.calcX,l=n.calcY,s=i.SelectedID;s<r.ListPossibles.length&&(r.ListPossiblesTextHeight+6)*(s-i.SelectedID+1)<100;s++)if(o>r.X&&l>r.Y+r.Height+(r.ListPossiblesTextHeight+6)*(s-i.SelectedID)&&o<r.X+r.Width-15&&l<r.Y+r.Height+(r.ListPossiblesTextHeight+6)*(s-i.SelectedID+1))return void(r.ListPossiblesSelectedID!=s&&(r.ListPossiblesSelectedID=s,r.UserInputText=r.ListPossibles[s],setHiddenWindowStatus(e,r.VScrollBarWindowID,1),setHiddenWindowStatus(e,r.DropDownWindowID,1)))},e)),1==O&&setFocusToWindowID(e,Z),(navigator.userAgent.toLowerCase().indexOf("android")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1)&&(K||(K=createVirtualKeyboard(e,t+"VKB",a,n+i,360,180,o,null,textBoxTouchKeyPress,5,5,1,12,"12pt Ariel",null),registerModalWindow(e,K),registerHiddenWindow(e,K,0))),textBoxPropsArray.push({CanvasID:e,WindowID:Z,X:a,Y:n,Width:r,Height:i,WaterMarkText:l,WaterMarkTextColor:s,WaterMarkTextFontString:u,TextColor:h,TextHeight:g,TextFontString:c,MaxChars:w,AllowedCharsRegEx:I,IsPassword:C,PasswordChar:x,HasBorder:p,BorderColor:f,BorderLineWidth:T,HasShadow:D,ShadowOffsetX:W,ShadowOffsetY:b,ShadowBlurValue:H,HasRoundedEdges:v,EdgeRadius:m,HasBgGradient:P,BgGradientStartColor:y,BgGradientEndColor:B,HasBgImage:L,BgImageUrl:M,HasAutoComplete:A,ListPossibles:new Array,DropDownPossiblesListIfThereIsInputText:X,LimitToListPossibles:Y,ListPossiblesTextHeight:R,ListPossiblesTextFontString:E,CaretPosIndex:-1,UserInputText:N,ShadowColor:S,ShowCaret:0,CaretColor:G,SelectedTextStartIndex:-1,SelectedTextEndIndex:-1,TextSelectionBgColor:V,MouseDown:0,WasSelecting:0,MouseDownTime:0,Tag:U,DropDownWindowID:j,ListPossiblesTextColor:k,VScrollBarWindowID:J,ListPossiblesSelectedID:-1,ListPossiblesAllChoices:F,CaretTime:Date.now(),CustomKeyboardWindowID:K,TabStopIndex:z}),1==L){var _=new Image(r,i);_.src=M,_.onload=function(){invalidateRect(e,-1,a,n,r,i)},setTextBoxImage(getTextBoxProps(e,Z),_)}return registerWindowDrawFunction(Z,function(e,t){var a=getTextBoxProps(e,t),n=getCtx(e);if(n.save(),a.HasBgGradient){var r=n.createLinearGradient(a.X,a.Y,a.X,a.Y+a.Height);r.addColorStop(0,a.BgGradientStartColor),r.addColorStop(1,a.BgGradientEndColor),n.fillStyle=r}else n.fillStyle="#FFFFFF";if(a.HasShadow&&(n.shadowBlur=a.ShadowBlurValue,n.shadowColor=a.ShadowColor,n.shadowOffsetX=a.ShadowOffsetX,n.shadowOffsetY=a.ShadowOffsetY),1==a.HasBgImage){var i=getTextBoxImage(a);n.drawImage(i,0,0,i.width,i.height,a.X,a.Y,a.Width,a.Height)}else n.beginPath(),1==a.HasRoundedEdges?(n.moveTo(a.X,a.Y+a.EdgeRadius),n.arc(a.X+a.EdgeRadius,a.Y+a.EdgeRadius,a.EdgeRadius,Math.PI,Math.PI/180*270,!1),n.lineTo(a.X+a.Width-a.EdgeRadius,a.Y),n.arc(a.X+a.Width-a.EdgeRadius,a.Y+a.EdgeRadius,a.EdgeRadius,Math.PI/180*270,2*Math.PI,!1),n.lineTo(a.X+a.Width,a.Y+a.Height-a.EdgeRadius),n.arc(a.X+a.Width-a.EdgeRadius,a.Y+a.Height-a.EdgeRadius,a.EdgeRadius,0,Math.PI/2,!1),n.lineTo(a.X+a.EdgeRadius,a.Y+a.Height),n.arc(a.X+a.EdgeRadius,a.Y+a.Height-a.EdgeRadius,a.EdgeRadius,Math.PI/2,Math.PI,!1),n.closePath()):n.rect(a.X,a.Y,a.Width,a.Height),n.fill();if(n.restore(),1==a.HasBorder&&(n.strokeStyle=a.BorderColor,n.lineWidth=a.BorderLineWidth,n.beginPath(),1==a.HasRoundedEdges?(n.moveTo(a.X,a.Y+a.EdgeRadius),n.arc(a.X+a.EdgeRadius,a.Y+a.EdgeRadius,a.EdgeRadius,Math.PI,Math.PI/180*270,!1),n.lineTo(a.X+a.Width-a.EdgeRadius,a.Y),n.arc(a.X+a.Width-a.EdgeRadius,a.Y+a.EdgeRadius,a.EdgeRadius,Math.PI/180*270,2*Math.PI,!1),n.lineTo(a.X+a.Width,a.Y+a.Height-a.EdgeRadius),n.arc(a.X+a.Width-a.EdgeRadius,a.Y+a.Height-a.EdgeRadius,a.EdgeRadius,0,Math.PI/2,!1),n.lineTo(a.X+a.EdgeRadius,a.Y+a.Height),n.arc(a.X+a.EdgeRadius,a.Y+a.Height-a.EdgeRadius,a.EdgeRadius,Math.PI/2,Math.PI,!1),n.closePath()):n.rect(a.X,a.Y,a.Width,a.Height),n.stroke()),a.UserInputText&&a.UserInputText.length>0)if(n.fillStyle=a.TextColor,n.font=a.TextFontString,1==a.IsPassword){for(var o="",l=0;l<a.UserInputText.length;l++)o+=a.PasswordChar;n.fillText(o,a.X+4,a.Y+a.Height-(a.Height-a.TextHeight)/2)}else{if(a.SelectedTextStartIndex>-1&&a.SelectedTextEndIndex>-1){n.fillStyle=a.TextSelectionBgColor;var s=a.SelectedTextEndIndex==a.UserInputText.length-1?a.UserInputText.substring(a.SelectedTextStartIndex):a.UserInputText.substring(a.SelectedTextStartIndex,a.SelectedTextEndIndex-a.SelectedTextStartIndex+1),d=n.measureText(s).width,u=0==a.SelectedTextStartIndex?0:n.measureText(a.UserInputText.substring(0,a.SelectedTextStartIndex+1)).width;n.beginPath(),u+d+8>a.Width?n.rect(a.X+u+4,a.Y+(a.Height-a.TextHeight)/2,a.Width-u,a.TextHeight):n.rect(a.X+u+4,a.Y+(a.Height-a.TextHeight)/2,d,a.TextHeight),n.fill()}n.fillStyle=a.TextColor,n.fillText(a.UserInputText,a.X+4,a.Y+a.Height-(a.Height-a.TextHeight)/2)}else a.WaterMarkText&&a.WaterMarkText.length>0&&(n.fillStyle=a.WaterMarkTextColor,n.font=a.WaterMarkTextFontString,n.fillText(a.WaterMarkText,a.X+4,a.Y+a.Height-(a.Height-a.TextHeight)/2));if(1==doesWindowHaveFocus(e,t))if(1==a.ShowCaret){if(Date.now()-a.CaretTime>250&&(a.ShowCaret=0,a.CaretTime=Date.now()),n.strokeStyle=a.CaretColor,n.beginPath(),-1==a.CaretPosIndex)n.moveTo(a.X,a.Y+4),n.lineTo(a.X+3,a.Y+4),n.moveTo(a.X,a.Y+a.Height-4),n.moveTo(a.X+3,a.Y+a.Height-4),n.moveTo(a.X+2,a.Y+4),n.lineTo(a.X+2,a.Y+a.Height-4);else if(a.CaretPosIndex>-1){var h=a.UserInputText&&a.UserInputText.length-1>=a.CaretPosIndex?1==a.IsPassword?repeatPasswordChar(a.PasswordChar,a.UserInputText.length):a.UserInputText.substring(0,a.CaretPosIndex+1):"";n.font=a.TextFontString;var g=n.measureText(h).width;n.moveTo(a.X+g,a.Y+4),n.lineTo(a.X+3+g,a.Y+4),n.moveTo(a.X+g,a.Y+a.Height-4),n.moveTo(a.X+3+g,a.Y+a.Height-4),n.moveTo(a.X+2+g,a.Y+4),n.lineTo(a.X+2+g,a.Y+a.Height-4)}n.stroke()}else Date.now()-a.CaretTime>500&&(a.ShowCaret=1,a.CaretTime=Date.now())},e),registerMouseDownFunction(Z,function(e,t,a){var n=getTextBoxProps(e,t);if(n.UserInputText&&n.UserInputText.length>0){n.MouseDown=1,n.MouseDownTime=(new Date).getTime();var r=a.calcX,i=getCtx(e);if(i.font=n.TextFontString,r>n.X&&r<n.X+4)n.SelectedTextStartIndex=-1;else if(r>n.X+i.measureText(n.UserInputText).width+4)n.SelectedTextStartIndex=n.UserInputText.length-1;else{for(var o=new Array,l=0,s=0;s<n.UserInputText.length;s++){var d=i.measureText(n.UserInputText.substring(0,s+1)).width;o.push({Width:d-l}),l=d}if(r>n.X+4&&r<n.X+o[0].Width)n.SelectedTextStartIndex=0;else for(l=o[0].Width,s=1;s<o.length;s++){if(r>n.X+l&&r<n.X+l+o[s].Width){n.SelectedTextStartIndex=s;break}l+=o[s].Width}}if(n.SelectedTextStartIndex>n.SelectedTextEndIndex){var u=n.SelectedTextStartIndex;n.SelectedTextStartIndex=n.SelectedTextEndIndex,n.SelectedTextEndIndex=u}}},e),registerMouseMoveFunction(Z,function(e,t,a){var n=getTextBoxProps(e,t);if(1==n.MouseDown&&(new Date).getTime()-n.MouseDownTime>500&&n.UserInputText&&n.UserInputText.length>0){var r=a.calcX,i=getCtx(e);if(i.font=n.TextFontString,r>n.X&&r<n.X+4)n.SelectedTextEndIndex=-1;else if(r>n.X+i.measureText(n.UserInputText).width+4)n.SelectedTextEndIndex=n.UserInputText.length-1;else{for(var o=new Array,l=0,s=0;s<n.UserInputText.length;s++){var d=i.measureText(n.UserInputText.substring(0,s+1)).width;o.push({Width:d-l}),l=d}if(r>n.X+4&&r<n.X+o[0].Width)n.SelectedTextEndIndex=0;else for(l=o[0].Width,s=1;s<o.length;s++){if(r>n.X+l&&r<n.X+l+o[s].Width){n.SelectedTextEndIndex=s;break}l+=o[s].Width}}if(n.SelectedTextStartIndex>n.SelectedTextEndIndex){var u=n.SelectedTextStartIndex;n.SelectedTextStartIndex=n.SelectedTextEndIndex,n.SelectedTextEndIndex=u}}},e),registerMouseUpFunction(Z,function(e,t,a){var n=getTextBoxProps(e,t);if(1==n.MouseDown&&(n.MouseDown=0,(new Date).getTime()-n.MouseDownTime>500&&n.UserInputText&&n.UserInputText.length>0)){n.WasSelecting=1;var r=a.calcX,i=getCtx(e);if(i.font=n.TextFontString,r>n.X&&r<n.X+4)n.SelectedTextEndIndex=-1;else if(r>n.X+i.measureText(n.UserInputText).width+4)n.SelectedTextEndIndex=n.UserInputText.length-1;else{for(var o=new Array,l=0,s=0;s<n.UserInputText.length;s++){var d=i.measureText(n.UserInputText.substring(0,s+1)).width;o.push({Width:d-l}),l=d}if(r>n.X+4&&r<n.X+o[0].Width)n.SelectedTextEndIndex=0;else for(l=o[0].Width,s=1;s<o.length;s++){if(r>n.X+l&&r<n.X+l+o[s].Width){n.SelectedTextEndIndex=s;break}l+=o[s].Width}}if(n.SelectedTextStartIndex>n.SelectedTextEndIndex){var u=n.SelectedTextStartIndex;n.SelectedTextStartIndex=n.SelectedTextEndIndex,n.SelectedTextEndIndex=u}}},e),registerClickFunction(Z,function(e,t,a){var n=getTextBoxProps(e,t),r=a.calcX,i=getCtx(e);if(i.font=n.TextFontString,r>n.X&&r<n.X+4)n.CaretPosIndex=-1;else if(n.UserInputText&&r>n.X+i.measureText(n.UserInputText).width+4)n.CaretPosIndex=n.UserInputText.length-1;else if(n.UserInputText){for(var o=new Array,l=0,s=0;s<n.UserInputText.length;s++){var d=i.measureText(n.UserInputText.substring(0,s+1)).width;o.push({Width:d-l}),l=d}if(r>n.X+4&&r<n.X+o[0].Width)n.CaretPosIndex=0;else for(l=o[0].Width,s=1;s<o.length;s++){if(r>n.X+l&&r<n.X+l+o[s].Width){n.CaretPosIndex=s;break}l+=o[s].Width}}1==n.WasSelecting?n.WasSelecting=0:(n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1)},e),navigator.userAgent.toLowerCase().indexOf("android")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1||registerKeyDownFunction(e,function(e,t,a){var n=getTextBoxProps(e,t);switch(a.keyCode){case 37:return void(n.CaretPosIndex>-1&&(n.CaretPosIndex--,n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.WasSelecting=0,n.MouseDown=0));case 39:return n.CaretPosIndex>n.UserInputText.length-1?n.CaretPosIndex=n.UserInputText.length-1:n.CaretPosIndex++,n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.MouseDown=0,void(n.WasSelecting=0);case 46:return n.CaretPosIndex<n.UserInputText.length-1&&(-1==n.CaretPosIndex?n.UserInputText=n.UserInputText.substring(1):n.CaretPosIndex==n.UserInputText.length-2?n.UserInputText=n.UserInputText.substring(0,n.UserInputText.length-1):n.UserInputText=n.UserInputText.substring(0,n.CaretPosIndex+1)+n.UserInputText.substring(n.CaretPosIndex+2),n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.MouseDown=0,n.WasSelecting=0),void(null!=n.ListPossiblesAllChoices&&FindTextBoxPossible(n,i));case 8:return n.CaretPosIndex>-1&&(0==n.CaretPosIndex?(n.UserInputText.length>1?n.UserInputText=n.UserInputText.substring(1,n.UserInputText.length-1):n.UserInputText="",n.CaretPosIndex=-1):n.CaretPosIndex==n.UserInputText.length-1?(n.UserInputText=n.UserInputText.substring(0,n.UserInputText.length-1),n.CaretPosIndex--):n.CaretPosIndex>0&&(n.UserInputText=n.UserInputText.substring(0,n.CaretPosIndex)+n.UserInputText.substring(n.CaretPosIndex+1),n.CaretPosIndex--),n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.MouseDown=0,n.WasSelecting=0),void(null!=n.ListPossiblesAllChoices&&FindTextBoxPossible(n,i))}if(a.ctrlKey&&"a"==String.fromCharCode(a.keyCode).toLowerCase())n.SelectedTextStartIndex=0,n.SelectedTextEndIndex=n.UserInputText.length-1;else if(a.ctrlKey&&"c"==String.fromCharCode(a.keyCode).toLowerCase()&&window.clipboardData)n.SelectedTextStartIndex>-1&&n.SelectedTextEndIndex>-1&&n.UserInputText&&n.SelectedTextEndIndex<n.UserInputText.length&&window.clipboardData.setData("Text",n.UserInputText&&n.SelectedTextEndIndex==n.UserInputText.length-1?n.UserInputText.substring(n.SelectedTextStartIndex):n.UserInputText.substring(n.SelectedTextStartIndex,n.SelectedTextEndIndex-n.SelectedTextStartIndex+1));else if(!n.UserInputText||n.UserInputText&&n.UserInputText.length<n.MaxChars){var r,i=getCharFromKeyCode(a);null!=n.ListPossiblesAllChoices&&(r=FindTextBoxPossible(n,i)),n.AllowedCharsRegEx&&null!=n.AllowedCharsRegEx&&0!=n.AllowedCharsRegEx.length&&i.match(n.AllowedCharsRegEx)!=i||n.LimitToListPossibles&&(1!=n.LimitToListPossibles||!r)||(-1==n.CaretPosIndex?(n.UserInputText=i+(n.UserInputText?n.UserInputText:""),n.CaretPosIndex++):n.UserInputText&&n.CaretPosIndex==n.UserInputText.length-1?(n.UserInputText=n.UserInputText+i,n.CaretPosIndex++):n.UserInputText&&(n.UserInputText=n.UserInputText.substring(0,n.CaretPosIndex+1)+i+n.UserInputText.substring(n.CaretPosIndex+1),n.CaretPosIndex++),n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.MouseDown=0,n.WasSelecting=0)}},Z),registerLostFocusFunction(e,Z,function(e,t){var a=getTextBoxProps(e,t);(navigator.userAgent.toLowerCase().indexOf("android")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1)&&(0==doesWindowHaveFocus(e,a.CustomKeyboardWindowID)&&doingEventForWindowID!=a.CustomKeyboardWindowID?setHiddenWindowStatus(e,a.CustomKeyboardWindowID,1):setHiddenWindowStatus(e,a.CustomKeyboardWindowID,0)),0==doesWindowHaveFocus(e,a.VScrollBarWindowID)&&0==doesWindowHaveFocus(e,a.DropDownWindowID)&&doingEventForWindowID!=a.DropDownWindowID&&doingEventForWindowID!=a.VScrollBarWindowID&&(a.SelectedTextStartIndex=-1,a.SelectedTextEndIndex=-1,a.MouseDown=0,a.WasSelecting=0,setHiddenWindowStatus(e,a.DropDownWindowID,1),setHiddenWindowStatus(e,a.VScrollBarWindowID,1))}),registerGotFocusFunction(e,Z,function(e,t){setHiddenWindowStatus(e,getTextBoxProps(e,t).CustomKeyboardWindowID,0)}),registerAnimatedWindow(e,Z),Z}function repeatPasswordChar(e,t){for(var a="",n=0;n<t;n++)a+=e;return a}function FindTextBoxPossible(e,t){var a="";-1==e.CaretPosIndex?a=t+(e.UserInputText?e.UserInputText:""):e.UserInputText&&e.CaretPosIndex==e.UserInputText.length-1?a=e.UserInputText+t:e.UserInputText&&(a=e.UserInputText.substring(0,e.CaretPosIndex+1)+t+e.UserInputText.substring(e.CaretPosIndex+1)),e.ListPossibles=new Array;for(var n=!1,r=0;e.ListPossiblesAllChoices&&r<e.ListPossiblesAllChoices.length;r++)0==e.ListPossiblesAllChoices[r].indexOf(a)&&(n=!0,e.ListPossibles.push(e.ListPossiblesAllChoices[r]));return n?(setHiddenWindowStatus(e.CanvasID,e.DropDownWindowID,0),setHiddenWindowStatus(e.CanvasID,e.VScrollBarWindowID,0)):(setHiddenWindowStatus(e.CanvasID,e.DropDownWindowID,1),setHiddenWindowStatus(e.CanvasID,e.VScrollBarWindowID,1),e.ListPossiblesSelectedID=-1),n}CCLTextbox.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,WaterMarkText:null,WaterMarkTextColor:null,WaterMarkTextFontString:null,TextColor:null,TextHeight:null,TextFontString:null,MaxChars:null,AllowedCharsRegEx:null,IsPassword:null,PasswordChar:null,HasBorder:null,BorderColor:null,BorderLineWidth:null,HasShadow:null,ShadowOffsetX:null,ShadowOffsetY:null,ShadowBlurValue:null,HasRoundedEdges:null,EdgeRadius:null,HasBgGradient:null,BgGradientStartColor:null,BgGradientEndColor:null,HasBgImage:null,BgImageUrl:null,HasAutoComplete:null,ListPossibles:null,DropDownPossiblesListIfThereIsInputText:null,LimitToListPossibles:null,ListPossiblesTextHeight:null,ListPossiblesTextFontString:null,UserInputText:null,ShadowColor:null,ShowCaret:null,CaretColor:null,TextSelectionBgColor:null,Tag:null,DropDownWindowID:null,ListPossiblesTextColor:null,VScrollBarWindowID:null,ListPossiblesAllChoices:null,CustomKeyboardWindowID:null,ControlNameID:null,Depth:null,HasFocusInitially:null,WaterMarkTextHeight:null,TabStopIndex:-1,Initialize:function(){return createTextBox(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.WaterMarkText,this.WaterMarkTextColor,this.WaterMarkTextHeight,this.WaterMarkTextFontString,this.TextColor,this.TextHeight,this.TextFontString,this.MaxChars,this.AllowedCharsRegEx,this.IsPassword,this.PasswordChar,this.HasBorder,this.BorderColor,this.BorderLineWidth,this.HasShadow,this.ShadowColor,this.ShadowOffsetX,this.ShadowOffsetY,this.ShadowBlurValue,this.HasRoundedEdges,this.EdgeRadius,this.HasBgGradient,this.BgGradientStartColor,this.BgGradientEndColor,this.HasBgImage,this.BgImageUrl,this.HasAutoComplete,this.ListPossibles,this.DropDownPossiblesListIfThereIsInputText,this.LimitToListPossibles,this.ListPossiblesTextColor,this.ListPossiblesTextHeight,this.ListPossiblesTextFontString,this.UserInputText,this.CaretColor,this.TextSelectionBgColor,this.HasFocusInitially,this.Tag,this.CustomKeyboardWindowID,this.TabStopIndex)}};var imageFaderPropsArray=new Array;function getImageFaderProps(e,t){for(var a=0;a<imageFaderPropsArray.length;a++)if(imageFaderPropsArray[a].CanvasID==e&&imageFaderPropsArray[a].WindowID==t)return imageFaderPropsArray[a]}var imageFaderImages=new Array;function setImageFaderImage(e,t,a){for(var n=0,r=0;r<imageFaderImages.length;r++)if(imageFaderImages[r].CanvasID==e.CanvasID&&imageFaderImages[r].WindowID==e.WindowID){n=1;for(var i=0,o=0;o<imageFaderImages[r].Images.length;o++)imageFaderImages[r].Images[o].ImgURL==t&&(i=1,imageFaderImages[r].Images[o].Image=a);0==i&&imageFaderImages[r].Images.push({ImgURL:t,Image:a})}0==n&&imageFaderImages.push({CanvasID:e.CanvasID,WindowID:e.WindowID,Images:[{ImgURL:t,Image:a}]})}function getImageFaderImage(e,t){for(var a=0;a<imageFaderImages.length;a++)if(imageFaderImages[a].CanvasID==e.CanvasID&&imageFaderImages[a].WindowID==e.WindowID)for(var n=0;n<imageFaderImages[a].Images.length;n++)if(imageFaderImages[a].Images[n].ImgURL==t)return imageFaderImages[a].Images[n].Image}function getImageFaderImageByIndex(e,t){for(var a=0;a<imageFaderImages.length;a++)if(imageFaderImages[a].CanvasID==e.CanvasID&&imageFaderImages[a].WindowID==e.WindowID&&a>=0&&a<imageFaderImages[a].Images.length)return imageFaderImages[a].Images[t].Image}function getImageFaderImagesCount(e){for(var t=0;t<imageFaderImages.length;t++)if(imageFaderImages[t].CanvasID==e.CanvasID&&imageFaderImages[t].WindowID==e.WindowID)return imageFaderImages[t].Images.length}var imageFaderDrawingCanvasAndCtxs=new Array;function setImageFaderDrawingCanvasAndCtx(e,t,a){for(var n=0,r=0;r<imageFaderDrawingCanvasAndCtxs.length;r++)imageFaderDrawingCanvasAndCtxs[r].CanvasID==e.CanvasID&&imageFaderDrawingCanvasAndCtxs[r].WindowID==e.WindowID&&(n=1,imageFaderDrawingCanvasAndCtxs[r].DrawingCanvas=t,imageFaderDrawingCanvasAndCtxs[r].DrawingCanvasCtx=a);0==n&&imageFaderDrawingCanvasAndCtxs.push({CanvasID:e.CanvasID,WindowID:e.WindowID,DrawingCanvas:t,DrawingCanvasCtx:a})}function getImageFaderDrawingCanvas(e){for(var t=0;t<imageFaderDrawingCanvasAndCtxs.length;t++)if(imageFaderDrawingCanvasAndCtxs[t].CanvasID==e.CanvasID&&imageFaderDrawingCanvasAndCtxs[t].WindowID==e.WindowID)return imageFaderDrawingCanvasAndCtxs[t].DrawingCanvas}function getImageFaderDrawingCanvasCtx(e){for(var t=0;t<imageFaderDrawingCanvasAndCtxs.length;t++)if(imageFaderDrawingCanvasAndCtxs[t].CanvasID==e.CanvasID&&imageFaderDrawingCanvasAndCtxs[t].WindowID==e.WindowID)return imageFaderDrawingCanvasAndCtxs[t].DrawingCanvasCtx}function CCLImageFader(){}function createImageFader(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w){var I=createWindow(e,a,n,r,i,o,-1,"ImageFader",-1,w),C=document.createElement("canvas");C.width=r,C.height=i;var x=C.getContext("2d");imageFaderPropsArray.push({CanvasID:e,WindowID:I,X:a,Y:n,Width:r,Height:i,ImageURLs:l,FadeStartValue:s,FadeEndValue:d,FadeStepValue:u,HoldForTicks:h,ClickFunction:g,HoldCountDown:h,CurrentImageIndex:0,CurrentGlobalAlphaValue:s,OverlayImages:c}),setImageFaderDrawingCanvasAndCtx(getImageFaderProps(e,I),C,x);for(var p=0;p<l.length;p++){var f=new Image;f.onload=function(){invalidateRect(e,-1,a,n,r,i)},f.src=l[p],setImageFaderImage(getImageFaderProps(e,I),l[p],f)}return registerWindowDrawFunction(I,function(e,t){var a=getImageFaderProps(e,t),n=getImageFaderDrawingCanvasCtx(a),r=getCtx(e);if(n.save(),0==a.HoldCountDown){if(a.CurrentGlobalAlphaValue==a.FadeStartValue&&(a.CurrentImageIndex+1>=getImageFaderImagesCount(a)?a.CurrentImageIndex=0:a.CurrentImageIndex++),a.CurrentGlobalAlphaValue<a.FadeEndValue?(a.CurrentGlobalAlphaValue+=a.FadeStepValue,a.CurrentGlobalAlphaValue>1&&(a.CurrentGlobalAlphaValue=1),n.globalAlpha=a.CurrentGlobalAlphaValue):(a.CurrentGlobalAlphaValue=a.FadeStartValue,n.globalAlpha=a.CurrentGlobalAlphaValue,a.HoldCountDown=a.HoldForTicks),1==a.OverlayImages&&a.CurrentGlobalAlphaValue!=a.FadeEndValue){var i=0;if(i=a.CurrentImageIndex-1<0?getImageFaderImagesCount(a)-1:a.CurrentImageIndex-1,a.FadeEndValue-n.globalAlpha>0&&a.FadeEndValue-n.globalAlpha<1){var o=n.globalAlpha;n.globalAlpha=a.FadeEndValue-o,n.drawImage(getImageFaderImageByIndex(a,i),0,0),n.globalAlpha=o}}n.drawImage(getImageFaderImageByIndex(a,a.CurrentImageIndex),0,0),r.drawImage(getImageFaderDrawingCanvas(a),a.X,a.Y)}else a.HoldCountDown--,n.globalAlpha=a.FadeEndValue,r.drawImage(getImageFaderImageByIndex(a,a.CurrentImageIndex),a.X,a.Y);n.restore()},e),g&&registerClickFunction(I,function(e,t,a){var n=getImageFaderProps(e,t);n.ClickFunction(e,t,a,n.CurrentImageIndex)},e),registerAnimatedWindow(e,I),w>0&&registerKeyDownFunction(e,function(){},I),I}CCLImageFader.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,ImageURLs:null,FadeStartValue:null,FadeEndValue:null,FadeStepValue:null,HoldForTicks:null,ClickFunction:null,OverlayImages:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createImageFader(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.ImageURLs,this.FadeStartValue,this.FadeEndValue,this.FadeStepValue,this.HoldForTicks,this.ClickFunction,this.OverlayImages,this.TabStopIndex)}};var imageSliderPropsArray=new Array;function getImageSliderProps(e,t){for(var a=0;a<imageSliderPropsArray.length;a++)if(imageSliderPropsArray[a].CanvasID==e&&imageSliderPropsArray[a].WindowID==t)return imageSliderPropsArray[a]}var imageSliderImages=new Array;function setImageSliderImage(e,t,a){for(var n=0,r=0;r<imageSliderImages.length;r++)if(imageSliderImages[r].CanvasID==e.CanvasID&&imageSliderImages[r].WindowID==e.WindowID){n=1;for(var i=0,o=0;o<imageSliderImages[r].Images.length;o++)imageSliderImages[r].Images[o].ImgURL==t&&(i=1,imageSliderImages[r].Images[o].Image=a);0==i&&imageSliderImages[r].Images.push({ImgURL:t,Image:a})}0==n&&imageSliderImages.push({CanvasID:e.CanvasID,WindowID:e.WindowID,Images:[{ImgURL:t,Image:a}]})}function getImageSliderImage(e,t){for(var a=0;a<imageSliderImages.length;a++)if(imageSliderImages[a].CanvasID==e.CanvasID&&imageSliderImages[a].WindowID==e.WindowID)for(var n=0;n<imageSliderImages[a].Images.length;n++)if(imageSliderImages[a].Images[n].ImgURL==t)return imageSliderImages[a].Images[n].Image}function getImageSliderImageByIndex(e,t){for(var a=0;a<imageSliderImages.length;a++)if(imageSliderImages[a].CanvasID==e.CanvasID&&imageSliderImages[a].WindowID==e.WindowID&&t>=0&&t<imageSliderImages[a].Images.length)return imageSliderImages[a].Images[t].Image}function CCLImageSlider(){}function createImageSlider(e,t,a,n,r,i,o,l,s,d,u,h,g){var c=createWindow(e,a,n,r,i,o,-1,"ImageSlider",t,-1,g);imageSliderPropsArray.push({CanvasID:e,WindowID:c,X:a,Y:n,Width:r,Height:i,ImageURLs:l,Direction:s,StepIncrement:d,ClickFunction:h,HoldForTicks:u,CurrentImageIndex:0,Slide:0,HoldCountDown:u});for(var w=0;w<l.length;w++){var I=new Image;I.onload=function(){invalidateRect(e,-1,a,n,r,i)},I.src=l[w],setImageSliderImage(getImageSliderProps(e,c),l[w],I)}return registerWindowDrawFunction(c,function(e,t){var a,n,r=getImageSliderProps(e,t),i=getCtx(e);0==r.HoldCountDown?(r.Slide+=r.StepIncrement,1==r.Direction?Math.abs(r.Slide)>=r.Width?(r.HoldCountDown=r.HoldForTicks,r.Slide>0?0==r.CurrentImageIndex?r.CurrentImageIndex=r.ImageURLs.length-1:r.CurrentImageIndex--:r.Slide<0&&(r.CurrentImageIndex+1<r.ImageURLs.length?r.CurrentImageIndex++:r.CurrentImageIndex=0),r.Slide=0,r.HoldCountDown=r.HoldForTicks,i.drawImage(getImageSliderImageByIndex(r,r.CurrentImageIndex),r.X,r.Y)):r.Slide>0?(a=0==r.CurrentImageIndex?r.ImageURLs.length-1:r.CurrentImageIndex-1,i.drawImage(getImageSliderImageByIndex(r,a),r.X-r.Width+r.Slide,r.Y),i.drawImage(getImageSliderImageByIndex(r,r.CurrentImageIndex),r.X+r.Slide,r.Y)):(n=r.CurrentImageIndex+1<r.ImageURLs.length?r.CurrentImageIndex+1:0,i.drawImage(getImageSliderImageByIndex(r,r.CurrentImageIndex),r.X+r.Slide,r.Y),i.drawImage(getImageSliderImageByIndex(r,n),r.X+r.Width+r.Slide,r.Y)):Math.abs(r.Slide)>=r.Height?(r.HoldCountDown=r.HoldForTicks,r.Slide>0?0==r.CurrentImageIndex?r.CurrentImageIndex=r.ImageURLs.length-1:r.CurrentImageIndex--:r.Slide<0&&(r.CurrentImageIndex+1<r.ImageURLs.length?r.CurrentImageIndex++:r.CurrentImageIndex=0),r.Slide=0,r.HoldCountDown=r.HoldForTicks,i.drawImage(getImageSliderImageByIndex(r,r.CurrentImageIndex),r.X,r.Y)):r.Slide>0?(a=0==r.CurrentImageIndex?r.ImageURLs.length-1:r.CurrentImageIndex-1,i.drawImage(getImageSliderImageByIndex(r,a),r.X,r.Y-r.Height+r.Slide),i.drawImage(getImageSliderImageByIndex(r,r.CurrentImageIndex),r.X,r.Y+r.Slide)):(n=r.CurrentImageIndex+1<r.ImageURLs.length?r.CurrentImageIndex+1:0,i.drawImage(getImageSliderImageByIndex(r,r.CurrentImageIndex),r.X,r.Y+r.Slide),i.drawImage(getImageSliderImageByIndex(r,n),r.X,r.Y+r.Height+r.Slide))):(r.HoldCountDown--,i.drawImage(getImageSliderImageByIndex(r,r.CurrentImageIndex),r.X,r.Y))},e),h&&registerClickFunction(c,function(e,t,a){var n=getImageSliderProps(e,t);n.ClickFunction(e,t,a,n.CurrentImageIndex)},e),registerAnimatedWindow(e,c),g>0&&registerKeyDownFunction(e,function(){},c),c}CCLImageSlider.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,ImageURLs:null,Direction:null,StepIncrement:null,ClickFunction:null,HoldForTicks:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createImageSlider(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.ImageURLs,this.Direction,this.StepIncrement,this.HoldForTicks,this.ClickFunction,this.TabStopIndex)}};var multiLineLabelPropsArray=new Array;function getMultiLineLabelProps(e,t){for(var a=0;a<multiLineLabelPropsArray.length;a++)if(multiLineLabelPropsArray[a].CanvasID==e&&multiLineLabelPropsArray[a].WindowID==t)return multiLineLabelPropsArray[a]}function getMarkupFontString(e,t){for(var a=0;a<t.length;a++)if(e>=t[a][0]&&e<=t[a][1])return t[a][3]}function getMarkupFontColor(e,t){for(var a=0;a<t.length;a++)if(e>=t[a][0]&&e<=t[a][1])return t[a][2]}function getMarkupLineNumber(e,t){for(var a=0;a<t.length;a++)if(e<=t[a])return a;return t.length}function CCLMultiLineLabel(){}function createMultiLineLabel(e,t,a,n,r,i,o,l,s,d,u,h,g,c){var w=d+h,I=getCtx(e);I.font=u;var C=new Array,x="",p=new Array;if(0==o)if(0==g)for(var f=0,T=0;f<l.length;)"\n"==l.substr(f,1)?(C.push(f),T=f,w+=d+h):I.measureText(l.substr(T,f-T+1)).width>r&&(C.push(f),T=f,w+=d+h),f++;else{f=0,T=0;for(var D=-1;f<l.length;)"\n"==l.substr(f,1)?(C.push(f),T=f):I.measureText(l.substr(T,f-T+1)).width>r&&(D>-1?(C.push(D),T=D):(C.push(f),T=f)),w+=d+h,f++," "==l.substr(f,1)&&(D=f)}else if(window.DOMParser){var S=new DOMParser;xmlDoc=S.parseFromString("<root>"+l+"</root>","text/xml");for(var W=0;W<xmlDoc.firstChild.childNodes.length;W++)switch(xmlDoc.firstChild.childNodes[W].nodeName){case"NT":var b=x.length>0?x.length-1:0;x+=xmlDoc.firstChild.childNodes[W].childNodes.length>0?xmlDoc.firstChild.childNodes[W].childNodes[0].nodeValue:xmlDoc.firstChild.childNodes[W].nodeValue,p.push([b,x.length-1,s,u]);break;case"N":for(var H,v,m,P=0;P<xmlDoc.firstChild.childNodes[W].childNodes.length;P++)switch(xmlDoc.firstChild.childNodes[W].childNodes[P].nodeName){case"C":H=xmlDoc.firstChild.childNodes[W].childNodes[P].childNodes.length>0?xmlDoc.firstChild.childNodes[W].childNodes[P].childNodes[0].nodeValue:xmlDoc.firstChild.childNodes[W].childNodes[P].nodeValue;break;case"F":v=xmlDoc.firstChild.childNodes[W].childNodes[P].childNodes.length>0?xmlDoc.firstChild.childNodes[W].childNodes[P].childNodes[0].nodeValue:xmlDoc.firstChild.childNodes[W].childNodes[P].nodeValue;break;case"T":m=xmlDoc.firstChild.childNodes[W].childNodes[P].childNodes.length>0?xmlDoc.firstChild.childNodes[W].childNodes[P].childNodes[0].nodeValue:xmlDoc.firstChild.childNodes[W].childNodes[P].nodeValue}b=x.length-1;x+=m,p.push([b,x.length-1,H,v])}if(0==g){f=0,T=0;for(var y=0;f<x.length;){I.font=getMarkupFontString(f,p);var B=I.measureText(x.substr(f,1)).width;"\n"==x.substr(f,1)?(C.push(f),y=0,w+=d+h):y+B>r?(C.push(f-1),y=0,w+=d+h):(y+=B,f++)}}else for(f=0,T=0,y=0,D=-1;f<x.length;){I.font=getMarkupFontString(f,p);B=I.measureText(x.substr(f,1)).width;"\n"==x.substr(f,1)?(C.push(f),y=0,w+=d+h):y+B>r?(D>-1?(C.push(D),f=D):C.push(f-1),y=0,w+=d+h):(y+=B,f++)," "==x.substr(f,1)&&(D=f)}}var L=createWindow(e,a,n,r,w,i,-1,"MultiLineLabel",t,-1,c);return multiLineLabelPropsArray.push({CanvasID:e,WindowID:L,X:a,Y:n,Width:r,Height:w,HasMarkup:o,Text:l,TextColor:s,TextHeight:d,TextFontString:u,LineSpacingInPixels:h,LineBreakIndexes:C,MarkupTextExtents:p,MarkupText:x}),registerWindowDrawFunction(L,function(e,t){var a=getMultiLineLabelProps(e,t),n=getCtx(e);if(0==a.HasMarkup){n.font=a.TextFontString,n.fillStyle=a.TextColor;for(var r=0;r<a.LineBreakIndexes.length;r++)n.fillText(removeTrailingSpacesAndLineBreaks(a.Text.substr(r>0?a.LineBreakIndexes[r-1]:0,a.LineBreakIndexes[r]-(r>0?a.LineBreakIndexes[r-1]:0))),a.X,a.Y+a.TextHeight+(a.TextHeight+a.LineSpacingInPixels)*r);a.LineBreakIndexes[a.LineBreakIndexes.length-1]+1<a.Text.length&&n.fillText(removeTrailingSpacesAndLineBreaks(a.Text.substr(a.LineBreakIndexes[a.LineBreakIndexes.length-1])),a.X,a.Y+a.TextHeight*(a.LineBreakIndexes.length+1)+a.LineSpacingInPixels*a.LineBreakIndexes.length)}else for(var i=0,o=0,l=0;i<a.MarkupText.length;){n.font=getMarkupFontString(i,a.MarkupTextExtents),n.fillStyle=getMarkupFontColor(i,a.MarkupTextExtents);var s=getMarkupLineNumber(i,a.LineBreakIndexes);s!=l&&(l=s,o=0),n.fillText(a.MarkupText.substr(i,1),a.X+o,a.Y+a.TextHeight+(a.TextHeight+a.LineSpacingInPixels)*s),o+=n.measureText(a.MarkupText.substr(i,1)).width,i++}},e),c>0&&registerKeyDownFunction(e,function(){},L),L}CCLMultiLineLabel.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,HasMarkup:null,Text:null,TextColor:null,TextHeight:null,TextFontString:null,LineSpacingInPixels:null,WordSensitive:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createMultiLineLabel(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Depth,this.HasMarkup,this.Text,this.TextColor,this.TextHeight,this.TextFontString,this.LineSpacingInPixels,this.WordSensitive,this.TabStopIndex)}};var wordProcessorPropsArray=new Array;function getWordProcessorProps(e,t){for(var a=0;a<wordProcessorPropsArray.length;a++)if(wordProcessorPropsArray[a].CanvasID==e&&wordProcessorPropsArray[a].WindowID==t)return wordProcessorPropsArray[a]}function getWordProcessorPropsByKeyboardID(e,t){for(var a=0;a<wordProcessorPropsArray.length;a++)if(wordProcessorPropsArray[a].CanvasID==e&&wordProcessorPropsArray[a].CustomKeyboardWindowID==t)return wordProcessorPropsArray[a]}function wordProcessorTouchKeyPress(e,t,a){var n=getWordProcessorPropsByKeyboardID(e,t),r=!1;switch(a.toLowerCase()){case"left":n.CaretPosIndex>-1&&(n.CaretPosIndex--,n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.WasSelecting=0,n.MouseDown=0),r=!0;break;case"up":var i=0;if(n.LineBreakIndexes.length>0){for(var o=0;o<n.LineBreakIndexes.length;o++){if((0==o||n.CaretPosIndex>n.LineBreakIndexes[o-1])&&n.CaretPosIndex<n.LineBreakIndexes[o]){i=o;break}n.CaretPosIndex>n.LineBreakIndexes[o]&&(i=o+1)}i>0&&(n.CaretPosIndex=(1==i?0:n.LineBreakIndexes[i-2])+(n.CaretPosIndex-n.LineBreakIndexes[i-1]))}r=!0;break;case"right":n.CaretPosIndex>=n.UserInputText.length-1?n.CaretPosIndex=n.UserInputText.length-1:n.CaretPosIndex++,n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.MouseDown=0,n.WasSelecting=0,r=!0;break;case"down":i=0;if(n.LineBreakIndexes.length>0){for(o=0;o<n.LineBreakIndexes.length;o++){if((0==o||n.CaretPosIndex>n.LineBreakIndexes[o-1])&&n.CaretPosIndex<n.LineBreakIndexes[o]){i=o;break}n.CaretPosIndex>n.LineBreakIndexes[o]&&(i=o+1)}i<n.LineBreakIndexes.length&&(n.CaretPosIndex=n.LineBreakIndexes[i]+(n.CaretPosIndex-(0==i?0:n.LineBreakIndexes[i-1])))}r=!0;break;case"backspacekey":n.CaretPosIndex>-1&&(0==n.CaretPosIndex?(n.UserInputText.length>1?n.UserInputText=n.UserInputText.substring(1,n.UserInputText.length-1):n.UserInputText="",n.CaretPosIndex=-1):n.CaretPosIndex==n.UserInputText.length-1?(n.UserInputText=n.UserInputText.substring(0,n.UserInputText.length-1),n.CaretPosIndex--):n.CaretPosIndex>0&&(n.UserInputText=n.UserInputText.substring(0,n.CaretPosIndex)+n.UserInputText.substring(n.CaretPosIndex+1),n.CaretPosIndex--),n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.MouseDown=0,n.WasSelecting=0),r=!0;break;case"spacebarkey":a=" ";break;case"carriagereturnkey":a="\n"}if(!r&&(!n.UserInputText||n.UserInputText&&n.UserInputText.length<n.MaxChars)){var l=a;n.AllowedCharsRegEx&&null!=n.AllowedCharsRegEx&&0!=n.AllowedCharsRegEx.length&&l.match(n.AllowedCharsRegEx)!=l&&"\n"!=l||(-1==n.CaretPosIndex?(n.UserInputText=l+(n.UserInputText?n.UserInputText:""),n.CaretPosIndex++):n.UserInputText&&n.CaretPosIndex==n.UserInputText.length-1?(n.UserInputText=n.UserInputText+l,n.CaretPosIndex++):n.UserInputText&&(n.UserInputText=n.UserInputText.substring(0,n.CaretPosIndex+1)+l+n.UserInputText.substring(n.CaretPosIndex+1),n.CaretPosIndex++),n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.MouseDown=0,n.WasSelecting=0)}if(n.LineBreakIndexes=new Array,n.UserInputText&&n.UserInputText.length>0){var s=getCtx(e);if(0==n.WordSensitive)for(var d=0,u=0;d<n.UserInputText.length;)"\n"==n.UserInputText.substr(u,d-u+1)?(n.LineBreakIndexes.push(d),u=d):s.measureText(n.UserInputText.substr(u,d-u+1)).width+n.Margin>n.Width-15&&(n.LineBreakIndexes.push(d),u=d),d++;else{d=0,u=0;for(var h=-1;d<n.UserInputText.length;)"\n"==n.UserInputText.substr(d,1)?(n.LineBreakIndexes.push(d),u=d):s.measureText(n.UserInputText.substr(u,d-u+1)).width+n.Margin>n.Width-15&&(h>-1?(n.LineBreakIndexes.push(h),u=h):(n.LineBreakIndexes.push(d),u=d)),d++," "==n.UserInputText.substr(d,1)&&(h=d)}var g=getScrollBarProps(e,n.VScrollBarWindowID);g.MaxItems=n.LineBreakIndexes.length;i=0;if(n.LineBreakIndexes.length>0)for(o=0;o<n.LineBreakIndexes.length;o++){if((0==o||n.CaretPosIndex>n.LineBreakIndexes[o-1])&&n.CaretPosIndex<n.LineBreakIndexes[o]){i=o;break}n.CaretPosIndex>n.LineBreakIndexes[o]&&(i=o+1)}i-g.SelectedID+1>(n.Height-2*n.Margin)/(n.TextHeight+n.LineSpacingInPixels)?g.SelectedID=i-Math.floor((n.Height-2*n.Margin)/(n.TextHeight+n.LineSpacingInPixels))+1:i<g.SelectedID&&(g.SelectedID=i)}}var wordProcessorBgImages=new Array;function setWordProcessorBgImage(e,t){for(var a=0,n=0;n<wordProcessorBgImages.length;n++)wordProcessorBgImages[n].CanvasID==e.CanvasID&&wordProcessorBgImages[n].WindowID==e.WindowID&&(a=1,wordProcessorBgImages[n].Image=t);0==a&&wordProcessorBgImages.push({CanvasID:e.CanvasID,WindowID:e.WindowID,Image:t})}function getWordProcessorImage(e){for(var t=0;t<wordProcessorBgImages.length;t++)if(wordProcessorBgImages[t].CanvasID==e.CanvasID&&wordProcessorBgImages[t].WindowID==e.WindowID)return wordProcessorBgImages[t].Image}function CCLWordProcessor(){}function createWordProcessor(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b,H,v,m,P,y,B,L,M,A,F,X,Y,k){var R;if(R=1==l?createWindow(e,a,n+20,r-15,i-20,o,-1,"WordProcessor",t,-1,k):createWindow(e,a,n,r-15,i,o,-1,"WordProcessor",t,-1,k),vscrollbarwindowid=createScrollBar(e,t+"VS",a+r-15,n,i,o,(u+g)*Math.floor(i/u),1,R),(navigator.userAgent.toLowerCase().indexOf("android")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1)&&(Y||(Y=createVirtualKeyboard(e,t+"VKB",a,n+i,360,180,o,null,wordProcessorTouchKeyPress,5,5,1,12,"12pt Ariel",null))),wordProcessorPropsArray.push({CanvasID:e,WindowID:R,X:a,Y:n,Width:r,Height:i,HasMarkup:l,Text:s,TextColor:d,TextHeight:u,TextFontString:h,LineSpacingInPixels:g,WordSensitive:c,WaterMarkText:w,WaterMarkTextColor:I,WaterMarkTextHeight:C,WaterMarkTextFontString:x,MaxChars:p,HasShadow:f,ShadowColor:T,ShadowOffsetX:D,ShadowOffsetY:S,HasRoundedEdges:W,EdgeRadius:b,HasBgGradient:H,BgGradientStartColor:v,BgGradientEndColor:m,HasBgImage:P,BgImageUrl:y,Margin:B,HasBorder:L,BorderColor:M,BorderLineWidth:A,UserInputText:"",VScrollBarWindowID:vscrollbarwindowid,CaretPosIndex:-1,ShowCaret:0,CaretColor:X,LineBreakIndexes:new Array,SelectedTextStartIndex:-1,SelectedTextEndIndex:-1,MouseDown:0,WasSelecting:0,AllowedCharsRegEx:F,CaretTime:Date.now(),CustomKeyboardWindowID:Y}),1==P){var E=new Image;E.src=y,E.onload=function(){invalidateRect(e,-1,a,n,r,i)},setWordProcessorBgImage(getWordProcessorProps(e,R),E)}return registerWindowDrawFunction(R,function(e,t){var a=getWordProcessorProps(e,t),n=getScrollBarProps(e,a.VScrollBarWindowID),r=getCtx(e);if(r.save(),1==a.HasBgImage)r.drawImage(getWordProcessorImage(a),a.X,a.Y);else if(1==a.HasBgGradient){var i=r.createLinearGradient(a.X,a.Y,a.X,a.Y+a.Height);i.addColorStop(0,a.BgGradientStartColor),i.addColorStop(1,a.BgGradientEndColor),r.fillStyle=i}if(1==a.HasRoundedEdges?(r.beginPath(),r.moveTo(a.X,a.Y+a.EdgeRadius),r.arc(a.EdgeRadius+a.X,a.Y+a.EdgeRadius,a.EdgeRadius,Math.PI,Math.PI/180*270,!1),r.lineTo(a.X+a.Width-15-a.EdgeRadius,a.Y),r.arc(a.X+a.Width-15-a.EdgeRadius,a.Y+a.EdgeRadius,a.EdgeRadius,Math.PI/180*270,2*Math.PI,!1),r.lineTo(a.X+a.Width-15,a.Y+a.Height-a.EdgeRadius),r.arc(a.X+a.Width-15-a.EdgeRadius,a.Y+a.Height-a.EdgeRadius,a.EdgeRadius,0,Math.PI/2,!1),r.lineTo(a.X+a.EdgeRadius,a.Y+a.Height),r.arc(a.X+a.EdgeRadius,a.Y+a.Height-a.EdgeRadius,a.EdgeRadius,Math.PI/2,Math.PI,!1),r.closePath(),r.clip(),1==a.HasBgImage&&1==a.Image.complete?r.drawImage(a.Image,a.X,a.Y):1==a.HasBgGradient&&r.fill(),1==a.HasBorder&&(r.strokeStyle=a.BorderColor,r.lineWidth=a.BorderLineWidth,r.stroke())):(r.beginPath(),r.rect(a.X,a.Y,a.Width-15,a.Height),r.clip(),1==a.HasBgImage&&1==a.Image.complete?r.drawImage(a.Image,a.X,a.Y):1==a.HasBgGradient&&r.fill(),1==a.HasBorder&&(r.strokeStyle=a.BorderColor,r.lineWidth=a.BorderLineWidth,r.stroke())),0==a.HasMarkup){if(a.UserInputText&&a.UserInputText.length>0){r.font=a.TextFontString,r.fillStyle=a.TextColor;if(0==a.LineBreakIndexes.length&&a.UserInputText&&a.UserInputText.length>0)r.fillText(removeTrailingSpacesAndLineBreaks(a.UserInputText),a.X+a.Margin,a.Y+a.Margin+a.TextHeight);else{var o;for(o=n.SelectedID;o<a.LineBreakIndexes.length&&(o-n.SelectedID)*(a.TextHeight+a.LineSpacingInPixels)<a.Height-2*a.Margin;o++)r.fillText(removeTrailingSpacesAndLineBreaks(a.UserInputText.substr(o>0?a.LineBreakIndexes[o-1]:0,a.LineBreakIndexes[o]-(o>0?a.LineBreakIndexes[o-1]:0))),a.X+a.Margin,a.Y+a.Margin+a.TextHeight+(a.TextHeight+a.LineSpacingInPixels)*(o-n.SelectedID));a.LineBreakIndexes[a.LineBreakIndexes.length-1]+1<a.UserInputText.length&&r.fillText(removeTrailingSpacesAndLineBreaks(a.UserInputText.substr(a.LineBreakIndexes[a.LineBreakIndexes.length-1])),a.X+a.Margin,a.Y+a.Margin+(o-n.SelectedID+1)*(a.TextHeight+a.LineSpacingInPixels)-a.LineSpacingInPixels)}}else r.font=a.WaterMarkTextFontString,r.fillStyle=a.WaterMarkTextColor,r.fillText(a.WaterMarkText,a.X+a.Margin,a.Y+a.Margin+a.WaterMarkTextHeight);if(1==doesWindowHaveFocus(e,t))if(1==a.ShowCaret){Date.now()-a.CaretTime>250&&(a.ShowCaret=0,a.CaretTime=Date.now()),r.strokeStyle=a.CaretColor,r.beginPath();var l=0;if(a.LineBreakIndexes.length>0)for(var s=0;s<a.LineBreakIndexes.length;s++){if((0==s||a.CaretPosIndex>a.LineBreakIndexes[s-1])&&a.CaretPosIndex<a.LineBreakIndexes[s]){l=s;break}a.CaretPosIndex>a.LineBreakIndexes[s]&&(l=s+1)}if(-1==a.CaretPosIndex)r.moveTo(a.X+a.Margin,a.Y+a.Margin+4),r.lineTo(a.X+a.Margin+3,a.Y+a.Margin+4),r.moveTo(a.X+a.Margin,a.Y+a.Margin+a.TextHeight-4),r.moveTo(a.X+a.Margin+3,a.Y+a.Margin+a.TextHeight-4),r.moveTo(a.X+a.Margin+2,a.Y+a.Margin+4),r.lineTo(a.X+a.Margin+2,a.Y+a.Margin+a.TextHeight-4);else if(a.CaretPosIndex>-1){var d=removeTrailingSpacesAndLineBreaks(a.UserInputText&&a.UserInputText.length-1>=a.CaretPosIndex?l>0?a.UserInputText.substring(a.LineBreakIndexes[l-1],a.CaretPosIndex+1):a.UserInputText.substring(0,a.CaretPosIndex+1):"");r.font=a.TextFontString;var u=r.measureText(d).width;l-=getScrollBarProps(e,a.VScrollBarWindowID).SelectedID,r.moveTo(a.X+a.Margin+u,a.Y+a.Margin+(a.TextHeight+a.LineSpacingInPixels)*l),r.lineTo(a.X+a.Margin+3+u,a.Y+a.Margin+(a.TextHeight+a.LineSpacingInPixels)*l),r.moveTo(a.X+a.Margin+u,a.Y+a.Margin+a.TextHeight+(a.TextHeight+a.LineSpacingInPixels)*((0==l?1:l)-1)),r.moveTo(a.X+a.Margin+3+u,a.Y+a.Margin+a.TextHeight+(a.TextHeight+a.LineSpacingInPixels)*l),r.moveTo(a.X+a.Margin+2+u,a.Y+a.Margin+(a.TextHeight+a.LineSpacingInPixels)*l),r.lineTo(a.X+a.Margin+2+u,a.Y+a.Margin+a.TextHeight+(a.TextHeight+a.LineSpacingInPixels)*l)}r.stroke()}else Date.now()-a.CaretTime>500&&(a.ShowCaret=1,a.CaretTime=Date.now())}r.restore()},e),navigator.userAgent.toLowerCase().indexOf("android")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1||registerKeyDownFunction(e,function(e,t,a){var n=getWordProcessorProps(e,t),r=!1;switch(a.keyCode){case 37:n.CaretPosIndex>-1&&(n.CaretPosIndex--,n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.WasSelecting=0,n.MouseDown=0),r=!0;break;case 38:var i=0;if(n.LineBreakIndexes.length>0){for(var o=0;o<n.LineBreakIndexes.length;o++){if((0==o||n.CaretPosIndex>n.LineBreakIndexes[o-1])&&n.CaretPosIndex<n.LineBreakIndexes[o]){i=o;break}n.CaretPosIndex>n.LineBreakIndexes[o]&&(i=o+1)}i>0&&(n.CaretPosIndex=(1==i?0:n.LineBreakIndexes[i-2])+(n.CaretPosIndex-n.LineBreakIndexes[i-1]))}r=!0;break;case 39:n.CaretPosIndex>=n.UserInputText.length-1?n.CaretPosIndex=n.UserInputText.length-1:n.CaretPosIndex++,n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.MouseDown=0,n.WasSelecting=0,r=!0;break;case 40:i=0;if(n.LineBreakIndexes.length>0){for(o=0;o<n.LineBreakIndexes.length;o++){if((0==o||n.CaretPosIndex>n.LineBreakIndexes[o-1])&&n.CaretPosIndex<n.LineBreakIndexes[o]){i=o;break}n.CaretPosIndex>n.LineBreakIndexes[o]&&(i=o+1)}i<n.LineBreakIndexes.length&&(n.CaretPosIndex=n.LineBreakIndexes[i]+(n.CaretPosIndex-(0==i?0:n.LineBreakIndexes[i-1])))}r=!0;break;case 46:n.CaretPosIndex<n.UserInputText.length-1&&(-1==n.CaretPosIndex?n.UserInputText=n.UserInputText.substring(1):n.CaretPosIndex==n.UserInputText.length-2?n.UserInputText=n.UserInputText.substring(0,n.UserInputText.length-1):n.UserInputText=n.UserInputText.substring(0,n.CaretPosIndex+1)+n.UserInputText.substring(n.CaretPosIndex+2),n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.MouseDown=0,n.WasSelecting=0),r=!0;break;case 8:n.CaretPosIndex>-1&&(0==n.CaretPosIndex?(n.UserInputText.length>1?n.UserInputText=n.UserInputText.substring(1,n.UserInputText.length-1):n.UserInputText="",n.CaretPosIndex=-1):n.CaretPosIndex==n.UserInputText.length-1?(n.UserInputText=n.UserInputText.substring(0,n.UserInputText.length-1),n.CaretPosIndex--):n.CaretPosIndex>0&&(n.UserInputText=n.UserInputText.substring(0,n.CaretPosIndex)+n.UserInputText.substring(n.CaretPosIndex+1),n.CaretPosIndex--),n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.MouseDown=0,n.WasSelecting=0),r=!0}if(!r)if(a.ctrlKey&&"a"==String.fromCharCode(a.keyCode).toLowerCase())n.SelectedTextStartIndex=0,n.SelectedTextEndIndex=n.UserInputText.length-1;else if(a.ctrlKey&&"c"==String.fromCharCode(a.keyCode).toLowerCase()&&window.clipboardData)n.SelectedTextStartIndex>-1&&n.SelectedTextEndIndex>-1&&n.UserInputText&&n.SelectedTextEndIndex<n.UserInputText.length&&window.clipboardData.setData("Text",n.UserInputText&&n.SelectedTextEndIndex==n.UserInputText.length-1?n.UserInputText.substring(n.SelectedTextStartIndex):n.UserInputText.substring(n.SelectedTextStartIndex,n.SelectedTextEndIndex-n.SelectedTextStartIndex+1));else if(!n.UserInputText||n.UserInputText&&n.UserInputText.length<n.MaxChars){var l=getCharFromKeyCode(a);n.AllowedCharsRegEx&&null!=n.AllowedCharsRegEx&&0!=n.AllowedCharsRegEx.length&&l.match(n.AllowedCharsRegEx)!=l&&"\n"!=l||(-1==n.CaretPosIndex?(n.UserInputText=l+(n.UserInputText?n.UserInputText:""),n.CaretPosIndex++):n.UserInputText&&n.CaretPosIndex==n.UserInputText.length-1?(n.UserInputText=n.UserInputText+l,n.CaretPosIndex++):n.UserInputText&&(n.UserInputText=n.UserInputText.substring(0,n.CaretPosIndex+1)+l+n.UserInputText.substring(n.CaretPosIndex+1),n.CaretPosIndex++),n.SelectedTextStartIndex=-1,n.SelectedTextEndIndex=-1,n.MouseDown=0,n.WasSelecting=0)}if(n.LineBreakIndexes=new Array,n.UserInputText&&n.UserInputText.length>0){var s=getCtx(e);if(0==n.WordSensitive)for(var d=0,u=0;d<n.UserInputText.length;)"\n"==n.UserInputText.substr(u,d-u+1)?(n.LineBreakIndexes.push(d),u=d):s.measureText(n.UserInputText.substr(u,d-u+1)).width+n.Margin>n.Width-15&&(n.LineBreakIndexes.push(d),u=d),d++;else{d=0,u=0;for(var h=-1;d<n.UserInputText.length;)"\n"==n.UserInputText.substr(d,1)?(n.LineBreakIndexes.push(d),u=d):s.measureText(n.UserInputText.substr(u,d-u+1)).width+n.Margin>n.Width-15&&(h>-1?(n.LineBreakIndexes.push(h),u=h):(n.LineBreakIndexes.push(d),u=d)),d++," "==n.UserInputText.substr(d,1)&&(h=d)}var g=getScrollBarProps(e,n.VScrollBarWindowID);g.MaxItems=n.LineBreakIndexes.length;i=0;if(n.LineBreakIndexes.length>0)for(o=0;o<n.LineBreakIndexes.length;o++){if((0==o||n.CaretPosIndex>n.LineBreakIndexes[o-1])&&n.CaretPosIndex<n.LineBreakIndexes[o]){i=o;break}n.CaretPosIndex>n.LineBreakIndexes[o]&&(i=o+1)}i-g.SelectedID+1>(n.Height-2*n.Margin)/(n.TextHeight+n.LineSpacingInPixels)?g.SelectedID=i-Math.floor((n.Height-2*n.Margin)/(n.TextHeight+n.LineSpacingInPixels))+1:i<g.SelectedID&&(g.SelectedID=i)}},R),registerClickFunction(R,function(e,t,a){var n=a.calcX,r=a.calcY,i=getWordProcessorProps(e,t),o=getCtx(e),l=getScrollBarProps(e,i.VScrollBarWindowID);if(i.UserInputText.length>0){var s=0;if(i.LineBreakIndexes.length>0)for(var d=l.SelectedID;d<i.LineBreakIndexes.length&&!(i.Y+i.Margin+(i.TextHeight+i.LineSpacingInPixels)*(d-l.SelectedID+1)>r);d++)s=d+1;0==s&&(s=l.SelectedID);for(d=0==s?0:i.LineBreakIndexes[s-1];d<(s<i.LineBreakIndexes.length?i.LineBreakIndexes[s]:i.UserInputText.length)&&n>i.X+i.Margin+o.measureText(i.UserInputText.substr(0==s?0:i.LineBreakIndexes[s-1],d-(0==s?0:i.LineBreakIndexes[s-1]))).width;d++)i.CaretPosIndex=d}},e),registerLostFocusFunction(e,R,function(e,t){var a=getWordProcessorProps(e,t);(navigator.userAgent.toLowerCase().indexOf("android")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1)&&(0==doesWindowHaveFocus(e,a.CustomKeyboardWindowID)&&doingEventForWindowID!=a.CustomKeyboardWindowID?setHiddenWindowStatus(e,a.CustomKeyboardWindowID,1):setHiddenWindowStatus(e,a.CustomKeyboardWindowID,0))}),registerGotFocusFunction(e,R,function(e,t){setHiddenWindowStatus(e,getWordProcessorProps(e,t).CustomKeyboardWindowID,0)}),registerAnimatedWindow(e,R),R}function removeTrailingSpacesAndLineBreaks(e){for(;e.length>0&&("\n"==e.substr(0,1)||" "==e.substr(0,1));)e=1<e.length?e.substr(1,e.length-1):"";return e}function getCharFromKeyCode(e){switch(e.keyCode){case 16:return"";case 190:return e.shiftKey||e.shiftLeft?">":".";case 32:return" ";case 13:return"\n";case 9:return"    ";case 106:return"*";case 107:return"+";case 109:return"-";case 110:return e.shiftKey||e.shiftLeft?">":".";case 111:return"/";case 186:return e.shiftKey||e.shiftLeft?":":";";case 187:return e.shiftKey||e.shiftLeft?"+":"=";case 188:return e.shiftKey||e.shiftLeft?"<":",";case 189:return e.shiftKey||e.shiftLeft?"_":"-";case 191:return e.shiftKey||e.shiftLeft?"?":"/";case 192:return e.shiftKey||e.shiftLeft?"~":"`";case 219:return e.shiftKey||e.shiftLeft?"{":"[";case 220:return e.shiftKey||e.shiftLeft?"|":"\\";case 221:return e.shiftKey||e.shiftLeft?"}":"]";case 48:return e.shiftKey||e.shiftLeft?")":"0";case 49:return e.shiftKey||e.shiftLeft?"!":"1";case 50:return e.shiftKey||e.shiftLeft?"@":"2";case 51:return e.shiftKey||e.shiftLeft?"#":"3";case 52:return e.shiftKey||e.shiftLeft?"$":"4";case 53:return e.shiftKey||e.shiftLeft?"%":"5";case 54:return e.shiftKey||e.shiftLeft?"^":"6";case 55:return e.shiftKey||e.shiftLeft?"&":"7";case 56:return e.shiftKey||e.shiftLeft?"*":"8";case 57:return e.shiftKey||e.shiftLeft?"(":"9";case 65:return e.shiftKey||e.shiftLeft?"A":"a";case 66:return e.shiftKey||e.shiftLeft?"B":"b";case 67:return e.shiftKey||e.shiftLeft?"C":"c";case 68:return e.shiftKey||e.shiftLeft?"D":"d";case 69:return e.shiftKey||e.shiftLeft?"E":"e";case 70:return e.shiftKey||e.shiftLeft?"F":"f";case 71:return e.shiftKey||e.shiftLeft?"G":"g";case 72:return e.shiftKey||e.shiftLeft?"H":"h";case 73:return e.shiftKey||e.shiftLeft?"I":"i";case 74:return e.shiftKey||e.shiftLeft?"J":"j";case 75:return e.shiftKey||e.shiftLeft?"K":"k";case 76:return e.shiftKey||e.shiftLeft?"L":"l";case 77:return e.shiftKey||e.shiftLeft?"M":"m";case 78:return e.shiftKey||e.shiftLeft?"N":"n";case 79:return e.shiftKey||e.shiftLeft?"O":"o";case 80:return e.shiftKey||e.shiftLeft?"P":"p";case 81:return e.shiftKey||e.shiftLeft?"Q":"q";case 82:return e.shiftKey||e.shiftLeft?"R":"r";case 83:return e.shiftKey||e.shiftLeft?"S":"s";case 84:return e.shiftKey||e.shiftLeft?"T":"t";case 85:return e.shiftKey||e.shiftLeft?"U":"u";case 86:return e.shiftKey||e.shiftLeft?"V":"v";case 87:return e.shiftKey||e.shiftLeft?"W":"w";case 88:return e.shiftKey||e.shiftLeft?"X":"x";case 89:return e.shiftKey||e.shiftLeft?"Y":"y";case 90:return e.shiftKey||e.shiftLeft?"Z":"z";case 222:return e.shiftKey||e.shiftLeft?'"':"'";default:return""}}CCLWordProcessor.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,HasMarkup:null,Text:null,TextColor:null,TextHeight:null,TextFontString:null,LineSpacingInPixels:null,WordSensitive:null,WaterMarkText:null,WaterMarkTextColor:null,WaterMarkTextHeight:null,WaterMarkTextFontString:null,MaxChars:null,HasShadow:null,ShadowColor:null,ShadowOffsetX:null,ShadowOffsetY:null,HasRoundedEdges:null,EdgeRadius:null,HasBgGradient:null,BgGradientStartColor:null,BgGradientEndColor:null,HasBgImage:null,BgImageUrl:null,Margin:null,HasBorder:null,BorderColor:null,BorderLineWidth:null,ShowCaret:null,CaretColor:null,AllowedCharsRegEx:null,CustomKeyboardWindowID:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createWordProcessor(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.HasMarkup,this.Text,this.TextColor,this.TextHeight,this.TextFontString,this.LineSpacingInPixels,this.WordSensitive,this.WaterMarkText,this.WaterMarkTextColor,this.WaterMarkTextHeight,this.WaterMarkTextFontString,this.MaxChars,this.HasShadow,this.ShadowColor,this.ShadowOffsetX,this.ShadowOffsetY,this.HasRoundedEdges,this.EdgeRadius,this.HasBgGradient,this.BgGradientStartColor,this.BgGradientEndColor,this.HasBgImage,this.BgImageUrl,this.Margin,this.HasBorder,this.BorderColor,this.BorderLineWidth,this.AllowedCharsRegEx,this.CaretColor,this.CustomKeyboardWindowID,this.TabStopIndex)}};var virtualKeyboardPropsArray=new Array;function getVirtualKeyboardProps(e,t){for(var a=0;a<virtualKeyboardPropsArray.length;a++)if(virtualKeyboardPropsArray[a].CanvasID==e&&virtualKeyboardPropsArray[a].WindowID==t)return virtualKeyboardPropsArray[a]}function CCLVirtualKeyboard(){}function createVirtualKeyboard(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I){var C=createWindow(e,a,n,r,i,o,-1,"VirtualKeyboard",t,-1,I),x=null==l?0:1;return l||(l=[[[["Q",30,30],["W",30,30],["E",30,30],["R",30,30],["T",30,30],["Y",30,30],["U",30,30],["I",30,30],["O",30,30],["P",30,30]],[["A",30,30],["S",30,30],["D",30,30],["F",30,30],["G",30,30],["H",30,30],["J",30,30],["K",30,30],["L",30,30]],[["shiftKey",30,30],["Z",30,30],["X",30,30],["C",30,30],["V",30,30],["B",30,30],["N",30,30],["M",30,30],["backspaceKey",30,30]],[["keyboardOff",30,30],[",",30,30],["spacebarKey",60,30],[".",30,30],["12#",30,30,1],["carriageReturnKey",30,30]],[["up",30,30],["down",30,30],["left",30,30],["right",30,30]]],[[["1",30,30],["2",30,30],["3",30,30],["4",30,30],["5",30,30],["6",30,30],["7",30,30],["8",30,30],["9",30,30],["0",30,30]],[["!",30,30],["@",30,30],["#",30,30],["$",30,30],["%",30,30],["&",30,30],["*",30,30],["?",30,30],["/",30,30]],[["_",30,30],['"',30,30],["'",30,30],["(",30,30],[")",30,30],["-",30,30],["+",30,30],[";",30,30],["backspaceKey",30,30]],[["keyboardOff",30,30],[":",30,30],[",",30,30],["spacebarKey",45,30],[".",30,30],["ABC",40,30,0],["carriageReturnKey",30,30]],[["up",30,30],["down",30,30],["left",30,30],["right",30,30]]]]),virtualKeyboardPropsArray.push({CanvasID:e,WindowID:C,X:a,Y:n,Width:r,Height:i,Keys:l,KeyPressFunction:s,GapBetweenButtons:d,GapBetweenRows:u,CurrentKeyboardIndex:0,KeyExtents:null,TextHeight:g,TextFontString:c,CustomKeys:x,CustomDrawLetterFunction:w,HasGloss:h,ShiftKeyPressed:0}),registerWindowDrawFunction(C,function(t,a){var n=getVirtualKeyboardProps(t,a);n.KeyExtents=new Array;var r=getCtx(t);r.fillStyle="#3c4243",r.beginPath(),r.rect(n.X,n.Y,n.Width,n.Height),r.fill(),r.strokeStyle="#353a3b";for(var i=n.Height/Math.tan(Math.PI/4),o=0;o<(n.Width+i)/10;o++)r.beginPath(),r.moveTo(n.X-i+10*o,n.Y),r.lineTo(n.X+10*o,n.Y+n.Height),r.stroke(),r.beginPath(),r.moveTo(n.X-i+10*o,n.Y+n.Height),r.lineTo(n.X+10*o,n.Y),r.stroke();for(var l=n.GapBetweenRows,s=0;s<n.Keys[n.CurrentKeyboardIndex].length;s++){for(var d=0,u=0;u<n.Keys[n.CurrentKeyboardIndex][s].length;u++)d+=n.Keys[n.CurrentKeyboardIndex][s][u][1]+n.GapBetweenButtons;var h=n.GapBetweenButtons+(n.Width-n.GapBetweenButtons-d)/2;for(u=0;u<n.Keys[n.CurrentKeyboardIndex][s].length;u++){var g;if(r.beginPath(),r.moveTo(h+n.X,l+n.Y+5),r.arc(h+n.X+5,l+n.Y+5,5,Math.PI,Math.PI/180*270,!1),r.lineTo(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]-5,l+n.Y),r.arc(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]-5,l+n.Y+5,5,Math.PI/180*270,2*Math.PI,!1),r.lineTo(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1],l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]-5),r.arc(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]-5,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]-5,5,0,Math.PI/2,!1),r.lineTo(h+n.X+5,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]),r.arc(h+n.X+5,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]-5,5,Math.PI/2,Math.PI,!1),r.closePath(),n.KeyExtents.push([h+n.X,l+n.Y,n.Keys[n.CurrentKeyboardIndex][s][u][1],n.Keys[n.CurrentKeyboardIndex][s][u][2],1==n.ShiftKeyPressed?n.Keys[n.CurrentKeyboardIndex][s][u][0]:n.Keys[n.CurrentKeyboardIndex][s][u][0].toLowerCase(),s,u]),(g=r.createLinearGradient(h+n.X,l+n.Y,h+n.X,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2])).addColorStop(0,"#536fa0"),g.addColorStop(1,"#274580"),r.fillStyle=g,r.fill(),r.strokeStyle="#1f3a73",r.stroke(),0==n.CustomKeys)switch((g=r.createLinearGradient(h+n.X,l+n.Y+(n.Keys[n.CurrentKeyboardIndex][s][u][2]-n.TextHeight)/2,h+n.X,l+n.Y-(n.Keys[n.CurrentKeyboardIndex][s][u][2]-n.TextHeight)/2+n.Keys[n.CurrentKeyboardIndex][s][u][2])).addColorStop(0,"#fafbfc"),g.addColorStop(1,"#dde2ea"),r.fillStyle=g,r.strokeStyle=g,r.shadowBlur=5,r.shadowColor="#636e7f",r.font=n.TextFontString,n.Keys[n.CurrentKeyboardIndex][s][u][0]){case"shiftKey":if(r.beginPath(),r.moveTo(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]/2,l+n.Y+5),r.lineTo(h+n.X+5,l+n.Y+15),r.lineTo(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]/2-3,l+n.Y+15),r.lineTo(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]/2-3,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][1]-5),r.lineTo(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]/2+3,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][1]-5),r.lineTo(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]/2+3,l+n.Y+15),r.lineTo(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]-5,l+n.Y+15),r.closePath(),1==n.ShiftKeyPressed){r.save();var c=r.createLinearGradient(h+n.X,l+n.Y,h+n.X,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]);c.addColorStop(0,"#00FF00"),c.addColorStop(1,"#FFFFFF"),r.fillStyle=c,r.fill(),r.restore()}else r.fill();break;case"backspaceKey":r.beginPath(),r.moveTo(h+n.X+5,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]/2),r.lineTo(h+n.X+14,l+n.Y+5),r.lineTo(h+n.X+14,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]/2-3),r.lineTo(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]-5,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]/2-3),r.lineTo(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]-5,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]/2+3),r.lineTo(h+n.X+14,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]/2+3),r.lineTo(h+n.X+14,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]-5),r.closePath(),r.fill();break;case"keyboardOff":r.beginPath(),r.rect(h+n.X+5,l+n.Y+5,n.Keys[n.CurrentKeyboardIndex][s][u][1]-10,n.Keys[n.CurrentKeyboardIndex][s][u][2]-10),r.stroke();for(var w=0;w<(n.Keys[n.CurrentKeyboardIndex][s][u][1]-10)/4;w++)for(var I=0;I<(n.Keys[n.CurrentKeyboardIndex][s][u][2]-10)/4;I++)r.beginPath(),r.rect(h+n.X+5+4*w,l+n.Y+5+4*I,3,3),r.stroke();break;case"spacebarKey":r.beginPath(),r.moveTo(h+n.X+5,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]-10),r.lineTo(h+n.X+5,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]-5),r.lineTo(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]-5,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]-5),r.lineTo(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]-5,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]-10),r.stroke();break;case"carriageReturnKey":r.beginPath(),r.moveTo(h+n.X+5,l+n.Y+22),r.lineTo(h+n.X+14,l+n.Y+15),r.lineTo(h+n.X+14,l+n.Y+19),r.lineTo(h+n.X+19,l+n.Y+19),r.lineTo(h+n.X+19,l+n.Y+5),r.lineTo(h+n.X+25,l+n.Y+5),r.lineTo(h+n.X+25,l+n.Y+25),r.lineTo(h+n.X+14,l+n.Y+25),r.lineTo(h+n.X+14,l+n.Y+29),r.closePath(),r.fill();break;case"up":r.beginPath(),r.moveTo(h+n.X+15,l+n.Y+5),r.lineTo(h+n.X+25,l+n.Y+25),r.lineTo(h+n.X+5,l+n.Y+25),r.closePath(),r.fill();break;case"down":r.beginPath(),r.moveTo(h+n.X+15,l+n.Y+25),r.lineTo(h+n.X+5,l+n.Y+5),r.lineTo(h+n.X+25,l+n.Y+5),r.closePath(),r.fill();break;case"left":r.beginPath(),r.moveTo(h+n.X+5,l+n.Y+15),r.lineTo(h+n.X+25,l+n.Y+5),r.lineTo(h+n.X+25,l+n.Y+25),r.closePath(),r.fill();break;case"right":r.beginPath(),r.moveTo(h+n.X+25,l+n.Y+15),r.lineTo(h+n.X+5,l+n.Y+25),r.lineTo(h+n.X+5,l+n.Y+5),r.closePath(),r.fill();break;case"12#":case"ABC":r.fillText(n.Keys[n.CurrentKeyboardIndex][s][u][0],h+n.X+(n.Keys[n.CurrentKeyboardIndex][s][u][1]-r.measureText(n.Keys[n.CurrentKeyboardIndex][s][u][0]).width)/2,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]-(n.Keys[n.CurrentKeyboardIndex][s][u][2]-n.TextHeight)/2);break;default:r.fillText(1==n.ShiftKeyPressed?n.Keys[n.CurrentKeyboardIndex][s][u][0]:n.Keys[n.CurrentKeyboardIndex][s][u][0].toLowerCase(),h+n.X+(n.Keys[n.CurrentKeyboardIndex][s][u][1]-r.measureText(1==n.ShiftKeyPressed?n.Keys[n.CurrentKeyboardIndex][s][u][0]:n.Keys[n.CurrentKeyboardIndex][s][u][0].toLowerCase()).width)/2,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]-(n.Keys[n.CurrentKeyboardIndex][s][u][2]-n.TextHeight)/2)}else n.CustomDrawLetterFunction(r,n.Keys[n.CurrentKeyboardIndex][s][u][0],h+n.X,l+n.Y,n.Keys[n.CurrentKeyboardIndex][s][u][1],n.Keys[n.CurrentKeyboardIndex][s][u][2]);if(1==n.HasGloss)r.beginPath(),r.moveTo(h+n.X+2,l+n.Y+5+2),r.arc(h+n.X+5+2,l+n.Y+5+2,5,Math.PI,Math.PI/180*270,!1),r.lineTo(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]-5-2,l+n.Y+2),r.arc(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]-5-2,l+n.Y+5+2,5,Math.PI/180*270,2*Math.PI,!1),r.lineTo(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]-2,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]-5+2),r.arc(h+n.X+n.Keys[n.CurrentKeyboardIndex][s][u][1]-5-2,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]-5+2,5,0,Math.PI/2,!1),r.lineTo(h+n.X+5+2,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]+2),r.arc(h+n.X+5+2,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]-5+2,5,Math.PI/2,Math.PI,!1),r.closePath(),(g=r.createLinearGradient(h+n.X+2,l+n.Y+2,h+n.X+2,l+n.Y+n.Keys[n.CurrentKeyboardIndex][s][u][2]/2)).addColorStop(0,"rgba(255,255,255,0.4)"),g.addColorStop(1,"rgba(255,255,255,0.05)"),r.fillStyle=g,r.fill();h+=n.Keys[n.CurrentKeyboardIndex][s][u][1]+n.GapBetweenButtons}l+=n.Keys[n.CurrentKeyboardIndex][s][0][2]+n.GapBetweenRows}registerClickFunction(C,function(e,t,a){donotredaw=1;for(var n=a.calcX,r=a.calcY,i=getVirtualKeyboardProps(e,t),o=0;o<i.KeyExtents.length;o++)if(n>i.KeyExtents[o][0]&&n<i.KeyExtents[o][0]+i.KeyExtents[o][2]&&r>i.KeyExtents[o][1]&&r<i.KeyExtents[o][1]+i.KeyExtents[o][3])return void(4==i.Keys[i.CurrentKeyboardIndex][i.KeyExtents[o][5]][i.KeyExtents[o][6]].length?i.CurrentKeyboardIndex=i.Keys[i.CurrentKeyboardIndex][i.KeyExtents[o][5]][i.KeyExtents[o][6]][3]:"shiftKey"==i.Keys[i.CurrentKeyboardIndex][i.KeyExtents[o][5]][i.KeyExtents[o][6]][0]?i.ShiftKeyPressed=1==i.ShiftKeyPressed?0:1:i.KeyPressFunction(e,t,i.KeyExtents[o][4]))},e)},e),I>0&&registerKeyDownFunction(e,function(){},C),C}CCLVirtualKeyboard.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Keys:null,KeyPressFunction:null,GapBetweenButtons:null,GapBetweenRows:null,TextHeight:null,TextFontString:null,CustomDrawLetterFunction:null,HasGloss:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createVirtualKeyboard(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Keys,this.KeyPressFunction,this.GapBetweenButtons,this.GapBetweenRows,this.HasGloss,this.TextHeight,this.TextFontString,this.CustomDrawLetterFunction,this.TabStopIndex)}};var splitterPropsArray=new Array;function getSplitterProps(e,t){for(var a=0;a<splitterPropsArray.length;a++)if(splitterPropsArray[a].CanvasID==e&&splitterPropsArray[a].WindowID==t)return splitterPropsArray[a]}function CCLSplitter(){}function createSplitter(e,t,a,n,r,i,o,l,s){var d=createWindow(e,a,n,r,i,o,-1,"Splitter",t,-1,s);splitterPropsArray.push({CanvasID:e,WindowID:d,X:a,Y:n,Width:r,Height:i,LineColor:l,MouseDown:0}),registerWindowDrawFunction(d,function(e,t){var a=getSplitterProps(e,t),n=getCtx(e);n.fillStyle=a.LineColor,n.rect(a.X,a.Y,a.Width,a.Height),n.fill()},e),registerMouseDownFunction(d,function(t,a){getSplitterProps(e,d).MouseDown=1},e);for(var u=0;u<windows.length;u++)-1==windows[u].ParentWindowID&&(i>r&&windows[u].X<a+r+2&&windows[u].X+windows[u].Width>a-2||r>i&&windows[u].Y<n+i&&windows[u].Y+windows[u].Height>n-2)&&registerMouseMoveFunction(windows[u].WindowCount,function(t,a,n){var r=getSplitterProps(e,d);if(1==r.MouseDown){var i=getWindowProps(e,d),o=(n=correctEvent(e,window.event)).calcX,l=n.calcY,s=1e6,u=0,h=0,g=1e6;if(r.Height>r.Width){var c=o-r.X;if(0!=c){for(var w=0;w<windows.length;w++)if(windows[w].WindowCount!=d&&-1==windows[w].ParentWindowID&&r.X-2<windows[w].X+windows[w].Width&&r.X+r.Width+2>windows[w].X){if(windows[w].X<s&&(s=windows[w].X),windows[w].X+windows[w].Width>u&&(u=windows[w].X+windows[w].Width),windows[w].Y<g&&(g=windows[w].Y),windows[w].Y+windows[w].Height>h&&(h=windows[w].Y+windows[w].Height),windows[w].X+windows[w].Width<i.X)windows[w].Width+=c,getWindowControlPropsByWindowProps(windows[w]).Width=windows[w].Width;else if(windows[w].X>i.X){windows[w].X+=c,windows[w].Width-=c,(C=getWindowControlPropsByWindowProps(windows[w])).X=windows[w].X,C.Width=windows[w].Width}windows[w].Width<0&&(windows[w].Width=0)}i.X=o,r.X=o,invalidateRect(e,-1,s,g,u-s,h-g)}}else if(r.Width>r.Height){var I=l-r.Y;if(0!=I){for(w=0;w<windows.length;w++)if(windows[w].WindowCount!=d&&-1==windows[w].ParentWindowID&&r.Y-2<windows[w].Y+windows[w].Height&&r.Y+r.Height+2>windows[w].Y){if(windows[w].X<s&&(s=windows[w].X),windows[w].X+windows[w].Width>u&&(u=windows[w].X+windows[w].Width),windows[w].Y<g&&(g=windows[w].Y),windows[w].Y+windows[w].Height>h&&(h=windows[w].Y+windows[w].Height),windows[w].Y+windows[w].Height<i.Y)windows[w].Height+=I,getWindowControlPropsByWindowProps(windows[w]).Height=windows[w].Height;else if(windows[w].Y>i.Y){var C;windows[w].Y+=I,windows[w].Height-=I,(C=getWindowControlPropsByWindowProps(windows[w])).Y=windows[w].Y,C.Height=windows[w].Height}windows[w].Height<0&&(windows[w].Height=0)}i.Y=l,r.Y=l,invalidateRect(e,-1,s,g,u-s,h-g)}}}},e);return registerMouseUpFunction(d,function(){getSplitterProps(e,d).MouseDown=0},e),s>0&&registerKeyDownFunction(e,function(){},d),d}CCLSplitter.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,LineColor:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createSplitter(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.LineColor,this.TabStopIndex)}};var boundaryFillableMapPropsArray=new Array,boundaryFillableMapImages=new Array;function getBoundaryFillableMapProps(e,t){for(var a=0;a<boundaryFillableMapPropsArray.length;a++)if(boundaryFillableMapPropsArray[a].CanvasID==e&&boundaryFillableMapPropsArray[a].WindowID==t)return boundaryFillableMapPropsArray[a]}function getBoundaryFillableMapImage(e,t){for(var a=0;a<boundaryFillableMapImages.length;a++)if(boundaryFillableMapImages[a].CanvasID==e&&boundaryFillableMapImages[a].WindowID==t)return boundaryFillableMapImages[a].Image}function CCLBoundaryFillableMap(){}function createBoundaryFillableMap(e,t,a,n,r,i,o,l,s,d,u,h){var g=createWindow(e,a,n,r,i,o,-1,"BoundaryFillableMap",t,-1,h),c=new Image;return boundaryFillableMapImages.push({CanvasID:e,WindowID:g,Image:c}),c.onload=function(){invalidateRect(e,-1,a,n,r,i)},c.src=s,boundaryFillableMapPropsArray.push({CanvasID:e,WindowID:g,X:a,Y:n,Width:r,Height:i,FillPoints:l,ImgURL:s,ImageWidth:d,ImageHeight:u}),registerWindowDrawFunction(g,function(e,t){var a=getBoundaryFillableMapProps(e,t),n=getCtx(e),r=document.createElement("canvas");r.width=a.ImageWidth,r.height=a.ImageHeight;var i=r.getContext("2d");i.drawImage(getBoundaryFillableMapImage(e,t),0,0);for(var o=i.getImageData(0,0,r.width,r.height),l=0;l<a.FillPoints.length;l++)o=fillImageData(a.FillPoints[l],o);n.putImageData(o,a.X,a.Y)},e),h>0&&registerKeyDownFunction(e,function(){},g),g}function fillImageData(e,t){var a=new Array;for(a.push([e[0],e[1]]);a.length>0;){var n=a[a.length-1][0],r=a[a.length-1][1];a.pop(),t.data[r*t.width*4+4*n]==e[6]&&t.data[r*t.width*4+4*n+1]==e[7]&&t.data[r*t.width*4+4*n+2]==e[8]&&t.data[r*t.width*4+4*n+3]==e[9]&&(t.data[r*t.width*4+4*n]=e[10],t.data[r*t.width*4+4*n+1]=e[11],t.data[r*t.width*4+4*n+2]=e[12],t.data[r*t.width*4+4*n+3]=e[13],(17==e.length&&0==e[14]?n-1>e[15]:n-1>e[2])&&a.push([n-1,r]),(17==e.length&&0==e[14]?n+1<e[16]:n+1<e[4])&&a.push([n+1,r]),(17==e.length&&1==e[14]?r-1>e[15]:r-1>e[3])&&a.push([n,r-1]),(17==e.length&&1==e[14]?n-1>e[16]:r+1<e[5])&&a.push([n,r+1]))}return t}CCLBoundaryFillableMap.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,FillPoints:null,ImgURL:null,Image:null,ImageWidth:null,ImageHeight:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){return createBoundaryFillableMap(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.FillPoints,this.ImgURL,this.ImageWidth,this.ImageHeight,this.TabStopIndex)}};var simpleXMLViewerPropsArray=new Array;function getSimpleXMLViewerProps(e,t){for(var a=0;a<simpleXMLViewerPropsArray.length;a++)if(simpleXMLViewerPropsArray[a].CanvasID==e&&simpleXMLViewerPropsArray[a].WindowID==t)return simpleXMLViewerPropsArray[a]}function fillSimpleXMLViewerChildNodes(e,t,a,n,r,i,o){for(var l=0;l<t.length;l++){var s=addChildNodes(e.ChildNodes,e,0==n?null:r,1,t[l].nodeName,["Node",t[l]]);if(t[l].attributes&&t[l].attributes.length>0)for(var d=0;d<t[l].attributes.length;d++){var u=addChildNodes(s.ChildNodes,s,o,1,t[l].attributes[d].name,["Attribute",t[l].attributes[d]]);addChildNodes(u.ChildNodes,u,i,1,t[l].attributes[d].value,["AttributeValue",t[l].attributes[d]])}t[l].childNodes.length>0?fillSimpleXMLViewerChildNodes(s,t[l].childNodes,a,n,r,i,o):t[l].nodeValue&&t[l].nodeValue.length>0&&addChildNodes(s.ChildNodes,s,0==n?null:i,1,t[l].nodeValue,["Value",t[l]])}}function CCLXMLViewer(){}function createSimpleXMLViewer(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f){var T=new DOMParser;xmlDoc=T.parseFromString(l,"text/xml");for(var D=new Array,S=0;S<xmlDoc.firstChild.childNodes[0].childNodes.length;S++){var W=addChildNodes(D,null,0==c?null:C,1,xmlDoc.firstChild.childNodes[0].childNodes[S].nodeName,["Node",xmlDoc.firstChild.childNodes[0].childNodes[S]]);if(xmlDoc.firstChild.childNodes[0].childNodes[S].attributes.length>0)for(a=0;a<xmlDoc.firstChild.childNodes[0].childNodes[S].attributes.length;a++){var b=addChildNodes(W.ChildNodes,W,p,1,xmlDoc.firstChild.childNodes[0].childNodes[S].attributes[a].name,["Attribute",xmlDoc.firstChild.childNodes[0].childNodes[S].attributes[a]]);addChildNodes(b.ChildNodes,b,x,1,xmlDoc.firstChild.childNodes[0].childNodes[S].attributes[a].value,["AttributeValue",xmlDoc.firstChild.childNodes[0].childNodes[S].attributes[a]])}xmlDoc.firstChild.childNodes[0].childNodes[S].childNodes.length>0?fillSimpleXMLViewerChildNodes(W,xmlDoc.firstChild.childNodes[0].childNodes[S].childNodes,xmlDoc,c,C,x,p):xmlDoc.firstChild.childNodes[0].childNodes[S].nodeValue&&xmlDoc.firstChild.childNodes[0].childNodes[S].nodeValue.length>0&&addChildNodes(W.ChildNodes,null,0==c?null:x,1,xmlDoc.firstChild.childNodes[0].childNodes[S].nodeValue,["Value",xmlDoc.firstChild.childNodes[0].childNodes[S]])}var H=createTreeView(e,t,a,n,r,i,o,D,s,d,u,h,g,c,w,I,null);return simpleXMLViewerPropsArray.push({CanvasID:e,WindowID:H,X:a,Y:n,Width:r,Height:i,XML:l,TextColor:s,TextFontString:d,TextHeight:u,ClickNodeFunction:h,Tag:g,HasIcons:c,IconWidth:w,IconHeight:I,ImgURLNode:C,ImgURLValue:x,ImgURLAttribute:p}),f>0&&registerKeyDownFunction(e,function(){},H),H}CCLXMLViewer.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,XML:null,TextColor:null,TextFontString:null,TextHeight:null,ClickNodeFunction:null,Tag:null,HasIcons:null,IconWidth:null,IconHeight:null,ImgURLNode:null,ImgURLValue:null,ImgURLAttribute:null,ControlNameID:null,Depth:null,TabStopIndex:-1,Initialize:function(){createSimpleXMLViewer(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.XML,this.TextColor,this.TextFontString,this.TextHeight,this.ClickNodeFunction,this.Tag,this.HasIcons,this.IconWidth,this.IconHeight,this.ImgURLNode,this.ImgURLValue,this.ImgURLAttribute,this.TabStopIndex)}};var votingPropsArray=new Array,votingOutlineImageArray=new Array;function getVotingOutlineImage(e,t){for(var a=0;a<votingOutlineImageArray.length;a++)if(votingOutlineImageArray[a][0]==e&&votingOutlineImageArray[a][1]==t)return votingOutlineImageArray[a][2]}function getVotingProps(e,t){for(var a=0;a<votingPropsArray.length;a++)if(votingPropsArray[a].CanvasID==e&&votingPropsArray[a].WindowID==t)return votingPropsArray[a]}function CCLVotingControl(){}function createVotingControl(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b,H,v,m,P,y,B,L,M,A,F,X,Y,k,R,E,N,G){var V=createWindow(e,a,n,r,i,o,-1,"VotingControl",t,-1,G);1==y&&(votingOutlineImage=new Image,votingOutlineImage.onload=function(){invalidateRect(e,-1,a,n,r,i)},votingOutlineImage.src=B,votingOutlineImageArray.push([e,V,votingOutlineImage])),votingPropsArray.push({CanvasID:e,WindowID:V,X:a,Y:n,Width:r,Height:i,NumStars:l,MaxValueOfAllStars:s,StarColorRed:d,StarColorGreen:u,StarColorBlue:h,StarColorAlpha:g,SpacingInPixelsBetweenStars:w,HasPartialStars:I,Editable:C,HasValueLabel:x,LabelXPos:p,LabelYPos:f,StarsStartingPosOffsetWhenLabel:W,StarsYPosWhenLabel:b,InitialValue:H,OutlineThicknessOfEmptyStar:v,StarsOrientation:m,FillOrientation:P,IsCustomPattern:y,OutLineImgURL:B,CustomFillPoint:L,ImgWidth:M,ImgHeight:A,StarSizeInPixels:c,HasMouseOverLabel:F,StarOutlineBgColorRed:X,StarOutlineBgColorGreen:Y,StarOutlineBgColorBlue:k,StarOutlineBgColorAlpha:R,LabelTextColor:T,LabelTextFontString:D,LabelTextHeight:S,CustomClickFunction:E,RoundDisplayedValueToNumOfDecimals:N}),registerWindowDrawFunction(V,function(e,t){var a=getVotingProps(e,t);if(1==a.IsCustomPattern){var n=getCtx(e);(u=document.createElement("canvas")).width=a.ImgWidth,u.height=a.ImgHeight,(h=u.getContext("2d")).drawImage(getVotingOutlineImage(e,t),0,0);var r=h.getImageData(0,0,u.width,u.height);if((g=1==a.HasPartialStars?Math.floor(a.InitialValue/(a.MaxValueOfAllStars/a.NumStars)):Math.round(a.InitialValue/(a.MaxValueOfAllStars/a.NumStars)))>0){r=fillImageData(a.CustomFillPoint,r);for(var i=0;i<g;i++)n.putImageData(r,a.X+(0==a.StarsOrientation?(1==a.HasValueLabel?a.StarsStartingPosOffsetWhenLabel:0)+i*(a.ImgWidth+a.SpacingInPixelsBetweenStars):0),a.Y+(1==a.StarsOrientation?(1==a.HasValueLabel?a.StarsStartingPosOffsetWhenLabel:0)+i*(a.ImgHeight+a.SpacingInPixelsBetweenStars):0))}var o=0;if(1==a.HasPartialStars)if(o=1,(c=Math.round(a.InitialValue/(a.MaxValueOfAllStars/a.NumStars)%1*a.ImgWidth))>0){(w=document.createElement("canvas")).width=a.ImgWidth,w.height=a.ImgHeight,(I=w.getContext("2d")).drawImage(getVotingOutlineImage(e,t),0,0);for(var l=findStartingFillPointXY(passImageDataAsArray(r=I.getImageData(0,0,u.width,u.height)),r.width,a.CustomFillPoint,a.FillOrientation,c),s=0;s<l.length;s++){r=fillImageData([l[s].X,l[s].Y,0,0,a.ImgWidth,a.ImgHeight,a.StarOutlineBgColorRed,a.StarOutlineBgColorGreen,a.StarOutlineBgColorBlue,a.StarOutlineBgColorAlpha,a.StarColorRed,a.StarColorGreen,a.StarColorBlue,a.StarColorAlpha,a.FillOrientation,0,c],r)}n.putImageData(r,a.X+(0==a.StarsOrientation?(1==a.HasValueLabel?a.StarsStartingPosOffsetWhenLabel:0)+g*(a.ImgWidth+a.SpacingInPixelsBetweenStars):0),a.Y+(1==a.StarsOrientation?(1==a.HasValueLabel?a.StarsStartingPosOffsetWhenLabel:0)+g*(a.ImgHeight+a.SpacingInPixelsBetweenStars):0))}if(g+o<a.NumStars){(C=document.createElement("canvas")).width=a.ImgWidth,C.height=a.ImgHeight,(x=C.getContext("2d")).drawImage(getVotingOutlineImage(e,t),0,0);var d=h.getImageData(0,0,u.width,u.height);for(i=g+o;i<a.NumStars;i++)n.putImageData(d,a.X+(0==a.StarsOrientation?(1==a.HasValueLabel?a.StarsStartingPosOffsetWhenLabel:0)+i*(a.ImgWidth+a.SpacingInPixelsBetweenStars):0),a.Y+(1==a.StarsOrientation?(1==a.HasValueLabel?a.StarsStartingPosOffsetWhenLabel:0)+i*(a.ImgHeight+a.SpacingInPixelsBetweenStars):0))}1==a.HasValueLabel&&(n.fillStyle=a.LabelTextColor,n.fillText(a.InitialValue.toFixed(a.RoundDisplayedValueToNumOfDecimals?a.RoundDisplayedValueToNumOfDecimals:2).toString()+" out of "+a.MaxValueOfAllStars.toString(),a.X+a.LabelXPos,a.Y+a.LabelYPos))}else{var u,h;n=getCtx(e);(u=document.createElement("canvas")).width=a.StarSizeInPixels,u.height=a.StarSizeInPixels,drawOutlineEmptyStarOnCtx(h=u.getContext("2d"),a,u);var g;r=h.getImageData(0,0,u.width,u.height);if((g=1==a.HasPartialStars?Math.floor(a.InitialValue/(a.MaxValueOfAllStars/a.NumStars)):Math.round(a.InitialValue/(a.MaxValueOfAllStars/a.NumStars)))>0){r=fillImageData([a.StarSizeInPixels/2,a.StarSizeInPixels/2,0,0,a.StarSizeInPixels,a.StarSizeInPixels,255,255,255,255,a.StarColorRed,a.StarColorGreen,a.StarColorBlue,a.StarColorAlpha],r);for(i=0;i<g;i++)n.putImageData(r,a.X+(0==a.StarsOrientation?(1==a.HasValueLabel?a.StarsStartingPosOffsetWhenLabel:0)+i*(a.ImgWidth+a.SpacingInPixelsBetweenStars):0),a.Y+(1==a.StarsOrientation?(1==a.HasValueLabel?a.StarsStartingPosOffsetWhenLabel:0)+i*(a.ImgHeight+a.SpacingInPixelsBetweenStars):0))}var c;o=0;if(1==a.HasPartialStars)if(o=1,(c=Math.round(a.InitialValue/(a.MaxValueOfAllStars/a.NumStars)%1*a.StarSizeInPixels))>0){var w,I;(w=document.createElement("canvas")).width=a.StarSizeInPixels,w.height=a.StarSizeInPixels,drawOutlineEmptyStarOnCtx(I=w.getContext("2d"),a,w);for(l=findStartingFillPointXY(passImageDataAsArray(d=I.getImageData(0,0,w.width,w.height)),d.width,[a.StarSizeInPixels/2,a.StarSizeInPixels/2,0,0,a.StarSizeInPixels,a.StarSizeInPixels,255,255,255,255,a.StarColorRed,a.StarColorGreen,a.StarColorBlue,a.StarColorAlpha],a.FillOrientation,c),s=0;s<l.length;s++){d=fillImageData([l[s].X,l[s].Y,0,0,a.StarSizeInPixels,a.StarSizeInPixels,255,255,255,255,a.StarColorRed,a.StarColorGreen,a.StarColorBlue,a.StarColorAlpha,a.FillOrientation,0,c],d)}n.putImageData(d,a.X+(0==a.StarsOrientation?(1==a.HasValueLabel?a.StarsStartingPosOffsetWhenLabel:0)+g*(a.StarSizeInPixels+a.SpacingInPixelsBetweenStars):0),a.Y+(1==a.StarsOrientation?(1==a.HasValueLabel?a.StarsStartingPosOffsetWhenLabel:0)+g*(a.StarSizeInPixels+a.SpacingInPixelsBetweenStars):0))}if(g+o<a.NumStars){var C,x;(C=document.createElement("canvas")).width=a.ImgWidth,C.height=a.ImgHeight,drawOutlineEmptyStarOnCtx(x=C.getContext("2d"),a,C);for(d=x.getImageData(0,0,C.width,C.height),i=g+o;i<a.NumStars;i++)n.putImageData(d,a.X+(0==a.StarsOrientation?(1==a.HasValueLabel?a.StarsStartingPosOffsetWhenLabel:0)+i*(a.StarSizeInPixels+a.SpacingInPixelsBetweenStars):0),a.Y+(1==a.StarsOrientation?(1==a.HasValueLabel?a.StarsStartingPosOffsetWhenLabel:0)+i*(a.StarSizeInPixels+a.SpacingInPixelsBetweenStars):0))}1==a.HasValueLabel&&(n.fillStyle=a.LabelTextColor,n.fillText(a.InitialValue.toFixed(a.RoundDisplayedValueToNumOfDecimals?a.RoundDisplayedValueToNumOfDecimals:2).toString()+" out of "+a.MaxValueOfAllStars.toString(),a.X+a.LabelXPos,a.Y+a.LabelYPos))}},e),1==C&&registerClickFunction(V,function(e,t,a){for(var n=getVotingProps(e,t),r=a.calcX,i=a.calcY,o=0;o<n.NumStars;o++){var l=n.X+(0==n.StarsOrientation?(1==n.HasValueLabel?n.StarsStartingPosOffsetWhenLabel:0)+o*((1==n.IsCustomPattern?n.ImgWidth:n.StarSizeInPixels)+n.SpacingInPixelsBetweenStars):0),s=l+(1==n.IsCustomPattern?n.ImgWidth:n.StarSizeInPixels),d=n.Y+(1==n.StarsOrientation?(1==n.HasValueLabel?n.StarsStartingPosOffsetWhenLabel:0)+o*((1==n.IsCustomPattern?n.ImgHeight:n.StarSizeInPixels)+n.SpacingInPixelsBetweenStars):0),u=d+(1==n.IsCustomPattern?n.ImgHeight:n.StarSizeInPixels);if(l<r&&s>r&&d<i&&u>i){var h=o*(n.MaxValueOfAllStars/n.NumStars)+(0==n.FillOrientation?(r-l)/(1==n.IsCustomPattern?n.ImgWidth:n.StarSizeInPixels):(i-d)/(1==n.IsCustomPattern?n.ImgHeight:n.StarSizeInPixels))*(n.MaxValueOfAllStars/n.NumStars);n.CustomClickFunction?n.CustomClickFunction(e,t,n,r,i,h):n.InitialValue=h}}},e)}function passImageDataAsArray(e){for(var t=new Array,a=0;a<e.width*e.height*4;a++)t.push(e.data[a]);return t}function findStartingFillPointXY(e,t,a,n,r){var i=new Array,o=new Array;for(o.push([a[0],a[1]]);o.length>0;){var l=o[o.length-1][0],s=o[o.length-1][1];o.pop(),e[s*t*4+4*l]==a[6]&&e[s*t*4+4*l+1]==a[7]&&e[s*t*4+4*l+2]==a[8]&&e[s*t*4+4*l+3]==a[9]&&(e[s*t*4+4*l]=a[10],e[s*t*4+4*l+1]=a[11],e[s*t*4+4*l+2]=a[12],e[s*t*4+4*l+3]=a[13],(17==a.length&&0==a[14]?l-1>a[15]:l-1>a[2])&&o.push([l-1,s]),(17==a.length&&0==a[14]?l+1<a[16]:l+1<a[4])&&o.push([l+1,s]),(17==a.length&&1==a[14]?s-1>a[15]:s-1>a[3])&&o.push([l,s-1]),(17==a.length&&1==a[14]?l-1>a[16]:s+1<a[5])&&o.push([l,s+1]),(0==n?l<=r:s<=r)&&i.push({X:l,Y:s}))}return i}function drawOutlineEmptyStarOnCtx(e,t,a){e.fillStyle="#FFFFFF",e.rect(0,0,t.StarSizeInPixels,t.StarSizeInPixels),e.fill(),e.strokeStyle="#000000",e.lineWidth=t.OutlineThicknessOfEmptyStar,e.beginPath();var n=[[0,Math.floor(24*t.StarSizeInPixels/70)],[Math.floor(27*t.StarSizeInPixels/70),Math.floor(24*t.StarSizeInPixels/70)],[Math.floor(t.StarSizeInPixels/2),0],[Math.floor(43*t.StarSizeInPixels/70),Math.floor(24*t.StarSizeInPixels/70)],[t.StarSizeInPixels,Math.floor(24*t.StarSizeInPixels/70)],[Math.floor(49*t.StarSizeInPixels/70),Math.floor(41*t.StarSizeInPixels/70)],[Math.floor(60*t.StarSizeInPixels/70),t.StarSizeInPixels],[Math.floor(t.StarSizeInPixels/2),Math.floor(50*t.StarSizeInPixels/70)],[Math.floor(15*t.StarSizeInPixels/70),Math.floor(t.StarSizeInPixels)],[Math.floor(21*t.StarSizeInPixels/70),Math.floor(41*t.StarSizeInPixels/70)]],r=e.getImageData(0,0,a.width,a.height);e.putImageData(drawClosedLoopLines(r,n,t.StarColorRed,t.StarColorGreen,t.StarColorBlue,t.StarColorAlpha),0,0)}function drawClosedLoopLines(e,t,a,n,r,i){if(t.length>1)for(var o=0;o<t.length;o++)e=drawline2(e,t[o][0],t[o][1],o==t.length-1?t[0][0]:t[o+1][0],o==t.length-1?t[0][1]:t[o+1][1],a,n,r,i);return e}function drawline2(e,t,a,n,r,i,o,l,s){var d=n-t,u=1,h=r-a,g=1;if(d<0&&(u=-1,d=-d),h<0&&(g=-1,h=-h),d<<=1,h<<=1,e=setPixel(e,t,a,i,o,l,s),h<d)for(var c=h-(d>>1);t!=n;)c>=0&&(a+=g,c-=d),c+=h,e=setPixel(e,t+=u,a,i,o,l,s);else for(c=d-(h>>1);a!=r;)c>=0&&(t+=u,c-=h),c+=d,e=setPixel(e,t,a+=g,i,o,l,s);return e}function setPixel(e,t,a,n,r,i,o){return e.data[a*e.width*4+4*t]=n,e.data[a*e.width*4+4*t+1]=r,e.data[a*e.width*4+4*t+2]=i,e.data[a*e.width*4+4*t+3]=o,e}function findMinValueIndex(e){var t=-1;if(e.length>1)for(var a=e[0],n=(t=0,1);n<e.length;n++)a>e[n]&&(a=e[n],t=n);return t}CCLVotingControl.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,NumStars:null,MaxValueOfAllStars:null,StarColorRed:null,StarColorGreen:null,StarColorBlue:null,StarColorAlpha:null,SpacingInPixelsBetweenStars:null,HasPartialStars:null,Editable:null,HasValueLabel:null,LabelXPos:null,LabelYPos:null,StarsStartingPosOffsetWhenLabel:null,StarsYPosWhenLabel:null,InitialValue:null,OutlineThicknessOfEmptyStar:null,StarsOrientation:null,FillOrientation:null,OutLineImgURL:null,CustomFillPoint:null,ImgWidth:null,ImgHeight:null,StarSizeInPixels:null,HasMouseOverLabel:null,StarOutlineBgColorRed:null,StarOutlineBgColorGreen:null,StarOutlineBgColorBlue:null,StarOutlineBgColorAlpha:null,LabelTextColor:null,LabelTextFontString:null,LabelTextHeight:null,CustomClickFunction:null,RoundDisplayedValueToNumOfDecimals:null,ControlNameID:null,Depth:null,TabStopIndex:-1,IsCustomPattern:null,Initialize:function(){return createVotingControl(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.NumStars,this.MaxValueOfAllStars,this.StarColorRed,this.StarColorGreen,this.StarColorBlue,this.StarColorAlpha,this.StarSizeInPixels,this.SpacingInPixelsBetweenStars,this.HasPartialStars,this.Editable,this.HasValueLabel,this.LabelXPos,this.LabelYPos,this.LabelTextColor,this.LabelTextFontString,this.LabelTextHeight,this.StarsStartingPosOffsetWhenLabel,this.StarsYPosWhenLabel,this.InitialValue,this.OutlineThicknessOfEmptyStar,this.StarsOrientation,this.FillOrientation,this.IsCustomPattern,this.OutLineImgURL,this.CustomFillPoint,this.ImgWidth,this.ImgHeight,this.HasMouseOverLabel,this.StarOutlineBgColorRed,this.StarOutlineBgColorGreen,this.StarOutlineBgColorBlue,this.StarOutlineBgColorAlpha,this.CustomClickFunction,this.RoundDisplayedValueToNumOfDecimals,this.TabStopIndex)}};var ribbonPropsArray=new Array;function getRibbonProps(e,t){for(var a=0;a<ribbonPropsArray.length;a++)if(ribbonPropsArray[a].CanvasID==e&&ribbonPropsArray[a].WindowID==t)return ribbonPropsArray[a]}function RibbonButtonScrollableList(){}function RibbonControlTypes(){}function RibbonControl(){}function InitializeRibbonControl(e,t,a,n,r,i,o,l,s,d,u,h,g,c,w,I,C,x,p,f,T,D,S,W,b,H,v,m,P,y,B,L,M,A,F,X,Y,k,R){var E=new RibbonControl;return E.X=e,E.Y=t,E.Width=a,E.Height=n,E.Type=r,E.DropDownButtonX=i,E.DropDownButtonY=o,E.DropDownButtonWidth=l,E.DropDownButtonHeight=s,E.DropDownListX=d,E.DropDownListY=u,E.DropDownListWidth=h,E.DropDownListHeight=g,E.HasButtonImage=c,E.ButtonImageUrl=w,E.HasDropDownTextBoxBgImage=I,E.DropDownTextBoxBgImageUrl=C,E.HasDropDownListBgImage=x,E.DropDownListBgImageUrl=p,E.HasLabel=f,E.LabelText=T,E.LabelTextFontColor=D,E.LabelTextFontHeight=S,E.LabelTextFontString=W,E.LabelX=b,E.LabelY=H,E.ButtonScrollableListId=v,E.DropDownButtonListX=m,E.DropDownButtonListY=P,E.DropDownButtonListWidth=y,E.DropDownButtonListHeight=B,E.DropDownButtonListButtons=L,E.DropDownListButtons=M,E.ClickFunction=A,E.ControlBgStartColor=F,E.ControlBgEndColor=X,E.HasControlBorder=Y,E.ControlBorderColor=k,E.ControlBorderThickness=R,E}function CCLRibbon(){}function createRibbon(e,t,a,n,r,i,o,l,s,d,u,h){var g=createWindow(e,a,n,r,i,o,-1,"Ribbon",t,-1,s);ribbonPropsArray.push({CanvasID:e,X:a,Y:n,Width:r,Height:i,Controls:l,ShowDropDownListControlsIndex:-1,BgColorStart:d,BgColorEnd:u,ScrollableLists:h});for(var c=0;c<l.length;c++){if(1==control.HasButtonImage){var w=new Image;image.onload=function(){},w.src=control.ButtonImageUrl,control.ButtonImage=w}if(1==control.HasDropDownTextBoxBgImage){var I=new Image;I.onload=function(){},I.src=control.DropDownTextBoxBgImageUrl,control.DropDownTextBoxBgImage=I}if(1==control.HasDropDownListBgImage){var C=new Image;C.onload=function(){},C.src=control.DropDownListBgImageUrl,control.DropDownListBgImage=C}}registerWindowDrawFunction(g,function(e,t){var a=getRibbonProps(e,t),n=getCtx(e);if(null!=a.BgColorStart&&null!=a.BgColorEnd){var r=n.createLinearGradient(a.X,a.Y,a.X+a.Width,a.Y);r.addColorStop(a.BgColorStart),r.addColorStop(a.BgColorEnd),n.fillStyle=r,n.beginPath(),n.rect(a.X,a.Y,a.X+a.Width,a.Y+a.Height),n.fill()}for(var i=new RibbonControlTypes,o=0;o<a.Controls.length;o++){var l=a.Controls[o];if(l.Type==i.Button){if(null!=l.ControlBgStartColor&&null!=l.ControlBgEndColor){var s=n.createLinearGradient(a.X+l.X,a.Y+l.Y,a.X+l.X+l.Width,a.Y+l.Y);n.fillStyle=s,n.beginPath(),n.rect(a.X+l.X,a.Y+l.Y,a.X+l.X+l.Width,a.Y+l.Y+l.Height),n.fill()}1==l.HasButtonImage&&null!=l.ButtonImageUrl&&null!=l.ButtonImage&&n.drawImage(l.ButtonImage,a.X+l.X,a.Y+l.Y),1==l.HasControlBorder&&(n.strokeStyle=null!=l.ControlBorderColor?l.ControlBorderColor:"#000000",n.rect(a.X+l.X,a.Y+l.Y,a.X+l.X+l.Width,a.Y+l.Y+l.Height),n.stroke())}}},e)}RibbonButtonScrollableList.prototype={ID:null,X:null,Y:null,Width:null,Height:null,VerticalScrollBarYPos:null,VerticalScrollBarWidth:null,VeritcalScrollBarScrollButtonWidth:null,VerticalScrollBarScollButtonHeight:null,VerticalScrollBarButtonHasImage:null,VerticalScrollBarTopButtonImageUrl:null,VerticalScrollBarBottomButtonImageUrl:null},RibbonControlTypes.prototype={Button:1,ComboBox:2,CheckBox:3,ButtonScrollableList:4,DropDownButton:5,DropDownButtonListButton:6},RibbonControl.prototype={X:null,Y:null,Width:null,Height:null,Type:null,DropDownButtonX:null,DropDownButtonY:null,DropDownButtonWidth:null,DropDownButtonHeight:null,DropDownListX:null,DropDownListY:null,DropDownListWidth:null,DropDownListHeight:null,HasButtonImage:null,ButtonImageUrl:null,HasDropDownTextBoxBgImage:null,DropDownTextBoxBgImageUrl:null,HasDropDownListBgImage:null,DropDownListBgImageUrl:null,HasLabel:null,LabelText:null,LabelTextFontColor:null,LabelTextFontHeight:null,LabelTextFontString:null,LabelX:null,LabelY:null,ButtonScrollableListId:null,DropDownButtonListX:null,DropDownButtonListY:null,DropDownButtonListWidth:null,DropDownButtonListHeight:null,DropDownButtonListButtons:null,DropDownListButtons:null,ClickFunction:null,ControlBgStartColor:null,ControlBgEndColor:null,HasControlBorder:null,ControlBorderColor:null,ControlBorderThickness:null,ButtonImage:null,DropDownTextBoxBgImage:null,DropDownListBgImage:null},CCLRibbon.prototype={CanvasID:null,ControlNameID:null,X:null,Y:null,Width:null,Height:null,Depth:null,Controls:null,HasHoverColor:null,HoverColor:null,HoverColorAlpha:null,TabStopIndex:-1,BgColorStart:null,BgColorEnd:null,ScrollableLists:null,Initialize:function(){return createRibbon(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Depth,this.Height,this.Controls,this.TabStopIndex,this.BgColorStart,this.BgColorEnd,this.ScrollableLists)}};